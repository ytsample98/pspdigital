{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\inventory\\\\invmaster\\\\CurrencyPage.js\";\nimport React, { Component } from 'react';\nimport { db } from '../../../firebase';\nimport { collection, addDoc, getDocs, updateDoc, deleteDoc, doc } from 'firebase/firestore';\nimport staticRates from '../../../assets/currencyRates.json'; // adjust path if needed\n\nclass CurrencyPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currencies: [],\n      formData: {\n        name: '',\n        code: '',\n        shortName: '',\n        conversionRate: ''\n      },\n      editingId: null,\n      loading: false,\n      searchTerm: ''\n    };\n\n    this.componentDidMount = async () => {\n      this.fetchCurrencies();\n    };\n\n    this.fetchCurrencies = async () => {\n      const snap = await getDocs(collection(db, 'currencies'));\n      const currencies = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        currencies\n      });\n    };\n\n    this.uploadAllRates = async () => {\n      this.setState({\n        loading: true\n      });\n\n      try {\n        // Remove old\n        const snap = await getDocs(collection(db, 'currencies'));\n        const deletePromises = snap.docs.map(d => deleteDoc(doc(db, 'currencies', d.id)));\n        await Promise.all(deletePromises); // Add all from JSON\n\n        const mapping = staticRates.mapping;\n        await Promise.all(Object.entries(mapping).map(([code, obj]) => addDoc(collection(db, 'currencies'), {\n          code,\n          name: obj.name || code,\n          conversionRate: obj.rate,\n          base: staticRates.base || 'INR'\n        })));\n        alert('All rates uploaded!');\n        this.fetchCurrencies();\n      } catch (err) {\n        alert('Error uploading rates');\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        formData: { ...this.state.formData,\n          [name]: value\n        }\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        name,\n        code,\n        shortName,\n        conversionRate\n      } = this.state.formData;\n      if (!name || !code || !conversionRate) return alert('Fill all fields');\n      this.setState({\n        loading: true\n      });\n\n      if (this.state.editingId) {\n        await updateDoc(doc(db, 'currencies', this.state.editingId), {\n          name,\n          code,\n          shortName,\n          conversionRate: parseFloat(conversionRate),\n          base: 'INR'\n        });\n        alert('Updated!');\n      } else {\n        await addDoc(collection(db, 'currencies'), {\n          name,\n          code,\n          shortName,\n          conversionRate: parseFloat(conversionRate),\n          base: 'INR'\n        });\n        alert('Added!');\n      }\n\n      this.setState({\n        formData: {\n          name: '',\n          code: '',\n          shortName: '',\n          conversionRate: ''\n        },\n        editingId: null,\n        loading: false\n      });\n      this.fetchCurrencies();\n    };\n\n    this.handleEdit = cur => {\n      this.setState({\n        formData: {\n          name: cur.name,\n          code: cur.code,\n          shortName: cur.shortName || '',\n          conversionRate: cur.conversionRate\n        },\n        editingId: cur.id\n      });\n    };\n\n    this.handleDelete = async id => {\n      if (window.confirm('Delete this currency?')) {\n        await deleteDoc(doc(db, 'currencies', id));\n        this.fetchCurrencies();\n      }\n    };\n  }\n\n  render() {\n    const {\n      currencies,\n      formData,\n      loading,\n      searchTerm\n    } = this.state;\n    const filteredCurrencies = currencies.filter(c => (c.name || '').toLowerCase().includes(searchTerm.toLowerCase()) || (c.code || '').toLowerCase().includes(searchTerm.toLowerCase()) || (c.shortName || '').toLowerCase().includes(searchTerm.toLowerCase()));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, \"Currency Master (Base: INR)\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row g-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"name\",\n      placeholder: \"Currency Name\",\n      value: formData.name,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"code\",\n      placeholder: \"Code (USD)\",\n      value: formData.code,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"shortName\",\n      placeholder: \"Short Name\",\n      value: formData.shortName,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.0001\",\n      className: \"form-control\",\n      name: \"conversionRate\",\n      placeholder: \"Rate vs INR\",\n      value: formData.conversionRate,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary w-100\",\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    }, this.state.editingId ? 'Update' : 'Add')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Search...\",\n      value: searchTerm,\n      onChange: e => this.setState({\n        searchTerm: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-warning btn-sm mb-2\",\n      onClick: this.uploadAllRates,\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 1\n      }\n    }, \"Upload All Rates from JSON\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-sm table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, \"Rate (1 unit = ? INR)\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 16\n      }\n    }, filteredCurrencies.length > 0 ? filteredCurrencies.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }, i + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, c.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }, c.code), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }\n    }, \" \", c.conversionRate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-info me-2\",\n      onClick: () => this.handleEdit(c),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-danger\",\n      onClick: () => this.handleDelete(c.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, \"Delete\")))) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }\n    }, \"No data found\"))))))));\n  }\n\n}\n\nexport default CurrencyPage;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/inventory/invmaster/CurrencyPage.js"],"names":["React","Component","db","collection","addDoc","getDocs","updateDoc","deleteDoc","doc","staticRates","CurrencyPage","state","currencies","formData","name","code","shortName","conversionRate","editingId","loading","searchTerm","componentDidMount","fetchCurrencies","snap","docs","map","d","id","data","setState","uploadAllRates","deletePromises","Promise","all","mapping","Object","entries","obj","rate","base","alert","err","handleChange","e","value","target","handleSubmit","preventDefault","parseFloat","handleEdit","cur","handleDelete","window","confirm","render","filteredCurrencies","filter","c","toLowerCase","includes","length","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { db } from '../../../firebase';\r\nimport { collection, addDoc, getDocs, updateDoc, deleteDoc, doc } from 'firebase/firestore';\r\nimport staticRates from '../../../assets/currencyRates.json'; // adjust path if needed\r\nclass CurrencyPage extends Component {\r\n  state = {\r\n    currencies: [],\r\n    formData: { name: '', code: '', shortName: '', conversionRate: '' },\r\n    editingId: null,\r\n    loading: false,\r\n    searchTerm: '',\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    this.fetchCurrencies();\r\n  };\r\n\r\n  fetchCurrencies = async () => {\r\n    const snap = await getDocs(collection(db, 'currencies'));\r\n    const currencies = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    this.setState({ currencies });\r\n  };\r\n\r\nuploadAllRates = async () => {\r\n  this.setState({ loading: true });\r\n  try {\r\n    // Remove old\r\n    const snap = await getDocs(collection(db, 'currencies'));\r\n    const deletePromises = snap.docs.map(d => deleteDoc(doc(db, 'currencies', d.id)));\r\n    await Promise.all(deletePromises);\r\n\r\n    // Add all from JSON\r\n    const mapping = staticRates.mapping;\r\n    await Promise.all(\r\n      Object.entries(mapping).map(([code, obj]) =>\r\n        addDoc(collection(db, 'currencies'), {\r\n          code,\r\n          name: obj.name || code,\r\n          conversionRate: obj.rate,\r\n          base: staticRates.base || 'INR',\r\n        })\r\n      )\r\n    );\r\n    alert('All rates uploaded!');\r\n    this.fetchCurrencies();\r\n  } catch (err) {\r\n    alert('Error uploading rates');\r\n  } finally {\r\n    this.setState({ loading: false });\r\n  }\r\n};\r\n  handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({ formData: { ...this.state.formData, [name]: value } });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { name, code, shortName, conversionRate } = this.state.formData;\r\n    if (!name || !code || !conversionRate) return alert('Fill all fields');\r\n    this.setState({ loading: true });\r\n\r\n    if (this.state.editingId) {\r\n      await updateDoc(doc(db, 'currencies', this.state.editingId), {\r\n        name, code, shortName, conversionRate: parseFloat(conversionRate), base: 'INR'\r\n      });\r\n      alert('Updated!');\r\n    } else {\r\n      await addDoc(collection(db, 'currencies'), {\r\n        name, code, shortName, conversionRate: parseFloat(conversionRate), base: 'INR'\r\n      });\r\n      alert('Added!');\r\n    }\r\n\r\n    this.setState({ formData: { name: '', code: '', shortName: '', conversionRate: '' }, editingId: null, loading: false });\r\n    this.fetchCurrencies();\r\n  };\r\n\r\n  handleEdit = (cur) => {\r\n    this.setState({ formData: { name: cur.name, code: cur.code, shortName: cur.shortName || '', conversionRate: cur.conversionRate }, editingId: cur.id });\r\n  };\r\n\r\n  handleDelete = async (id) => {\r\n    if (window.confirm('Delete this currency?')) {\r\n      await deleteDoc(doc(db, 'currencies', id));\r\n      this.fetchCurrencies();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { currencies, formData, loading, searchTerm } = this.state;\r\n    const filteredCurrencies = currencies.filter(c =>\r\n      (c.name || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      (c.code || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      (c.shortName || '').toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    return (\r\n      <div className=\"container-fluid mt-3\">\r\n        <div className=\"card full-height\">\r\n          <div className=\"card-body\">\r\n            <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n              <h4 className=\"card-title mb-0\">Currency Master (Base: INR)</h4>\r\n            </div>\r\n\r\n            <form onSubmit={this.handleSubmit} className=\"mb-3\">\r\n              <div className=\"row g-2\">\r\n                <div className=\"col-md-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"name\"\r\n                    placeholder=\"Currency Name\"\r\n                    value={formData.name}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"code\"\r\n                    placeholder=\"Code (USD)\"\r\n                    value={formData.code}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    name=\"shortName\"\r\n                    placeholder=\"Short Name\"\r\n                    value={formData.shortName}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.0001\"\r\n                    className=\"form-control\"\r\n                    name=\"conversionRate\"\r\n                    placeholder=\"Rate vs INR\"\r\n                    value={formData.conversionRate}\r\n                    onChange={this.handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <button className=\"btn btn-primary w-100\" disabled={loading}>\r\n                    {this.state.editingId ? 'Update' : 'Add'}\r\n                  </button>\r\n                </div>\r\n                <div className=\"col-md-1\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Search...\"\r\n                    value={searchTerm}\r\n                    onChange={e => this.setState({ searchTerm: e.target.value })}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n<button\r\n  className=\"btn btn-warning btn-sm mb-2\"\r\n  onClick={this.uploadAllRates}\r\n  disabled={loading}\r\n>\r\n  Upload All Rates from JSON\r\n</button>\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table table-sm table-bordered table-hover\">\r\n                <thead className=\"thead-light\">\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>Name</th>\r\n                    <th>Code</th>\r\n                    <th>Rate (1 unit = ? INR)</th>\r\n                    <th>Action</th>\r\n                  </tr>\r\n                </thead>\r\n               <tbody>\r\n  {filteredCurrencies.length > 0 ? (\r\n    filteredCurrencies.map((c, i) => (\r\n      <tr key={c.id}>\r\n        <td>{i + 1}</td>\r\n        <td>{c.name}</td>\r\n        <td>{c.code}</td>\r\n        <td> {c.conversionRate}</td>\r\n        <td>\r\n          <button className=\"btn btn-sm btn-info me-2\" onClick={() => this.handleEdit(c)}>Edit</button>\r\n          <button className=\"btn btn-sm btn-danger\" onClick={() => this.handleDelete(c.id)}>Delete</button>\r\n        </td>\r\n      </tr>\r\n    ))\r\n  ) : (\r\n    <tr><td colSpan=\"6\">No data found</td></tr>\r\n  )}\r\n</tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CurrencyPage;"]},"metadata":{},"sourceType":"module"}