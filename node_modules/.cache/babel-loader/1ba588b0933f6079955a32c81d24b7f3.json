{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\crm\\\\Datalist.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Table, Form } from \"react-bootstrap\";\nimport { db } from \"../../firebase\"; // ✅ same import as Quote.js\n\nimport { collection, getDocs, addDoc, updateDoc, doc } from \"firebase/firestore\";\n\nclass Datalist extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      accounts: [],\n      showModal: false,\n      selectedAccount: null,\n      contactPersons: []\n    };\n\n    this.fetchAccounts = async () => {\n      const snap = await getDocs(collection(db, \"accounts\"));\n      const accounts = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        accounts\n      });\n    };\n\n    this.handleTableChange = async (id, field, value) => {\n      const accounts = this.state.accounts.map(acc => acc.id === id ? { ...acc,\n        [field]: value\n      } : acc);\n      this.setState({\n        accounts\n      });\n      const acc = accounts.find(a => a.id === id);\n      await updateDoc(doc(db, \"accounts\", id), acc);\n    };\n\n    this.openModal = account => {\n      this.setState({\n        showModal: true,\n        selectedAccount: { ...account\n        },\n        contactPersons: account.contactPersons || []\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        showModal: false,\n        selectedAccount: null,\n        contactPersons: []\n      });\n    };\n\n    this.handleModalChange = (field, value) => {\n      this.setState({\n        selectedAccount: { ...this.state.selectedAccount,\n          [field]: value\n        }\n      });\n    };\n\n    this.handleContactPersonChange = (index, field, value) => {\n      const cps = [...this.state.contactPersons];\n      cps[index][field] = value;\n      this.setState({\n        contactPersons: cps\n      });\n    };\n\n    this.addContactPerson = () => {\n      this.setState({\n        contactPersons: [...this.state.contactPersons, {\n          name: \"\",\n          designation: \"\",\n          phone: \"\",\n          mail: \"\",\n          linkedin: \"\"\n        }]\n      });\n    };\n\n    this.saveModal = async () => {\n      const {\n        selectedAccount,\n        contactPersons\n      } = this.state;\n      const updatedAcc = { ...selectedAccount,\n        contactPersons\n      };\n\n      if (updatedAcc.id) {\n        await updateDoc(doc(db, \"accounts\", updatedAcc.id), updatedAcc);\n      } else {\n        await addDoc(collection(db, \"accounts\"), updatedAcc);\n      }\n\n      this.fetchAccounts();\n      this.closeModal();\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAccounts();\n  } // ✅ fetch accounts (v9 style)\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, \"Account Data List\"), /*#__PURE__*/React.createElement(Table, {\n      bordered: true,\n      hover: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 15\n      }\n    }, \"a/c No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, \"a/c Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, \"Contact\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, \"Country\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, \"State\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, \"City\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, \"Website\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    }, \"Phone\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, \"More\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, this.state.accounts.map(acc => /*#__PURE__*/React.createElement(\"tr\", {\n      key: acc.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, [\"acno\", \"acname\", \"contact\", \"country\", \"state\", \"city\", \"email\", \"website\", \"phone\"].map(field => /*#__PURE__*/React.createElement(\"td\", {\n      key: field,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      value: acc[field] || \"\",\n      onChange: e => this.handleTableChange(acc.id, field, e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      onClick: () => this.openModal(acc),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 19\n      }\n    }, \"More\")))))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showModal,\n      onHide: this.closeModal,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, \"More Details\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 11\n      }\n    }, this.state.selectedAccount && /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, \"a/c Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      value: this.state.selectedAccount.acname || \"\",\n      onChange: e => this.handleModalChange(\"acname\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n      value: this.state.selectedAccount.email || \"\",\n      onChange: e => this.handleModalChange(\"email\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, \"Contact Persons\"), this.state.contactPersons.map((cp, i) => /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      className: \"mb-3 p-2 border rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Name\",\n      value: cp.name,\n      onChange: e => this.handleContactPersonChange(i, \"name\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Designation\",\n      value: cp.designation,\n      onChange: e => this.handleContactPersonChange(i, \"designation\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Phone\",\n      value: cp.phone,\n      onChange: e => this.handleContactPersonChange(i, \"phone\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Mail\",\n      value: cp.mail,\n      onChange: e => this.handleContactPersonChange(i, \"mail\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"LinkedIn\",\n      value: cp.linkedin,\n      onChange: e => this.handleContactPersonChange(i, \"linkedin\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.addContactPerson,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, \"+ Add Contact Person\"))), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.saveModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, \"Cancel\"))));\n  }\n\n}\n\nexport default Datalist;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/crm/Datalist.js"],"names":["React","Component","Modal","Button","Table","Form","db","collection","getDocs","addDoc","updateDoc","doc","Datalist","state","accounts","showModal","selectedAccount","contactPersons","fetchAccounts","snap","docs","map","id","data","setState","handleTableChange","field","value","acc","find","a","openModal","account","closeModal","handleModalChange","handleContactPersonChange","index","cps","addContactPerson","name","designation","phone","mail","linkedin","saveModal","updatedAcc","componentDidMount","render","e","target","acname","email","cp","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Modal, Button, Table, Form } from \"react-bootstrap\";\r\nimport { db } from \"../../firebase\";  // ✅ same import as Quote.js\r\nimport { collection, getDocs, addDoc, updateDoc, doc } from \"firebase/firestore\";\r\n\r\nclass Datalist extends Component {\r\n  state = {\r\n    accounts: [],\r\n    showModal: false,\r\n    selectedAccount: null,\r\n    contactPersons: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.fetchAccounts();\r\n  }\r\n\r\n  // ✅ fetch accounts (v9 style)\r\n  fetchAccounts = async () => {\r\n    const snap = await getDocs(collection(db, \"accounts\"));\r\n    const accounts = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ accounts });\r\n  };\r\n\r\n  // ✅ inline edit save\r\n  handleTableChange = async (id, field, value) => {\r\n    const accounts = this.state.accounts.map((acc) =>\r\n      acc.id === id ? { ...acc, [field]: value } : acc\r\n    );\r\n    this.setState({ accounts });\r\n\r\n    const acc = accounts.find((a) => a.id === id);\r\n    await updateDoc(doc(db, \"accounts\", id), acc);\r\n  };\r\n\r\n  // ✅ open modal\r\n  openModal = (account) => {\r\n    this.setState({\r\n      showModal: true,\r\n      selectedAccount: { ...account },\r\n      contactPersons: account.contactPersons || [],\r\n    });\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ showModal: false, selectedAccount: null, contactPersons: [] });\r\n  };\r\n\r\n  handleModalChange = (field, value) => {\r\n    this.setState({\r\n      selectedAccount: { ...this.state.selectedAccount, [field]: value },\r\n    });\r\n  };\r\n\r\n  handleContactPersonChange = (index, field, value) => {\r\n    const cps = [...this.state.contactPersons];\r\n    cps[index][field] = value;\r\n    this.setState({ contactPersons: cps });\r\n  };\r\n\r\n  addContactPerson = () => {\r\n    this.setState({\r\n      contactPersons: [\r\n        ...this.state.contactPersons,\r\n        { name: \"\", designation: \"\", phone: \"\", mail: \"\", linkedin: \"\" },\r\n      ],\r\n    });\r\n  };\r\n\r\n  // ✅ save modal\r\n  saveModal = async () => {\r\n    const { selectedAccount, contactPersons } = this.state;\r\n    const updatedAcc = { ...selectedAccount, contactPersons };\r\n\r\n    if (updatedAcc.id) {\r\n      await updateDoc(doc(db, \"accounts\", updatedAcc.id), updatedAcc);\r\n    } else {\r\n      await addDoc(collection(db, \"accounts\"), updatedAcc);\r\n    }\r\n\r\n    this.fetchAccounts();\r\n    this.closeModal();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container mt-4\">\r\n        <h3>Account Data List</h3>\r\n        <Table bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>a/c No</th>\r\n              <th>a/c Name</th>\r\n              <th>Contact</th>\r\n              <th>Country</th>\r\n              <th>State</th>\r\n              <th>City</th>\r\n              <th>Email</th>\r\n              <th>Website</th>\r\n              <th>Phone</th>\r\n              <th>More</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.accounts.map((acc) => (\r\n              <tr key={acc.id}>\r\n                {[\"acno\", \"acname\", \"contact\", \"country\", \"state\", \"city\", \"email\", \"website\", \"phone\"].map(\r\n                  (field) => (\r\n                    <td key={field}>\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        value={acc[field] || \"\"}\r\n                        onChange={(e) => this.handleTableChange(acc.id, field, e.target.value)}\r\n                      />\r\n                    </td>\r\n                  )\r\n                )}\r\n                <td>\r\n                  <Button variant=\"info\" size=\"sm\" onClick={() => this.openModal(acc)}>\r\n                    More\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n\r\n        {/* Modal */}\r\n        <Modal show={this.state.showModal} onHide={this.closeModal} size=\"lg\">\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>More Details</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            {this.state.selectedAccount && (\r\n              <Form>\r\n                <Form.Group>\r\n                  <Form.Label>a/c Name</Form.Label>\r\n                  <Form.Control\r\n                    value={this.state.selectedAccount.acname || \"\"}\r\n                    onChange={(e) => this.handleModalChange(\"acname\", e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group>\r\n                  <Form.Label>Email</Form.Label>\r\n                  <Form.Control\r\n                    value={this.state.selectedAccount.email || \"\"}\r\n                    onChange={(e) => this.handleModalChange(\"email\", e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n                <hr />\r\n                <h5>Contact Persons</h5>\r\n                {this.state.contactPersons.map((cp, i) => (\r\n                  <div key={i} className=\"mb-3 p-2 border rounded\">\r\n                    <Form.Control\r\n                      placeholder=\"Name\"\r\n                      value={cp.name}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"name\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"Designation\"\r\n                      value={cp.designation}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"designation\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"Phone\"\r\n                      value={cp.phone}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"phone\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"Mail\"\r\n                      value={cp.mail}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"mail\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"LinkedIn\"\r\n                      value={cp.linkedin}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"linkedin\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                  </div>\r\n                ))}\r\n                <Button variant=\"secondary\" onClick={this.addContactPerson}>\r\n                  + Add Contact Person\r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"primary\" onClick={this.saveModal}>\r\n              Submit\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={this.closeModal}>\r\n              Cancel\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Datalist;\r\n"]},"metadata":{},"sourceType":"module"}