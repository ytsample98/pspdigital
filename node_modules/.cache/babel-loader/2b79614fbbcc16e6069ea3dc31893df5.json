{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\order\\\\OrderApproval.js\";\n// src/app/sales/salestransactions/order/OrderApproval.js\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\n\nclass OrderApproval extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      orders: [],\n      selectedOrder: null,\n      showForm: false\n    };\n\n    this.fetchOrders = () => {\n      axios.get(\"http://localhost:3000/orders\") // ✅ adjust API endpoint if needed\n      .then(res => {\n        // Show only those Awaiting Approval\n        const awaiting = res.data.filter(o => o.status === \"Awaiting for Approval\");\n        this.setState({\n          orders: awaiting\n        });\n      }).catch(err => console.error(err));\n    };\n\n    this.openOrder = order => {\n      this.setState({\n        selectedOrder: order,\n        showForm: true\n      });\n    };\n\n    this.closeForm = () => {\n      this.setState({\n        selectedOrder: null,\n        showForm: false\n      });\n    };\n\n    this.handleApproval = status => {\n      if (!this.state.selectedOrder) return;\n      axios.patch(`http://localhost:4000/orders/${this.state.selectedOrder.id}/status`, {\n        status\n      }).then(() => {\n        this.setState({\n          selectedOrder: null,\n          showForm: false\n        }, this.fetchOrders);\n      }).catch(err => console.error(err));\n    };\n  }\n\n  componentDidMount() {\n    this.fetchOrders();\n  }\n\n  render() {\n    const {\n      orders,\n      selectedOrder,\n      showForm\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, \"Order Approval\"), !showForm && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, \"Order No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }\n    }, \"Order Value\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, orders.map((o, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link p-0\",\n      onClick: () => this.openOrder(o),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }\n    }, o.orderNo)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }\n    }, o.orderDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 23\n      }\n    }, o.customerName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 23\n      }\n    }, o.orderValue), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"badge badge-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }\n    }, o.status)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-info mr-2\",\n      onClick: () => this.openOrder(o),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }, \"View\")))), orders.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      className: \"text-center text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 23\n      }\n    }, \"No awaiting approvals\")))))), showForm && selectedOrder && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \"Order #\", selectedOrder.orderNo), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-secondary\",\n      onClick: this.closeForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }, \"Close\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 18\n      }\n    }, \"Date:\"), \" \", selectedOrder.orderDate), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 18\n      }\n    }, \"Customer:\"), \" \", selectedOrder.customerName), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 18\n      }\n    }, \"Order Value:\"), \" \", selectedOrder.orderValue), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 18\n      }\n    }, \"Status:\"), \" \", selectedOrder.status), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, \"Line Items\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, \"Item\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 21\n      }\n    }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, \"Tax Amt\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, \"Total\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, (selectedOrder.lineItems || []).map((li, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 23\n      }\n    }, li.ptshortName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 23\n      }\n    }, li.qty), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 23\n      }\n    }, li.unitPrice), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 23\n      }\n    }, li.taxAmt), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    }, li.itemTotal))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success mr-2\",\n      onClick: () => this.handleApproval(\"Approved\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, \"Approve\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger mr-2\",\n      onClick: () => this.handleApproval(\"Rejected\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, \"Reject\"), /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: '/sales/salestransactions/order/Order',\n        state: {\n          openForm: true,\n          editId: selectedOrder.id\n        }\n      },\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, \"Edit\")))));\n  }\n\n}\n\nexport default OrderApproval;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/order/OrderApproval.js"],"names":["React","Component","axios","Link","OrderApproval","state","orders","selectedOrder","showForm","fetchOrders","get","then","res","awaiting","data","filter","o","status","setState","catch","err","console","error","openOrder","order","closeForm","handleApproval","patch","id","componentDidMount","render","map","i","orderNo","orderDate","customerName","orderValue","length","lineItems","li","idx","ptshortName","qty","unitPrice","taxAmt","itemTotal","pathname","openForm","editId"],"mappings":"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","sourcesContent":["// src/app/sales/salestransactions/order/OrderApproval.js\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass OrderApproval extends Component {\r\n  state = {\r\n    orders: [],\r\n    selectedOrder: null,\r\n    showForm: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.fetchOrders();\r\n  }\r\n\r\n  fetchOrders = () => {\r\n    axios\r\n      .get(\"http://localhost:3000/orders\") // ✅ adjust API endpoint if needed\r\n      .then((res) => {\r\n        // Show only those Awaiting Approval\r\n        const awaiting = res.data.filter((o) => o.status === \"Awaiting for Approval\");\r\n        this.setState({ orders: awaiting });\r\n      })\r\n      .catch((err) => console.error(err));\r\n  };\r\n\r\n  openOrder = (order) => {\r\n    this.setState({ selectedOrder: order, showForm: true });\r\n  };\r\n\r\n  closeForm = () => {\r\n    this.setState({ selectedOrder: null, showForm: false });\r\n  };\r\n\r\nhandleApproval = (status) => {\r\n  if (!this.state.selectedOrder) return;\r\n\r\n  axios\r\n    .patch(`http://localhost:4000/orders/${this.state.selectedOrder.id}/status`, { status })\r\n    .then(() => {\r\n      this.setState({ selectedOrder: null, showForm: false }, this.fetchOrders);\r\n    })\r\n    .catch((err) => console.error(err));\r\n};\r\n\r\n\r\n  render() {\r\n    const { orders, selectedOrder, showForm } = this.state;\r\n\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <h4 className=\"mb-3\">Order Approval</h4>\r\n\r\n        {!showForm && (\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <table className=\"table table-bordered table-sm\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Order No</th>\r\n                    <th>Date</th>\r\n                    <th>Customer</th>\r\n                    <th>Order Value</th>\r\n                    <th>Status</th>\r\n                    <th>Action</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {orders.map((o, i) => (\r\n                    <tr key={i}>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-link p-0\"\r\n                          onClick={() => this.openOrder(o)}\r\n                        >\r\n                          {o.orderNo}\r\n                        </button>\r\n                      </td>\r\n                      <td>{o.orderDate}</td>\r\n                      <td>{o.customerName}</td>\r\n                      <td>{o.orderValue}</td>\r\n                      <td>\r\n                        <span className=\"badge badge-warning\">{o.status}</span>\r\n                      </td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-sm btn-info mr-2\"\r\n                          onClick={() => this.openOrder(o)}\r\n                        >\r\n                          View\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                  {orders.length === 0 && (\r\n                    <tr>\r\n                      <td colSpan=\"6\" className=\"text-center text-muted\">\r\n                        No awaiting approvals\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {showForm && selectedOrder && (\r\n          <div className=\"card mt-3\">\r\n            <div className=\"card-header d-flex justify-content-between\">\r\n              <h5>Order #{selectedOrder.orderNo}</h5>\r\n              <button className=\"btn btn-sm btn-secondary\" onClick={this.closeForm}>\r\n                Close\r\n              </button>\r\n            </div>\r\n            <div className=\"card-body\">\r\n              {/* Display full order details (similar to Order.js form preview) */}\r\n              <p><strong>Date:</strong> {selectedOrder.orderDate}</p>\r\n              <p><strong>Customer:</strong> {selectedOrder.customerName}</p>\r\n              <p><strong>Order Value:</strong> {selectedOrder.orderValue}</p>\r\n              <p><strong>Status:</strong> {selectedOrder.status}</p>\r\n\r\n              <h6>Line Items</h6>\r\n              <table className=\"table table-bordered table-sm\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Item</th>\r\n                    <th>Qty</th>\r\n                    <th>Unit Price</th>\r\n                    <th>Tax Amt</th>\r\n                    <th>Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {(selectedOrder.lineItems || []).map((li, idx) => (\r\n                    <tr key={idx}>\r\n                      <td>{li.ptshortName}</td>\r\n                      <td>{li.qty}</td>\r\n                      <td>{li.unitPrice}</td>\r\n                      <td>{li.taxAmt}</td>\r\n                      <td>{li.itemTotal}</td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n\r\n              <div className=\"mt-3\">\r\n                <button\r\n                  className=\"btn btn-success mr-2\"\r\n                  onClick={() => this.handleApproval(\"Approved\")}\r\n                >\r\n                  Approve\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-danger mr-2\"\r\n                  onClick={() => this.handleApproval(\"Rejected\")}\r\n                >\r\n                  Reject\r\n                </button>\r\n                <Link\r\n                  to={{\r\n                    pathname: '/sales/salestransactions/order/Order',\r\n                    state: { openForm: true, editId: selectedOrder.id }\r\n                  }}\r\n                  className=\"btn btn-primary\"\r\n                >\r\n                  Edit\r\n                </Link>\r\n                \r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default OrderApproval;\r\n"]},"metadata":{},"sourceType":"module"}