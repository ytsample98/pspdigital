{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\invoice\\\\idbill\\\\IndirectBilling.js\";\n// IndirectBilling.js\nimport React, { Component } from \"react\";\nimport { db } from \"../../../../../firebase\";\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from \"firebase/firestore\";\n\nclass IndirectBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      suppliers: [],\n      products: [],\n      bills: [],\n      taxGroups: [],\n      showForm: false,\n      editingId: null,\n      activeTab: 0,\n      showSupplierOverlay: false,\n      supplierOverlaySearch: \"\",\n      showProductOverlay: false,\n      productOverlaySearch: \"\",\n      selectedProductIds: [],\n      formData: this.getEmptyForm(),\n      notes: \"\"\n    };\n\n    this.fetchSuppliers = async () => {\n      const snap = await getDocs(collection(db, \"suppliers\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        suppliers: data\n      });\n    };\n\n    this.fetchProducts = async () => {\n      const snap = await getDocs(collection(db, \"products\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        products: data\n      });\n    };\n\n    this.fetchBills = async () => {\n      const snap = await getDocs(collection(db, \"indirectBills\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        bills: data.reverse()\n      });\n    };\n\n    this.fetchTaxGroups = async () => {\n      const snap = await getDocs(collection(db, \"taxGroups\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        taxGroups: data\n      });\n    };\n\n    this.selectSupplier = s => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          supplierId: s.id,\n          supplier: s.spName,\n          currency: s.currency,\n          billTo: s.address || \"\",\n          shipTo: s.address || \"\",\n          despatchMode: s.despatchMode || \"\",\n          paymentTerms: s.paymentTerms || \"\"\n        },\n        showSupplierOverlay: false\n      }));\n    };\n\n    this.showSupplierOverlay = () => this.setState({\n      showSupplierOverlay: true,\n      supplierOverlaySearch: \"\"\n    });\n\n    this.hideSupplierOverlay = () => this.setState({\n      showSupplierOverlay: false,\n      supplierOverlaySearch: \"\"\n    });\n\n    this.showProductOverlay = () => this.setState({\n      showProductOverlay: true,\n      productOverlaySearch: \"\",\n      selectedProductIds: []\n    });\n\n    this.hideProductOverlay = () => this.setState({\n      showProductOverlay: false,\n      productOverlaySearch: \"\",\n      selectedProductIds: []\n    });\n\n    this.toggleProductSelection = (productId, checked) => {\n      this.setState(prev => ({\n        selectedProductIds: checked ? [...prev.selectedProductIds, productId] : prev.selectedProductIds.filter(id => id !== productId)\n      }));\n    };\n\n    this.addSelectedProductsToLineItems = () => {\n      const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\n      const newItems = selectedProducts.map(product => ({\n        itemCode: product.productId || \"\",\n        shortName: product.ptshortName || \"\",\n        itemDesc: product.ptdescription || \"\",\n        hsnCode: product.hsnCode || \"\",\n        uom: product.uom || \"\",\n        locator: product.store || \"\",\n        onHand: product.onHand || \"\",\n        shipQty: \"\",\n        unitPrice: \"\",\n        itemTotal: \"\",\n        taxGroupNames: [],\n        taxAmt: \"\",\n        months: \"\",\n        unitDayOrWk: \"\",\n        schedule: \"\"\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, ...newItems]\n        },\n        showProductOverlay: false,\n        selectedProductIds: []\n      }), this.recalculateBillTotals);\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }), () => {\n        if ([\"freightCharges\", \"freightPercent\", \"packingCharges\", \"conversionRate\", \"totalValue\"].includes(field)) {\n          this.recalculateBillTotals();\n        }\n      });\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const items = [...this.state.formData.lineItems];\n      items[idx] = { ...items[idx],\n        [field]: value\n      };\n      const qty = parseFloat(items[idx].shipQty || 0);\n      const unitPrice = parseFloat(items[idx].unitPrice || 0);\n      items[idx].itemTotal = (qty * unitPrice).toFixed(2);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: items\n        }\n      }), this.recalculateBillTotals);\n    };\n\n    this.recalculateBillTotals = () => {\n      const {\n        lineItems,\n        freightCharges,\n        freightPercent,\n        packingCharges,\n        conversionRate\n      } = this.state.formData;\n      let totalValue = 0;\n      (lineItems || []).forEach(item => {\n        totalValue += parseFloat(item.itemTotal || 0);\n      }); // Freight + packing\n\n      const freightTaxAmt = parseFloat(freightCharges || 0) * parseFloat(freightPercent || 0) / 100;\n      totalValue += parseFloat(freightCharges || 0) + parseFloat(packingCharges || 0) + freightTaxAmt;\n      let finalValue = totalValue;\n\n      if (conversionRate) {\n        finalValue = totalValue * parseFloat(conversionRate);\n      }\n\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          totalValue: finalValue ? finalValue.toFixed(2) : \"\",\n          freightTaxAmt: freightTaxAmt ? freightTaxAmt.toFixed(2) : \"0.00\"\n        }\n      }));\n    };\n\n    this.handleTabChange = i => this.setState({\n      activeTab: i\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        bills\n      } = this.state; // Ensure status becomes \"Awaiting Approval\" on save (as per rules)\n\n      const saveData = { ...formData,\n        status: \"Awaiting Approval\",\n        notes: this.state.notes,\n        updatedAt: serverTimestamp(),\n        createdAt: editingId ? formData.createdAt || serverTimestamp() : serverTimestamp()\n      };\n\n      try {\n        if (editingId) {\n          await updateDoc(doc(db, \"indirectBills\", editingId), saveData);\n        } else {\n          saveData.billNo = formData.billType === \"Standard\" ? `IB${1000 + bills.length}` : formData.billNo || `IB${1000 + bills.length}`;\n          await addDoc(collection(db, \"indirectBills\"), saveData);\n        } // refresh list\n\n\n        this.fetchBills();\n        this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyForm(),\n          notes: \"\"\n        });\n      } catch (err) {\n        console.error(\"Save error:\", err);\n        alert(\"Error saving: \" + err.message);\n      }\n    };\n\n    this.getStatusBadge = status => {\n      // rules provided by user:\n      // awaiting for approval: warning, approved: success, rejected: success (user requested)\n      let cls = \"badge-secondary\";\n      if (!status) status = \"Entered\";\n      if (status === \"Awaiting Approval\" || status === \"Entered\") cls = \"badge-warning\";else if (status === \"Approved\") cls = \"badge-success\";else if (status === \"Rejected\") cls = \"badge-success\"; // per user's rule\n      else if (status === \"Partial\") cls = \"badge-purple\";else if (status === \"Completed\") cls = \"badge-info\";\n      return /*#__PURE__*/React.createElement(\"label\", {\n        className: `badge ${cls}`,\n        style: {\n          fontSize: '14px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 12\n        }\n      }, status);\n    };\n\n    this.renderBillingDetailsTab = () => {\n      const f = this.state.formData;\n      const items = f.lineItems || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }\n      }, \"Bill Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control\",\n        value: f.billType,\n        onChange: e => this.handleInputChange(\"billType\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }\n      }, \"Standard (Auto)\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 15\n        }\n      }, \"Manual (Typing)\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }\n      }, \"Bill No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.billNo,\n        onChange: e => this.handleInputChange(\"billNo\", e.target.value),\n        readOnly: f.billType === \"Standard\",\n        placeholder: f.billType === \"Standard\" ? \"Auto\" : \"Enter Bill No\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }\n      }, \"Bill Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.billDate,\n        onChange: e => this.handleInputChange(\"billDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }\n      }, this.getStatusBadge(f.status))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }\n      }, \"Ref No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.refNo,\n        onChange: e => this.handleInputChange(\"refNo\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }\n      }, \"Supplier\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        placeholder: \"Select Supplier\",\n        value: f.supplier,\n        readOnly: true,\n        onClick: this.showSupplierOverlay,\n        style: {\n          cursor: \"pointer\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.conversionRate,\n        onChange: e => this.handleInputChange(\"conversionRate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }\n      }, \"Stock Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control\",\n        value: f.stockType,\n        onChange: e => this.handleInputChange(\"stockType\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Select\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 15\n        }\n      }, \"Select\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Returnable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 15\n        }\n      }, \"Returnable\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Non-Returnable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }\n      }, \"Non-Returnable\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }\n      }, \"Return Days\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.returnDays,\n        onChange: e => this.handleInputChange(\"returnDays\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }\n      }, \"Total Value\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.totalValue,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mt-3 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }\n      }, \"Line Items\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm\",\n        onClick: this.showProductOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }\n      }, \"+ Add Items\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"thead-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 15\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 15\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }\n      }, \"HSN/SAC\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 15\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }\n      }, \"Locator\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 15\n        }\n      }, \"On Hand\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 15\n        }\n      }, \"Ship Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 15\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }\n      }, \"Item Total\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }\n      }, items.map((it, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 17\n        }\n      }, it.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 17\n        }\n      }, it.itemDesc), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 17\n        }\n      }, it.hsnCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 17\n        }\n      }, it.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }\n      }, it.locator), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 17\n        }\n      }, it.onHand), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.shipQty,\n        onChange: e => this.handleLineItemChange(i, \"shipQty\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.unitPrice,\n        onChange: e => this.handleLineItemChange(i, \"unitPrice\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 17\n        }\n      }, it.itemTotal))), items.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 14,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 17\n        }\n      }, \"No items\"))))));\n    };\n\n    this.renderPortTab = () => {\n      const f = this.state.formData;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control\",\n        value: f.billTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 13\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control\",\n        value: f.shipTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }\n      }, \"Place Of Delivery\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.placeOfDelivery,\n        onChange: e => this.handleInputChange(\"placeOfDelivery\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.despatchMode,\n        onChange: e => this.handleInputChange(\"despatchMode\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.paymentTerms,\n        onChange: e => this.handleInputChange(\"paymentTerms\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }\n      }, \"Freight Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.freightCharges,\n        onChange: e => this.handleInputChange(\"freightCharges\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }\n      }, \"Freight %\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.freightPercent,\n        onChange: e => this.handleInputChange(\"freightPercent\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 13\n        }\n      }, \"Freight Tax Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.freightTaxAmt,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }\n      }, \"Packing Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.packingCharges,\n        onChange: e => this.handleInputChange(\"packingCharges\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: 2,\n      value: this.state.notes,\n      onChange: e => this.setState({\n        notes: e.target.value\n      }),\n      style: {\n        resize: \"vertical\",\n        minHeight: \"40px\",\n        maxHeight: \"120px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }\n    })));\n\n    this.renderTabs = () => {\n      const tabs = [\"Billing Details\", \"Port & Terms\", \"Notes\"];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 7\n        }\n      }, tabs.map((t, i) => /*#__PURE__*/React.createElement(\"li\", {\n        key: i,\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link ${this.state.activeTab === i ? \"active\" : \"\"}`,\n        onClick: () => this.handleTabChange(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }\n      }, t))));\n    };\n\n    this.renderSupplierOverlay = () => {\n      const {\n        suppliers,\n        supplierOverlaySearch\n      } = this.state;\n      const filtered = suppliers.filter(s => (s.spName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) || (s.spCode || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) || (s.spshortName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 11\n        }\n      }, \"Select Supplier\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code, name, or short name\",\n        value: supplierOverlaySearch,\n        onChange: e => this.setState({\n          supplierOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 19\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 19\n        }\n      }, \"Short Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 15\n        }\n      }, filtered.map((s, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: s.id || i,\n        onClick: () => this.selectSupplier(s),\n        style: {\n          cursor: \"pointer\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 21\n        }\n      }, s.spCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 21\n        }\n      }, s.spName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 21\n        }\n      }, s.spshortName))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 3,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 21\n        }\n      }, \"No suppliers found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideSupplierOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderProductOverlay = () => {\n      const {\n        products,\n        productOverlaySearch,\n        selectedProductIds\n      } = this.state;\n      const filtered = products.filter(p => (p.productId || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptshortName || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptdescription || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }\n      }, \"Select Products\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code, name, or desc...\",\n        value: productOverlaySearch,\n        onChange: e => this.setState({\n          productOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 19\n        }\n      }, \"Short Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 19\n        }\n      }, \"Desc\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 15\n        }\n      }, filtered.map((p, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: p.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selectedProductIds.includes(p.id),\n        onChange: e => this.toggleProductSelection(p.id, e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 21\n        }\n      }, p.productId), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 21\n        }\n      }, p.ptshortName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 21\n        }\n      }, p.ptdescription))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 4,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 21\n        }\n      }, \"No products found\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success btn-sm\",\n        onClick: this.addSelectedProductsToLineItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 13\n        }\n      }, \"Add Selected\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm\",\n        onClick: this.hideProductOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 13\n        }\n      }, \"Cancel\"))));\n    };\n\n    this.renderForm = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: '24px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 11\n        }\n      }, \"Indirect Billing\"), this.renderTabs(), this.state.activeTab === 0 && this.renderBillingDetailsTab(), this.state.activeTab === 1 && this.renderPortTab(), this.state.activeTab === 2 && this.renderNotesTab()), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary ml-2\",\n        type: \"button\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyForm(),\n          notes: \"\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 11\n        }\n      }, this.state.editingId ? \"Update & Send for Approval\" : \"Create & Send for Approval\"))));\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 644,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 11\n      }\n    }, \"Indirect Billing\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary mr-2\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 13\n      }\n    }, \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-outline-secondary\",\n      onClick: () => this.props.history && this.props.history.push('/indirect-billing-approvals'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 13\n      }\n    }, \"Go to Approvals\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 17\n      }\n    }, \"Bill No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 17\n      }\n    }, \"Supplier\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 658,\n        columnNumber: 17\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 17\n      }\n    }, \"Total Value\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 17\n      }\n    }, \"Status\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 13\n      }\n    }, this.state.bills.map((b, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-link\",\n      onClick: () => this.setState({\n        showForm: true,\n        editingId: b.id,\n        formData: { ...b\n        },\n        notes: b.notes || \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 21\n      }\n    }, b.billNo)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 682,\n        columnNumber: 19\n      }\n    }, b.billDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 19\n      }\n    }, b.supplier), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 684,\n        columnNumber: 19\n      }\n    }, b.currency), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 19\n      }\n    }, b.totalValue), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 686,\n        columnNumber: 19\n      }\n    }, this.getStatusBadge(b.status)))), this.state.bills.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 690,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 691,\n        columnNumber: 19\n      }\n    }, \"No records found\")))))));\n  }\n\n  getEmptyForm() {\n    return {\n      billType: \"Standard\",\n      billNo: \"\",\n      billDate: new Date().toISOString().split(\"T\")[0],\n      status: \"Entered\",\n      // initial status\n      refNo: \"\",\n      supplierId: \"\",\n      supplier: \"\",\n      currency: \"\",\n      conversionRate: \"\",\n      stockType: \"Select\",\n      returnDays: \"\",\n      totalValue: \"\",\n      billTo: \"\",\n      shipTo: \"\",\n      placeOfDelivery: \"\",\n      despatchMode: \"\",\n      paymentTerms: \"\",\n      freightCharges: \"\",\n      freightPercent: \"\",\n      freightTaxAmt: \"\",\n      packingCharges: \"\",\n      lineItems: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchSuppliers();\n    this.fetchProducts();\n    this.fetchBills();\n    this.fetchTaxGroups();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 5\n      }\n    }, this.state.showForm ? this.renderForm() : this.renderTable(), this.state.showSupplierOverlay && this.renderSupplierOverlay(), this.state.showProductOverlay && this.renderProductOverlay());\n  }\n\n}\n\nexport default IndirectBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/invoice/idbill/IndirectBilling.js"],"names":["React","Component","db","collection","getDocs","addDoc","updateDoc","doc","serverTimestamp","IndirectBilling","state","suppliers","products","bills","taxGroups","showForm","editingId","activeTab","showSupplierOverlay","supplierOverlaySearch","showProductOverlay","productOverlaySearch","selectedProductIds","formData","getEmptyForm","notes","fetchSuppliers","snap","data","docs","map","d","id","setState","fetchProducts","fetchBills","reverse","fetchTaxGroups","selectSupplier","s","prev","supplierId","supplier","spName","currency","billTo","address","shipTo","despatchMode","paymentTerms","hideSupplierOverlay","hideProductOverlay","toggleProductSelection","productId","checked","filter","addSelectedProductsToLineItems","selectedProducts","p","includes","newItems","product","itemCode","shortName","ptshortName","itemDesc","ptdescription","hsnCode","uom","locator","store","onHand","shipQty","unitPrice","itemTotal","taxGroupNames","taxAmt","months","unitDayOrWk","schedule","lineItems","recalculateBillTotals","handleInputChange","field","value","handleLineItemChange","idx","items","qty","parseFloat","toFixed","freightCharges","freightPercent","packingCharges","conversionRate","totalValue","forEach","item","freightTaxAmt","finalValue","handleTabChange","i","handleSubmit","e","preventDefault","saveData","status","updatedAt","createdAt","billNo","billType","length","err","console","error","alert","message","getStatusBadge","cls","fontSize","renderBillingDetailsTab","f","target","billDate","refNo","cursor","stockType","returnDays","it","renderPortTab","placeOfDelivery","renderNotesTab","resize","minHeight","maxHeight","renderTabs","tabs","t","renderSupplierOverlay","filtered","toLowerCase","spCode","spshortName","overflowY","renderProductOverlay","renderForm","flex","padding","renderTable","props","history","push","b","Date","toISOString","split","componentDidMount","render"],"mappings":"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","sourcesContent":["// IndirectBilling.js\r\nimport React, { Component } from \"react\";\r\nimport { db } from \"../../../../../firebase\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  doc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\n\r\nclass IndirectBilling extends Component {\r\n  state = {\r\n    suppliers: [],\r\n    products: [],\r\n    bills: [],\r\n    taxGroups: [],\r\n    showForm: false,\r\n    editingId: null,\r\n    activeTab: 0,\r\n    showSupplierOverlay: false,\r\n    supplierOverlaySearch: \"\",\r\n    showProductOverlay: false,\r\n    productOverlaySearch: \"\",\r\n    selectedProductIds: [],\r\n    formData: this.getEmptyForm(),\r\n    notes: \"\",\r\n  };\r\n\r\n  getEmptyForm() {\r\n    return {\r\n      billType: \"Standard\",\r\n      billNo: \"\",\r\n      billDate: new Date().toISOString().split(\"T\")[0],\r\n      status: \"Entered\", // initial status\r\n      refNo: \"\",\r\n      supplierId: \"\",\r\n      supplier: \"\",\r\n      currency: \"\",\r\n      conversionRate: \"\",\r\n      stockType: \"Select\",\r\n      returnDays: \"\",\r\n      totalValue: \"\",\r\n      billTo: \"\",\r\n      shipTo: \"\",\r\n      placeOfDelivery: \"\",\r\n      despatchMode: \"\",\r\n      paymentTerms: \"\",\r\n      freightCharges: \"\",\r\n      freightPercent: \"\",\r\n      freightTaxAmt: \"\",\r\n      packingCharges: \"\",\r\n      lineItems: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchSuppliers();\r\n    this.fetchProducts();\r\n    this.fetchBills();\r\n    this.fetchTaxGroups();\r\n  }\r\n\r\n  fetchSuppliers = async () => {\r\n    const snap = await getDocs(collection(db, \"suppliers\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ suppliers: data });\r\n  };\r\n\r\n  fetchProducts = async () => {\r\n    const snap = await getDocs(collection(db, \"products\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ products: data });\r\n  };\r\n\r\n  fetchBills = async () => {\r\n    const snap = await getDocs(collection(db, \"indirectBills\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ bills: data.reverse() });\r\n  };\r\n\r\n  fetchTaxGroups = async () => {\r\n    const snap = await getDocs(collection(db, \"taxGroups\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ taxGroups: data });\r\n  };\r\n\r\n  selectSupplier = (s) => {\r\n    this.setState((prev) => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        supplierId: s.id,\r\n        supplier: s.spName,\r\n        currency: s.currency,\r\n        billTo: s.address || \"\",\r\n        shipTo: s.address || \"\",\r\n        despatchMode: s.despatchMode || \"\",\r\n        paymentTerms: s.paymentTerms || \"\",\r\n      },\r\n      showSupplierOverlay: false,\r\n    }));\r\n  };\r\n\r\n  showSupplierOverlay = () => this.setState({ showSupplierOverlay: true, supplierOverlaySearch: \"\" });\r\n  hideSupplierOverlay = () => this.setState({ showSupplierOverlay: false, supplierOverlaySearch: \"\" });\r\n\r\n  showProductOverlay = () => this.setState({ showProductOverlay: true, productOverlaySearch: \"\", selectedProductIds: [] });\r\n  hideProductOverlay = () => this.setState({ showProductOverlay: false, productOverlaySearch: \"\", selectedProductIds: [] });\r\n\r\n  toggleProductSelection = (productId, checked) => {\r\n    this.setState(prev => ({\r\n      selectedProductIds: checked\r\n        ? [...prev.selectedProductIds, productId]\r\n        : prev.selectedProductIds.filter(id => id !== productId)\r\n    }));\r\n  };\r\n\r\n  addSelectedProductsToLineItems = () => {\r\n    const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\r\n    const newItems = selectedProducts.map(product => ({\r\n        itemCode: product.productId || \"\",\r\n        shortName: product.ptshortName || \"\",\r\n        itemDesc: product.ptdescription || \"\",\r\n        hsnCode: product.hsnCode || \"\",\r\n        uom: product.uom || \"\",\r\n        locator: product.store || \"\",\r\n        onHand: product.onHand || \"\",\r\n        shipQty: \"\",\r\n        unitPrice: \"\",\r\n        itemTotal: \"\",\r\n        taxGroupNames: [],   \r\n        taxAmt: \"\",          \r\n        months: \"\",\r\n        unitDayOrWk: \"\",\r\n        schedule: \"\",\r\n        }));\r\n\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: [...prev.formData.lineItems, ...newItems]\r\n      },\r\n      showProductOverlay: false,\r\n      selectedProductIds: []\r\n    }), this.recalculateBillTotals);\r\n  };\r\n\r\n  handleInputChange = (field, value) => {\r\n    this.setState((prev) => ({\r\n      formData: { ...prev.formData, [field]: value },\r\n    }), () => {\r\n      if ([\r\n        \"freightCharges\", \"freightPercent\", \"packingCharges\", \"conversionRate\", \"totalValue\"\r\n      ].includes(field)) {\r\n        this.recalculateBillTotals();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    const items = [...this.state.formData.lineItems];\r\n    items[idx] = { ...items[idx], [field]: value };\r\n\r\n    const qty = parseFloat(items[idx].shipQty || 0);\r\n    const unitPrice = parseFloat(items[idx].unitPrice || 0);\r\n    items[idx].itemTotal = (qty * unitPrice).toFixed(2);\r\n\r\n    this.setState((prev) => ({\r\n      formData: { ...prev.formData, lineItems: items },\r\n    }), this.recalculateBillTotals);\r\n  };\r\n\r\n  recalculateBillTotals = () => {\r\n    const { lineItems, freightCharges, freightPercent, packingCharges, conversionRate } = this.state.formData;\r\n    let totalValue = 0;\r\n    (lineItems || []).forEach(item => {\r\n      totalValue += parseFloat(item.itemTotal || 0);\r\n    });\r\n\r\n    // Freight + packing\r\n    const freightTaxAmt = (parseFloat(freightCharges || 0) * parseFloat(freightPercent || 0)) / 100;\r\n    totalValue += parseFloat(freightCharges || 0) + parseFloat(packingCharges || 0) + freightTaxAmt;\r\n\r\n    let finalValue = totalValue;\r\n    if (conversionRate) {\r\n      finalValue = totalValue * parseFloat(conversionRate);\r\n    }\r\n\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        totalValue: finalValue ? finalValue.toFixed(2) : \"\",\r\n        freightTaxAmt: freightTaxAmt ? freightTaxAmt.toFixed(2) : \"0.00\"\r\n      }\r\n    }));\r\n  };\r\n\r\n  handleTabChange = (i) => this.setState({ activeTab: i });\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { editingId, formData, bills } = this.state;\r\n    // Ensure status becomes \"Awaiting Approval\" on save (as per rules)\r\n    const saveData = {\r\n      ...formData,\r\n      status: \"Awaiting Approval\",\r\n      notes: this.state.notes,\r\n      updatedAt: serverTimestamp(),\r\n      createdAt: editingId ? formData.createdAt || serverTimestamp() : serverTimestamp(),\r\n    };\r\n    try {\r\n      if (editingId) {\r\n        await updateDoc(doc(db, \"indirectBills\", editingId), saveData);\r\n      } else {\r\n        saveData.billNo = formData.billType === \"Standard\"\r\n          ? `IB${1000 + bills.length}`\r\n          : formData.billNo || `IB${1000 + bills.length}`;\r\n        await addDoc(collection(db, \"indirectBills\"), saveData);\r\n      }\r\n      // refresh list\r\n      this.fetchBills();\r\n      this.setState({ showForm: false, editingId: null, formData: this.getEmptyForm(), notes: \"\" });\r\n    } catch (err) {\r\n      console.error(\"Save error:\", err);\r\n      alert(\"Error saving: \" + err.message);\r\n    }\r\n  };\r\n\r\n  // render helpers\r\n  getStatusBadge = (status) => {\r\n    // rules provided by user:\r\n    // awaiting for approval: warning, approved: success, rejected: success (user requested)\r\n    let cls = \"badge-secondary\";\r\n    if (!status) status = \"Entered\";\r\n    if (status === \"Awaiting Approval\" || status === \"Entered\") cls = \"badge-warning\";\r\n    else if (status === \"Approved\") cls = \"badge-success\";\r\n    else if (status === \"Rejected\") cls = \"badge-success\"; // per user's rule\r\n    else if (status === \"Partial\") cls = \"badge-purple\";\r\n    else if (status === \"Completed\") cls = \"badge-info\";\r\n    return <label className={`badge ${cls}`} style={{ fontSize: '14px' }}>{status}</label>;\r\n  };\r\n\r\n  renderBillingDetailsTab = () => {\r\n    const f = this.state.formData;\r\n    const items = f.lineItems || [];\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Type</label>\r\n            <select\r\n              className=\"form-control\"\r\n              value={f.billType}\r\n              onChange={e => this.handleInputChange(\"billType\", e.target.value)}\r\n            >\r\n              <option value=\"Standard\">Standard (Auto)</option>\r\n              <option value=\"Manual\">Manual (Typing)</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill No</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={f.billNo}\r\n              onChange={e => this.handleInputChange(\"billNo\", e.target.value)}\r\n              readOnly={f.billType === \"Standard\"}\r\n              placeholder={f.billType === \"Standard\" ? \"Auto\" : \"Enter Bill No\"}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              value={f.billDate}\r\n              onChange={e => this.handleInputChange(\"billDate\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Status</label>\r\n            <div>{this.getStatusBadge(f.status)}</div>\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Ref No</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={f.refNo}\r\n              onChange={e => this.handleInputChange(\"refNo\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Supplier</label>\r\n            <input\r\n              className=\"form-control\"\r\n              placeholder=\"Select Supplier\"\r\n              value={f.supplier}\r\n              readOnly\r\n              onClick={this.showSupplierOverlay}\r\n              style={{ cursor: \"pointer\" }}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Currency</label>\r\n            <input className=\"form-control\" value={f.currency} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Conversion Rate</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.conversionRate} onChange={e => this.handleInputChange(\"conversionRate\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Stock Type</label>\r\n            <select className=\"form-control\" value={f.stockType} onChange={e => this.handleInputChange(\"stockType\", e.target.value)}>\r\n              <option value=\"Select\">Select</option>\r\n              <option value=\"Returnable\">Returnable</option>\r\n              <option value=\"Non-Returnable\">Non-Returnable</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Return Days</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.returnDays} onChange={e => this.handleInputChange(\"returnDays\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Total Value</label>\r\n            <input className=\"form-control\" value={f.totalValue} readOnly />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"d-flex justify-content-between align-items-center mt-3 mb-2\">\r\n            <h5>Line Items</h5>\r\n            <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary btn-sm\"\r\n                onClick={this.showProductOverlay}\r\n            >\r\n                + Add Items\r\n            </button>\r\n        </div>\r\n\r\n        <div className=\"table-responsive mt-3\">\r\n        <table className=\"table table-bordered\">\r\n          <thead className=\"thead-light\">\r\n            <tr>\r\n              <th>Item Code</th>\r\n              <th>Item Desc</th>\r\n              <th>HSN/SAC</th>\r\n              <th>UOM</th>\r\n              <th>Locator</th>\r\n              <th>On Hand</th>\r\n              <th>Ship Qty</th>\r\n              <th>Unit Price</th>\r\n              <th>Item Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map((it, i) => (\r\n              <tr key={i}>\r\n                <td>{it.itemCode}</td>\r\n                <td>{it.itemDesc}</td>\r\n                <td>{it.hsnCode}</td>\r\n                <td>{it.uom}</td>\r\n                <td>{it.locator}</td>\r\n                <td>{it.onHand}</td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={it.shipQty}\r\n                    onChange={e =>\r\n                      this.handleLineItemChange(i, \"shipQty\", e.target.value)\r\n                    }\r\n                  />\r\n                  </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={it.unitPrice}\r\n                    onChange={e =>\r\n                      this.handleLineItemChange(i, \"unitPrice\", e.target.value)\r\n                    }\r\n                  />\r\n                </td>\r\n                <td>{it.itemTotal}</td>\r\n              </tr>\r\n            ))}\r\n            {items.length === 0 && (\r\n              <tr>\r\n                <td colSpan={14} className=\"text-center\">No items</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderPortTab = () => {\r\n    const f = this.state.formData;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Bill To</label>\r\n            <textarea className=\"form-control\" value={f.billTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Ship To</label>\r\n            <textarea className=\"form-control\" value={f.shipTo} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Place Of Delivery</label>\r\n            <input className=\"form-control\" value={f.placeOfDelivery} onChange={e => this.handleInputChange(\"placeOfDelivery\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Despatch Mode</label>\r\n            <input className=\"form-control\" value={f.despatchMode} onChange={e => this.handleInputChange(\"despatchMode\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Payment Terms</label>\r\n            <input className=\"form-control\" value={f.paymentTerms} onChange={e => this.handleInputChange(\"paymentTerms\", e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Charges</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.freightCharges} onChange={e => this.handleInputChange(\"freightCharges\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight %</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.freightPercent} onChange={e => this.handleInputChange(\"freightPercent\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax Amount</label>\r\n            <input className=\"form-control\" value={f.freightTaxAmt} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Packing Charges</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.packingCharges} onChange={e => this.handleInputChange(\"packingCharges\", e.target.value)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderNotesTab = () => (\r\n    <div>\r\n      <div className=\"form-group\">\r\n        <label>Notes / Remarks</label>\r\n        <textarea\r\n          className=\"form-control form-control-sm\"\r\n          rows={2}\r\n          value={this.state.notes}\r\n          onChange={e => this.setState({ notes: e.target.value })}\r\n          style={{ resize: \"vertical\", minHeight: \"40px\", maxHeight: \"120px\" }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  renderTabs = () => {\r\n    const tabs = [\"Billing Details\",  \"Port & Terms\", \"Notes\"];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\">\r\n        {tabs.map((t, i) => (\r\n          <li key={i} className=\"nav-item\">\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link ${this.state.activeTab === i ? \"active\" : \"\"}`}\r\n              onClick={() => this.handleTabChange(i)}\r\n            >\r\n              {t}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  renderSupplierOverlay = () => {\r\n    const { suppliers, supplierOverlaySearch } = this.state;\r\n    const filtered = suppliers.filter(s =>\r\n      (s.spName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) ||\r\n      (s.spCode || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) ||\r\n      (s.spshortName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Supplier</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by code, name, or short name\"\r\n            value={supplierOverlaySearch}\r\n            onChange={e => this.setState({ supplierOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: \"auto\" }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Code</th>\r\n                  <th>Name</th>\r\n                  <th>Short Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((s, i) => (\r\n                  <tr key={s.id || i} onClick={() => this.selectSupplier(s)} style={{ cursor: \"pointer\" }}>\r\n                    <td>{s.spCode}</td>\r\n                    <td>{s.spName}</td>\r\n                    <td>{s.spshortName}</td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={3} className=\"text-center\">No suppliers found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button type=\"button\" className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideSupplierOverlay}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderProductOverlay = () => {\r\n    const { products, productOverlaySearch, selectedProductIds } = this.state;\r\n    const filtered = products.filter(p =>\r\n      (p.productId || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptshortName || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptdescription || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Products</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by code, name, or desc...\"\r\n            value={productOverlaySearch}\r\n            onChange={e => this.setState({ productOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: \"auto\" }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th></th>\r\n                  <th>Code</th>\r\n                  <th>Short Name</th>\r\n                  <th>Desc</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((p, i) => (\r\n                  <tr key={p.id || i}>\r\n                    <td>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedProductIds.includes(p.id)}\r\n                        onChange={e => this.toggleProductSelection(p.id, e.target.checked)}\r\n                      />\r\n                    </td>\r\n                    <td>{p.productId}</td>\r\n                    <td>{p.ptshortName}</td>\r\n                    <td>{p.ptdescription}</td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={4} className=\"text-center\">No products found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"d-flex justify-content-between mt-2\">\r\n            <button\r\n                type=\"button\"\r\n                className=\"btn btn-success btn-sm\"\r\n                onClick={this.addSelectedProductsToLineItems}\r\n            >\r\n                Add Selected\r\n            </button>\r\n            <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary btn-sm\"\r\n                onClick={this.hideProductOverlay}\r\n            >\r\n                Cancel\r\n            </button>\r\n            </div>\r\n            </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderForm = () => {\r\n  return (\r\n    <div className=\"card full-height\">\r\n      <form className=\"form-sample\" onSubmit={this.handleSubmit}>\r\n        <div style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>\r\n          <h4 className=\"mb-3\">Indirect Billing</h4>\r\n          {this.renderTabs()}\r\n          {this.state.activeTab === 0 && this.renderBillingDetailsTab()}\r\n          {this.state.activeTab === 1 && this.renderPortTab()}\r\n          {this.state.activeTab === 2 && this.renderNotesTab()}\r\n        </div>\r\n        <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n          <button\r\n            className=\"btn btn-secondary ml-2\"\r\n            type=\"button\"\r\n            onClick={() =>\r\n              this.setState({\r\n                showForm: false,\r\n                editingId: null,\r\n                formData: this.getEmptyForm(),\r\n                notes: \"\",\r\n              })\r\n            }\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button className=\"btn btn-success\" type=\"submit\">\r\n            {this.state.editingId ? \"Update & Send for Approval\" : \"Create & Send for Approval\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Indirect Billing</h4>\r\n          <div>\r\n            <button type=\"button\" className=\"btn btn-primary mr-2\" onClick={() => this.setState({ showForm: true })}>Create</button>\r\n            <button type=\"button\" className=\"btn btn-outline-secondary\" onClick={() => this.props.history && this.props.history.push('/indirect-billing-approvals')}>Go to Approvals</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered table-hover\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Bill No</th>\r\n                <th>Date</th>\r\n                <th>Supplier</th>\r\n                <th>Currency</th>\r\n                <th>Total Value</th>\r\n                <th>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.bills.map((b, i) => (\r\n                <tr key={i}>\r\n                  <td>\r\n                    <button\r\n                    type=\"button\"\r\n                      className=\"btn btn-link\"\r\n                      onClick={() =>\r\n                        this.setState({\r\n                          showForm: true,\r\n                          editingId: b.id,\r\n                          formData: { ...b },\r\n                          notes: b.notes || \"\",\r\n                        })\r\n                      }\r\n                    >\r\n                      {b.billNo}\r\n                    </button>\r\n                  </td>\r\n                  <td>{b.billDate}</td>\r\n                  <td>{b.supplier}</td>\r\n                  <td>{b.currency}</td>\r\n                  <td>{b.totalValue}</td>\r\n                  <td>{this.getStatusBadge(b.status)}</td>\r\n                </tr>\r\n              ))}\r\n              {this.state.bills.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"6\" className=\"text-center\">No records found</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n      {this.state.showSupplierOverlay && this.renderSupplierOverlay()}\r\n      {this.state.showProductOverlay && this.renderProductOverlay()}\r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default IndirectBilling;\r\n"]},"metadata":{},"sourceType":"module"}