{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\psp\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\psp\\\\pspform.js\";\nimport React, { Component } from 'react';\nimport { db } from '../../../firebase';\nimport { collection, addDoc, getDocs, deleteDoc, doc, setDoc } from 'firebase/firestore';\nimport '../../../assets/styles/components/_overlay.scss'; // PSC (Problem Solving Card) form page - replaces customer form\n\nclass PSCPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      pscs: [],\n      showForm: false,\n      showPreview: false,\n      previewTab: 'showAll',\n      overlaySearch: '',\n      overlayType: '',\n      editingId: null,\n      activeTab: 'psc',\n      formData: this.getEmptyForm()\n    };\n\n    this.fetchPSCs = async () => {\n      const snap = await getDocs(collection(db, 'psc'));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        pscs: data\n      });\n    };\n\n    this.togglePreview = item => {\n      this.setState({\n        formData: { ...item\n        },\n        showPreview: true,\n        showForm: false,\n        previewTab: 'showAll'\n      });\n    };\n\n    this.toggleForm = (edit = null) => {\n      if (edit) {\n        this.setState({\n          showForm: true,\n          editingId: edit.id,\n          activeTab: 'psc',\n          formData: { ...edit\n          },\n          showPreview: false\n        });\n      } else {\n        // generate a problem number\n        const num = `PSC-${101 + this.state.pscs.length}`;\n        this.setState({\n          showForm: true,\n          editingId: null,\n          activeTab: 'psc',\n          showPreview: false,\n          formData: { ...this.getEmptyForm(),\n            problemNumber: num\n          }\n        });\n      }\n    };\n\n    this.handleChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }));\n    };\n\n    this.handleFileChange = e => {\n      const file = e.target.files[0];\n      if (!file) return;\n      const reader = new FileReader();\n\n      reader.onload = ev => {\n        this.setState(prev => ({\n          formData: { ...prev.formData,\n            problemImage: ev.target.result\n          }\n        }));\n      };\n\n      reader.readAsDataURL(file);\n    };\n\n    this.handleCheckbox = fieldPath => {\n      this.setState(prev => {\n        const fd = { ...prev.formData\n        }; // support nested flags\n\n        if (fieldPath.indexOf('.') > -1) {\n          const [top, sub] = fieldPath.split('.');\n          fd[top] = { ...fd[top],\n            [sub]: !fd[top][sub]\n          };\n        } else {\n          fd[fieldPath] = !fd[fieldPath];\n        }\n\n        return {\n          formData: fd\n        };\n      });\n    };\n\n    this.addCorrectiveRow = () => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          correctiveActions: [...(prev.formData.correctiveActions || []), {\n            initialContainmentAction: '',\n            assignTo: 'tl',\n            targetDate: '',\n            type: ''\n          }]\n        }\n      }));\n    };\n\n    this.updateCorrectiveRow = (idx, field, value) => {\n      this.setState(prev => {\n        const rows = [...(prev.formData.correctiveActions || [])];\n        rows[idx] = { ...rows[idx],\n          [field]: value\n        }; // compute type based on targetDate compared to form date\n\n        if (field === 'targetDate') {\n          const formDate = new Date(prev.formData.date);\n          const target = new Date(value);\n          const diff = Math.ceil((target - formDate) / (1000 * 60 * 60 * 24));\n          rows[idx].type = diff > 7 ? 'Long Corrective Action' : 'Short Corrective Action';\n        }\n\n        return {\n          formData: { ...prev.formData,\n            correctiveActions: rows\n          }\n        };\n      });\n    };\n\n    this.removeCorrectiveRow = idx => {\n      this.setState(prev => {\n        const rows = [...(prev.formData.correctiveActions || [])];\n        rows.splice(idx, 1);\n        return {\n          formData: { ...prev.formData,\n            correctiveActions: rows\n          }\n        };\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData\n      } = this.state;\n      if (!formData.problemNumber || !formData.initiatorName) return alert('Problem Number and Initiator Name required');\n\n      if (editingId) {\n        await setDoc(doc(db, 'psc', editingId), formData);\n      } else {\n        await addDoc(collection(db, 'psc'), formData);\n      }\n\n      this.setState({\n        showForm: false,\n        showPreview: false,\n        editingId: null\n      });\n      this.fetchPSCs();\n    };\n\n    this.handleDelete = async id => {\n      if (!window.confirm('Delete this PSC?')) return;\n      await deleteDoc(doc(db, 'psc', id));\n      this.fetchPSCs();\n    };\n\n    this.renderForm = () => {\n      const {\n        formData,\n        activeTab\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        style: {\n          height: '100vh'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: '24px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, \"PSC - Problem Solving Card\"), /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        autoComplete: \"off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }\n      }, \"Problem Number\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.problemNumber,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }\n      }, \"Initiator Name\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.initiatorName,\n        onChange: e => this.handleChange('initiatorName', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 17\n        }\n      }, \"Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        type: \"date\",\n        value: formData.date,\n        onChange: e => this.handleChange('date', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 17\n        }\n      }, \"Shift\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.shift,\n        onChange: e => this.handleChange('shift', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }\n      }, ['A', 'B', 'C'].map(s => /*#__PURE__*/React.createElement(\"option\", {\n        key: s,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 45\n        }\n      }, s)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, \"Value Stream Line\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.valueStreamLine,\n        onChange: e => this.handleChange('valueStreamLine', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }\n      }, ['VL 1', 'VL 2', 'VL 3'].map(v => /*#__PURE__*/React.createElement(\"option\", {\n        key: v,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 54\n        }\n      }, v)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 17\n        }\n      }, \"Ticket Stage\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.ticketStage,\n        onChange: e => this.handleChange('ticketStage', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }, ['plan', 'do', 'check', 'act'].map(t => /*#__PURE__*/React.createElement(\"option\", {\n        key: t,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 60\n        }\n      }, t))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }\n      }, \"Short Description\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.shortDescription,\n        onChange: e => this.handleChange('shortDescription', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 17\n        }\n      }, \"Qty Affected\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.qtyAffected,\n        onChange: e => this.handleChange('qtyAffected', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-8\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, \"Problem Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 4,\n        value: formData.problemDescription,\n        onChange: e => this.handleChange('problemDescription', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 17\n        }\n      }, \"Problem Image\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        className: \"form-control form-control-sm\",\n        onChange: this.handleFileChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 17\n        }\n      }), formData.problemImage && /*#__PURE__*/React.createElement(\"img\", {\n        src: formData.problemImage,\n        alt: \"problem\",\n        style: {\n          maxWidth: '100%',\n          marginTop: 8\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 43\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 52\n        }\n      }, \"Part Affected\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.partAffected,\n        onChange: e => this.handleChange('partAffected', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 80\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 52\n        }\n      }, \"Supplier\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.supplier,\n        onChange: e => this.handleChange('supplier', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 75\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 52\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.status,\n        onChange: e => this.handleChange('status', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 73\n        }\n      }))), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mt-3\",\n        role: \"tablist\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link ${activeTab === 'psc' ? 'active' : ''}`,\n        onClick: () => this.setState({\n          activeTab: 'psc'\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 40\n        }\n      }, \"PSC\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link ${activeTab === 'corrective' ? 'active' : ''}`,\n        onClick: () => this.setState({\n          activeTab: 'corrective'\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 40\n        }\n      }, \"Corrective Actions\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link ${activeTab === 'root' ? 'active' : ''}`,\n        onClick: () => this.setState({\n          activeTab: 'root'\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 40\n        }\n      }, \"Root Cause\"))), activeTab === 'psc' && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 17\n        }\n      }, \"Effectiveness\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 56\n        }\n      }, \"Effectiveness Checked\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.effectivenessChecked,\n        onChange: e => this.handleChange('effectivenessChecked', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 92\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 56\n        }\n      }, \"Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control form-control-sm\",\n        value: formData.effectivenessDate,\n        onChange: e => this.handleChange('effectivenessDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 75\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 56\n        }\n      }, \"Shift\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.effectivenessShift,\n        onChange: e => this.handleChange('effectivenessShift', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 76\n        }\n      }, ['A', 'B', 'C'].map(s => /*#__PURE__*/React.createElement(\"option\", {\n        key: s,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 256\n        }\n      }, s)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4 d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check mr-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: formData.escalationLevel2,\n        onChange: () => this.handleCheckbox('escalationLevel2'),\n        id: \"esc2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 54\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"esc2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 211\n        }\n      }, \"Escalation Level 2\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check mr-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: formData.escalationLevel3,\n        onChange: () => this.handleCheckbox('escalationLevel3'),\n        id: \"esc3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 54\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"esc3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 211\n        }\n      }, \"Escalation Level 3\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: formData.escalationLevel4,\n        onChange: () => this.handleCheckbox('escalationLevel4'),\n        id: \"esc4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 49\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: \"esc4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 206\n        }\n      }, \"Escalation Level 4\"))))), activeTab === 'corrective' && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 17\n        }\n      }, \"Corrective Actions\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-sm btn-primary\",\n        onClick: this.addCorrectiveRow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 19\n        }\n      }, \"+ Add Action\")), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 23\n        }\n      }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 23\n        }\n      }, \"Initial Containment Action\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 23\n        }\n      }, \"Assign To\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 23\n        }\n      }, \"Target Date\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 23\n        }\n      }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 23\n        }\n      }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 19\n        }\n      }, (formData.correctiveActions || []).map((r, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 25\n        }\n      }, i + 1), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        value: r.initialContainmentAction,\n        onChange: e => this.updateCorrectiveRow(i, 'initialContainmentAction', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: r.assignTo,\n        onChange: e => this.updateCorrectiveRow(i, 'assignTo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 27\n        }\n      }, ['tl', 'vsl', 'plant head'].map(a => /*#__PURE__*/React.createElement(\"option\", {\n        key: a,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 67\n        }\n      }, a)))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control form-control-sm\",\n        value: r.targetDate || '',\n        onChange: e => this.updateCorrectiveRow(i, 'targetDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 25\n        }\n      }, r.type || ''), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-sm btn-danger\",\n        onClick: () => this.removeCorrectiveRow(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 29\n        }\n      }, \"Delete\")))), (!formData.correctiveActions || formData.correctiveActions.length === 0) && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 98\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 6,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 102\n        }\n      }, \"No corrective actions\"))))), activeTab === 'root' && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 17\n        }\n      }, \"Root Cause Analysis\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 57\n        }\n      }, \"Symptom\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.symptom,\n        onChange: e => this.handleChange('symptom', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 79\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 56\n        }\n      }, \"Problem in Method\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 3,\n        value: formData.problem_method,\n        onChange: e => this.handleChange('problem_method', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 88\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 56\n        }\n      }, \"Problem in Material\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 3,\n        value: formData.problem_material,\n        onChange: e => this.handleChange('problem_material', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 90\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 56\n        }\n      }, \"Problem in Environment\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 3,\n        value: formData.problem_environment,\n        onChange: e => this.handleChange('problem_environment', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 93\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 56\n        }\n      }, \"Problem in Man\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 3,\n        value: formData.problem_man,\n        onChange: e => this.handleChange('problem_man', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 85\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 57\n        }\n      }, \"Problem in Machine\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 3,\n        value: formData.problem_machine,\n        onChange: e => this.handleChange('problem_machine', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 90\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 57\n        }\n      }, \"Actual Cause of Problem\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: 4,\n        value: formData.actualCause,\n        onChange: e => this.handleChange('actualCause', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 95\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-12 d-flex flex-wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 19\n        }\n      }, [['flags.safetyIssue', 'Safety issue / Near Miss(es)'], ['flags.fiveSPoint', '5S point'], ['flags.machineProblem', 'Machine problem'], ['flags.qualityConcern', 'Quality concern'], ['flags.potentialMachineIssue', 'Potential machine issue'], ['flags.potentialQualityIssue', 'Potential quality issue'], ['flags.improvementIdea', 'Improvement idea']].map(([k, label]) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-check mr-3\",\n        key: k,\n        style: {\n          minWidth: 200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: this.getFlagValue(k),\n        onChange: () => this.handleCheckbox(k),\n        id: k,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        htmlFor: k,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 25\n        }\n      }, label)))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success btn-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 15\n        }\n      }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm\",\n        onClick: () => this.setState({\n          showForm: false\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 15\n        }\n      }, \"Cancel\")))));\n    };\n\n    this.getFlagValue = path => {\n      const {\n        formData\n      } = this.state;\n      const [top, sub] = path.split('.');\n      return formData[top] && formData[top][sub] ? formData[top][sub] : false;\n    };\n\n    this.renderPreview = () => {\n      const {\n        formData,\n        previewTab\n      } = this.state;\n\n      const renderRow = (label, value) => /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          width: '30%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 38\n        }\n      }, label)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 9\n        }\n      }, value || '-'));\n\n      const renderPSC = () => /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 56\n        }\n      }, renderRow('Problem Number', formData.problemNumber), renderRow('Initiator', formData.initiatorName), renderRow('Date', formData.date), renderRow('Shift', formData.shift), renderRow('Value Stream Line', formData.valueStreamLine), renderRow('Ticket Stage', formData.ticketStage), renderRow('Short Description', formData.shortDescription), renderRow('Problem Description', formData.problemDescription), renderRow('Qty Affected', formData.qtyAffected), renderRow('Part Affected', formData.partAffected), renderRow('Supplier', formData.supplier), renderRow('Status', formData.status)));\n\n      const renderCorrective = () => /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 56\n        }\n      }, (formData.correctiveActions || []).map((r, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          width: '20%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 23\n        }\n      }, \"Action \", i + 1), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 71\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 75\n        }\n      }, \"Action:\"), \" \", r.initialContainmentAction || '-', /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 125\n        }\n      }), /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 130\n        }\n      }, \"Assign To:\"), \" \", r.assignTo, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 160\n        }\n      }), /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 165\n        }\n      }, \"Target:\"), \" \", r.targetDate, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 194\n        }\n      }), /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 199\n        }\n      }, \"Type:\"), \" \", r.type))), (!formData.correctiveActions || formData.correctiveActions.length === 0) && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 86\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 2,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 90\n        }\n      }, \"No corrective actions\"))));\n\n      const renderRoot = () => /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 56\n        }\n      }, renderRow('Symptom', formData.symptom), renderRow('Problem in Method', formData.problem_method), renderRow('Problem in Material', formData.problem_material), renderRow('Problem in Environment', formData.problem_environment), renderRow('Problem in Man', formData.problem_man), renderRow('Problem in Machine', formData.problem_machine), renderRow('Actual Cause', formData.actualCause), renderRow('Flags', Object.entries(formData.flags || {}).filter(([k, v]) => v).map(([k]) => k).join(', '))));\n\n      const tabContent = () => {\n        switch (previewTab) {\n          case 'psc':\n            return renderPSC();\n\n          case 'corrective':\n            return renderCorrective();\n\n          case 'root':\n            return renderRoot();\n\n          case 'showAll':\n          default:\n            return /*#__PURE__*/React.createElement(React.Fragment, null, renderPSC(), /*#__PURE__*/React.createElement(\"hr\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 33\n              }\n            }), renderCorrective(), /*#__PURE__*/React.createElement(\"hr\", {\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 58\n              }\n            }), renderRoot());\n        }\n      };\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card p-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }\n      }, \"PSC Preview\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-primary btn-sm mr-2\",\n        onClick: () => this.toggleForm(formData),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }\n      }, \"View / Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        onClick: () => this.setState({\n          showPreview: false\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }\n      }, \"Back to List\"))), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm mb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 63\n        }\n      }, renderRow('Problem Number', formData.problemNumber), renderRow('Initiator', formData.initiatorName), renderRow('Short Description', formData.shortDescription), renderRow('Status', formData.status))), /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 9\n        }\n      }, ['showAll', 'psc', 'corrective', 'root'].map(key => /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: `nav-link ${this.state.previewTab === key ? 'active' : ''}`,\n        onClick: () => this.setState({\n          previewTab: key\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 15\n        }\n      }, key === 'showAll' ? 'Show All' : key.charAt(0).toUpperCase() + key.slice(1))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tab-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 9\n        }\n      }, tabContent()));\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 11\n      }\n    }, \"PSC List\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm mr-2\",\n      onClick: () => this.toggleForm(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 13\n      }\n    }, \"+ Add PSC\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"custom-table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 17\n      }\n    }, \"Problem No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 17\n      }\n    }, \"Initiator\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 17\n      }\n    }, \"Shift\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 17\n      }\n    }, \"Value Stream\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 17\n      }\n    }, \"Stage\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 17\n      }\n    }, \"Short Description\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 17\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 17\n      }\n    }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 13\n      }\n    }, this.state.pscs.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link p-0\",\n      onClick: () => this.togglePreview(c),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 23\n      }\n    }, c.problemNumber)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 19\n      }\n    }, c.initiatorName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 19\n      }\n    }, c.date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 19\n      }\n    }, c.shift), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 19\n      }\n    }, c.valueStreamLine), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 19\n      }\n    }, c.ticketStage), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 19\n      }\n    }, c.shortDescription), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 480,\n        columnNumber: 19\n      }\n    }, c.status), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-outline-primary mr-2\",\n      onClick: () => this.toggleForm(c),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 21\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-outline-danger\",\n      onClick: () => this.handleDelete(c.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 21\n      }\n    }, \"Delete\")))), this.state.pscs.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 48\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"9\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 52\n      }\n    }, \"No records found\")))))));\n\n    this.render = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container-fluid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 7\n        }\n      }, this.state.showForm ? this.renderForm() : this.state.showPreview ? this.renderPreview() : this.renderTable());\n    };\n  }\n\n  getEmptyForm() {\n    const today = new Date().toISOString().split('T')[0];\n    return {\n      problemNumber: '',\n      initiatorName: '',\n      date: today,\n      shift: 'A',\n      valueStreamLine: 'VL 1',\n      ticketStage: 'plan',\n      shortDescription: '',\n      problemDescription: '',\n      problemImage: '',\n      // base64 data url\n      qtyAffected: '',\n      partAffected: '',\n      supplier: '',\n      status: 'open',\n      // effectiveness section\n      effectivenessChecked: '',\n      effectivenessDate: '',\n      effectivenessShift: 'A',\n      escalationLevel2: false,\n      escalationLevel3: false,\n      escalationLevel4: false,\n      // corrective actions - array of rows\n      correctiveActions: [],\n      // root cause\n      symptom: '',\n      problem_method: '',\n      problem_material: '',\n      problem_environment: '',\n      problem_man: '',\n      problem_machine: '',\n      actualCause: '',\n      flags: {\n        safetyIssue: false,\n        fiveSPoint: false,\n        machineProblem: false,\n        qualityConcern: false,\n        potentialMachineIssue: false,\n        potentialQualityIssue: false,\n        improvementIdea: false\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.fetchPSCs();\n  }\n\n}\n\nexport default PSCPage;","map":{"version":3,"sources":["C:/Users/College/psp/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/psp/pspform.js"],"names":["React","Component","db","collection","addDoc","getDocs","deleteDoc","doc","setDoc","PSCPage","state","pscs","showForm","showPreview","previewTab","overlaySearch","overlayType","editingId","activeTab","formData","getEmptyForm","fetchPSCs","snap","data","docs","map","d","id","setState","togglePreview","item","toggleForm","edit","num","length","problemNumber","handleChange","field","value","prev","handleFileChange","e","file","target","files","reader","FileReader","onload","ev","problemImage","result","readAsDataURL","handleCheckbox","fieldPath","fd","indexOf","top","sub","split","addCorrectiveRow","correctiveActions","initialContainmentAction","assignTo","targetDate","type","updateCorrectiveRow","idx","rows","formDate","Date","date","diff","Math","ceil","removeCorrectiveRow","splice","handleSubmit","preventDefault","initiatorName","alert","handleDelete","window","confirm","renderForm","height","flex","overflowY","padding","shift","s","valueStreamLine","v","ticketStage","t","shortDescription","qtyAffected","problemDescription","maxWidth","marginTop","partAffected","supplier","status","effectivenessChecked","effectivenessDate","effectivenessShift","escalationLevel2","escalationLevel3","escalationLevel4","r","i","a","symptom","problem_method","problem_material","problem_environment","problem_man","problem_machine","actualCause","k","label","minWidth","getFlagValue","path","renderPreview","renderRow","width","renderPSC","renderCorrective","renderRoot","Object","entries","flags","filter","join","tabContent","key","charAt","toUpperCase","slice","renderTable","c","render","today","toISOString","safetyIssue","fiveSPoint","machineProblem","qualityConcern","potentialMachineIssue","potentialQualityIssue","improvementIdea","componentDidMount"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,EAAT,QAAmB,mBAAnB;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsCC,SAAtC,EAAiDC,GAAjD,EAAsDC,MAAtD,QAAoE,oBAApE;AACA,OAAO,iDAAP,C,CAEA;;AACA,MAAMC,OAAN,SAAsBR,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC9BS,KAD8B,GACtB;AACNC,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,QAAQ,EAAE,KAFJ;AAGNC,MAAAA,WAAW,EAAE,KAHP;AAINC,MAAAA,UAAU,EAAE,SAJN;AAKNC,MAAAA,aAAa,EAAE,EALT;AAMNC,MAAAA,WAAW,EAAE,EANP;AAONC,MAAAA,SAAS,EAAE,IAPL;AAQNC,MAAAA,SAAS,EAAE,KARL;AASNC,MAAAA,QAAQ,EAAE,KAAKC,YAAL;AATJ,KADsB;;AAAA,SAiE9BC,SAjE8B,GAiElB,YAAY;AACtB,YAAMC,IAAI,GAAG,MAAMjB,OAAO,CAACF,UAAU,CAACD,EAAD,EAAK,KAAL,CAAX,CAA1B;AACA,YAAMqB,IAAI,GAAGD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcC,CAAC,KAAK;AAAEC,QAAAA,EAAE,EAAED,CAAC,CAACC,EAAR;AAAY,WAAGD,CAAC,CAACH,IAAF;AAAf,OAAL,CAAf,CAAb;AACA,WAAKK,QAAL,CAAc;AAAEjB,QAAAA,IAAI,EAAEY;AAAR,OAAd;AACD,KArE6B;;AAAA,SAuE9BM,aAvE8B,GAuEbC,IAAD,IAAU;AACxB,WAAKF,QAAL,CAAc;AAAET,QAAAA,QAAQ,EAAE,EAAE,GAAGW;AAAL,SAAZ;AAAyBjB,QAAAA,WAAW,EAAE,IAAtC;AAA4CD,QAAAA,QAAQ,EAAE,KAAtD;AAA6DE,QAAAA,UAAU,EAAE;AAAzE,OAAd;AACD,KAzE6B;;AAAA,SA2E9BiB,UA3E8B,GA2EjB,CAACC,IAAI,GAAG,IAAR,KAAiB;AAC5B,UAAIA,IAAJ,EAAU;AACR,aAAKJ,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAE,IAAZ;AAAkBK,UAAAA,SAAS,EAAEe,IAAI,CAACL,EAAlC;AAAsCT,UAAAA,SAAS,EAAE,KAAjD;AAAwDC,UAAAA,QAAQ,EAAE,EAAE,GAAGa;AAAL,WAAlE;AAA+EnB,UAAAA,WAAW,EAAE;AAA5F,SAAd;AACD,OAFD,MAEO;AACL;AACA,cAAMoB,GAAG,GAAI,OAAM,MAAM,KAAKvB,KAAL,CAAWC,IAAX,CAAgBuB,MAAO,EAAhD;AACA,aAAKN,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAE,IAAZ;AAAkBK,UAAAA,SAAS,EAAE,IAA7B;AAAmCC,UAAAA,SAAS,EAAE,KAA9C;AAAqDL,UAAAA,WAAW,EAAE,KAAlE;AAAyEM,UAAAA,QAAQ,EAAE,EAAE,GAAG,KAAKC,YAAL,EAAL;AAA0Be,YAAAA,aAAa,EAAEF;AAAzC;AAAnF,SAAd;AACD;AACF,KAnF6B;;AAAA,SAqF9BG,YArF8B,GAqFf,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC/B,WAAKV,QAAL,CAAcW,IAAI,KAAK;AAAEpB,QAAAA,QAAQ,EAAE,EAAE,GAAGoB,IAAI,CAACpB,QAAV;AAAoB,WAACkB,KAAD,GAASC;AAA7B;AAAZ,OAAL,CAAlB;AACD,KAvF6B;;AAAA,SAyF9BE,gBAzF8B,GAyFVC,CAAD,IAAO;AACxB,YAAMC,IAAI,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;AACA,UAAI,CAACF,IAAL,EAAW;AACX,YAAMG,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,MAAAA,MAAM,CAACE,MAAP,GAAiBC,EAAD,IAAQ;AACtB,aAAKpB,QAAL,CAAcW,IAAI,KAAK;AAAEpB,UAAAA,QAAQ,EAAE,EAAE,GAAGoB,IAAI,CAACpB,QAAV;AAAoB8B,YAAAA,YAAY,EAAED,EAAE,CAACL,MAAH,CAAUO;AAA5C;AAAZ,SAAL,CAAlB;AACD,OAFD;;AAGAL,MAAAA,MAAM,CAACM,aAAP,CAAqBT,IAArB;AACD,KAjG6B;;AAAA,SAmG9BU,cAnG8B,GAmGZC,SAAD,IAAe;AAC9B,WAAKzB,QAAL,CAAcW,IAAI,IAAI;AACpB,cAAMe,EAAE,GAAG,EAAE,GAAGf,IAAI,CAACpB;AAAV,SAAX,CADoB,CAEpB;;AACA,YAAIkC,SAAS,CAACE,OAAV,CAAkB,GAAlB,IAAyB,CAAC,CAA9B,EAAiC;AAC/B,gBAAM,CAACC,GAAD,EAAMC,GAAN,IAAaJ,SAAS,CAACK,KAAV,CAAgB,GAAhB,CAAnB;AACAJ,UAAAA,EAAE,CAACE,GAAD,CAAF,GAAU,EAAE,GAAGF,EAAE,CAACE,GAAD,CAAP;AAAc,aAACC,GAAD,GAAO,CAACH,EAAE,CAACE,GAAD,CAAF,CAAQC,GAAR;AAAtB,WAAV;AACD,SAHD,MAGO;AACLH,UAAAA,EAAE,CAACD,SAAD,CAAF,GAAgB,CAACC,EAAE,CAACD,SAAD,CAAnB;AACD;;AACD,eAAO;AAAElC,UAAAA,QAAQ,EAAEmC;AAAZ,SAAP;AACD,OAVD;AAWD,KA/G6B;;AAAA,SAkH9BK,gBAlH8B,GAkHX,MAAM;AACvB,WAAK/B,QAAL,CAAcW,IAAI,KAAK;AAAEpB,QAAAA,QAAQ,EAAE,EAAE,GAAGoB,IAAI,CAACpB,QAAV;AAAoByC,UAAAA,iBAAiB,EAAE,CAAC,IAAIrB,IAAI,CAACpB,QAAL,CAAcyC,iBAAd,IAAmC,EAAvC,CAAD,EAA6C;AAAEC,YAAAA,wBAAwB,EAAE,EAA5B;AAAgCC,YAAAA,QAAQ,EAAE,IAA1C;AAAgDC,YAAAA,UAAU,EAAE,EAA5D;AAAgEC,YAAAA,IAAI,EAAE;AAAtE,WAA7C;AAAvC;AAAZ,OAAL,CAAlB;AACD,KApH6B;;AAAA,SAsH9BC,mBAtH8B,GAsHR,CAACC,GAAD,EAAM7B,KAAN,EAAaC,KAAb,KAAuB;AAC3C,WAAKV,QAAL,CAAcW,IAAI,IAAI;AACpB,cAAM4B,IAAI,GAAG,CAAC,IAAI5B,IAAI,CAACpB,QAAL,CAAcyC,iBAAd,IAAmC,EAAvC,CAAD,CAAb;AACAO,QAAAA,IAAI,CAACD,GAAD,CAAJ,GAAY,EAAE,GAAGC,IAAI,CAACD,GAAD,CAAT;AAAgB,WAAC7B,KAAD,GAASC;AAAzB,SAAZ,CAFoB,CAGpB;;AACA,YAAID,KAAK,KAAK,YAAd,EAA4B;AAC1B,gBAAM+B,QAAQ,GAAG,IAAIC,IAAJ,CAAS9B,IAAI,CAACpB,QAAL,CAAcmD,IAAvB,CAAjB;AACA,gBAAM3B,MAAM,GAAG,IAAI0B,IAAJ,CAAS/B,KAAT,CAAf;AACA,gBAAMiC,IAAI,GAAGC,IAAI,CAACC,IAAL,CAAU,CAAC9B,MAAM,GAAGyB,QAAV,KAAuB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAxC,CAAV,CAAb;AACAD,UAAAA,IAAI,CAACD,GAAD,CAAJ,CAAUF,IAAV,GAAiBO,IAAI,GAAG,CAAP,GAAW,wBAAX,GAAsC,yBAAvD;AACD;;AACD,eAAO;AAAEpD,UAAAA,QAAQ,EAAE,EAAE,GAAGoB,IAAI,CAACpB,QAAV;AAAoByC,YAAAA,iBAAiB,EAAEO;AAAvC;AAAZ,SAAP;AACD,OAXD;AAYD,KAnI6B;;AAAA,SAqI9BO,mBArI8B,GAqIPR,GAAD,IAAS;AAC7B,WAAKtC,QAAL,CAAcW,IAAI,IAAI;AACpB,cAAM4B,IAAI,GAAG,CAAC,IAAI5B,IAAI,CAACpB,QAAL,CAAcyC,iBAAd,IAAmC,EAAvC,CAAD,CAAb;AACAO,QAAAA,IAAI,CAACQ,MAAL,CAAYT,GAAZ,EAAiB,CAAjB;AACA,eAAO;AAAE/C,UAAAA,QAAQ,EAAE,EAAE,GAAGoB,IAAI,CAACpB,QAAV;AAAoByC,YAAAA,iBAAiB,EAAEO;AAAvC;AAAZ,SAAP;AACD,OAJD;AAKD,KA3I6B;;AAAA,SA6I9BS,YA7I8B,GA6If,MAAOnC,CAAP,IAAa;AAC1BA,MAAAA,CAAC,CAACoC,cAAF;AACA,YAAM;AAAE5D,QAAAA,SAAF;AAAaE,QAAAA;AAAb,UAA0B,KAAKT,KAArC;AACA,UAAI,CAACS,QAAQ,CAACgB,aAAV,IAA2B,CAAChB,QAAQ,CAAC2D,aAAzC,EAAwD,OAAOC,KAAK,CAAC,4CAAD,CAAZ;;AACxD,UAAI9D,SAAJ,EAAe;AACb,cAAMT,MAAM,CAACD,GAAG,CAACL,EAAD,EAAK,KAAL,EAAYe,SAAZ,CAAJ,EAA4BE,QAA5B,CAAZ;AACD,OAFD,MAEO;AACL,cAAMf,MAAM,CAACD,UAAU,CAACD,EAAD,EAAK,KAAL,CAAX,EAAwBiB,QAAxB,CAAZ;AACD;;AACD,WAAKS,QAAL,CAAc;AAAEhB,QAAAA,QAAQ,EAAE,KAAZ;AAAmBC,QAAAA,WAAW,EAAE,KAAhC;AAAuCI,QAAAA,SAAS,EAAE;AAAlD,OAAd;AACA,WAAKI,SAAL;AACD,KAxJ6B;;AAAA,SA0J9B2D,YA1J8B,GA0Jf,MAAOrD,EAAP,IAAc;AAC3B,UAAI,CAACsD,MAAM,CAACC,OAAP,CAAe,kBAAf,CAAL,EAAyC;AACzC,YAAM5E,SAAS,CAACC,GAAG,CAACL,EAAD,EAAK,KAAL,EAAYyB,EAAZ,CAAJ,CAAf;AACA,WAAKN,SAAL;AACD,KA9J6B;;AAAA,SAgK9B8D,UAhK8B,GAgKjB,MAAM;AACjB,YAAM;AAAEhE,QAAAA,QAAF;AAAYD,QAAAA;AAAZ,UAA0B,KAAKR,KAArC;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAkC,QAAA,KAAK,EAAE;AAAE0E,UAAAA,MAAM,EAAE;AAAV,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAE,CAAR;AAAWC,UAAAA,SAAS,EAAE,MAAtB;AAA8BC,UAAAA,OAAO,EAAE;AAAvC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADF,eAEE;AAAM,QAAA,SAAS,EAAC,aAAhB;AAA8B,QAAA,QAAQ,EAAE,KAAKX,YAA7C;AAA2D,QAAA,YAAY,EAAC,KAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEzD,QAAQ,CAACgB,aAAhE;AAA+E,QAAA,QAAQ,MAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEhB,QAAQ,CAAC2D,aAAhE;AAA+E,QAAA,QAAQ,EAAErC,CAAC,IAAI,KAAKL,YAAL,CAAkB,eAAlB,EAAmCK,CAAC,CAACE,MAAF,CAASL,KAA5C,CAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,eASE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,IAAI,EAAC,MAArD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAACmD,IAA5E;AAAkF,QAAA,QAAQ,EAAE7B,CAAC,IAAI,KAAKL,YAAL,CAAkB,MAAlB,EAA0BK,CAAC,CAACE,MAAF,CAASL,KAAnC,CAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CATF,eAaE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAQ,QAAA,SAAS,EAAC,8BAAlB;AAAiD,QAAA,KAAK,EAAEnB,QAAQ,CAACqE,KAAjE;AAAwE,QAAA,QAAQ,EAAE/C,CAAC,IAAI,KAAKL,YAAL,CAAkB,OAAlB,EAA2BK,CAAC,CAACE,MAAF,CAASL,KAApC,CAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgBb,GAAhB,CAAoBgE,CAAC,iBAAI;AAAQ,QAAA,GAAG,EAAEA,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiBA,CAAjB,CAAzB,CADH,CAFF,CAbF,eAmBE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,eAEE;AAAQ,QAAA,SAAS,EAAC,8BAAlB;AAAiD,QAAA,KAAK,EAAEtE,QAAQ,CAACuE,eAAjE;AAAkF,QAAA,QAAQ,EAAEjD,CAAC,IAAI,KAAKL,YAAL,CAAkB,iBAAlB,EAAqCK,CAAC,CAACE,MAAF,CAASL,KAA9C,CAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyBb,GAAzB,CAA6BkE,CAAC,iBAAI;AAAQ,QAAA,GAAG,EAAEA,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiBA,CAAjB,CAAlC,CADH,CAFF,CAnBF,eAyBE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAQ,QAAA,SAAS,EAAC,8BAAlB;AAAiD,QAAA,KAAK,EAAExE,QAAQ,CAACyE,WAAjE;AAA8E,QAAA,QAAQ,EAAEnD,CAAC,IAAI,KAAKL,YAAL,CAAkB,aAAlB,EAAiCK,CAAC,CAACE,MAAF,CAASL,KAA1C,CAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,MAAD,EAAS,IAAT,EAAe,OAAf,EAAwB,KAAxB,EAA+Bb,GAA/B,CAAmCoE,CAAC,iBAAI;AAAQ,QAAA,GAAG,EAAEA,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiBA,CAAjB,CAAxC,CADH,CAFF,CAzBF,CAFF,eAmCE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,eAEE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAE1E,QAAQ,CAAC2E,gBAAhE;AAAkF,QAAA,QAAQ,EAAErD,CAAC,IAAI,KAAKL,YAAL,CAAkB,kBAAlB,EAAsCK,CAAC,CAACE,MAAF,CAASL,KAA/C,CAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEnB,QAAQ,CAAC4E,WAAhE;AAA6E,QAAA,QAAQ,EAAEtD,CAAC,IAAI,KAAKL,YAAL,CAAkB,aAAlB,EAAiCK,CAAC,CAACE,MAAF,CAASL,KAA1C,CAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,CAnCF,eA8CE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,eAEE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAAC6E,kBAA5E;AAAgG,QAAA,QAAQ,EAAEvD,CAAC,IAAI,KAAKL,YAAL,CAAkB,oBAAlB,EAAwCK,CAAC,CAACE,MAAF,CAASL,KAAjD,CAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,MAAM,EAAC,SAA1B;AAAoC,QAAA,SAAS,EAAC,8BAA9C;AAA6E,QAAA,QAAQ,EAAE,KAAKE,gBAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGGrB,QAAQ,CAAC8B,YAAT,iBAAyB;AAAK,QAAA,GAAG,EAAE9B,QAAQ,CAAC8B,YAAnB;AAAiC,QAAA,GAAG,EAAC,SAArC;AAA+C,QAAA,KAAK,EAAE;AAAEgD,UAAAA,QAAQ,EAAE,MAAZ;AAAoBC,UAAAA,SAAS,EAAE;AAA/B,SAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAH5B,CALF,CA9CF,eA0DE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAArC,eAAiE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAE/E,QAAQ,CAACgF,YAAhE;AAA8E,QAAA,QAAQ,EAAE1D,CAAC,IAAI,KAAKL,YAAL,CAAkB,cAAlB,EAAkCK,CAAC,CAACE,MAAF,CAASL,KAA3C,CAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjE,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAArC,eAA4D;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEnB,QAAQ,CAACiF,QAAhE;AAA0E,QAAA,QAAQ,EAAE3D,CAAC,IAAI,KAAKL,YAAL,CAAkB,UAAlB,EAA8BK,CAAC,CAACE,MAAF,CAASL,KAAvC,CAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5D,CAFF,eAGE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAArC,eAA0D;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEnB,QAAQ,CAACkF,MAAhE;AAAwE,QAAA,QAAQ,EAAE5D,CAAC,IAAI,KAAKL,YAAL,CAAkB,QAAlB,EAA4BK,CAAC,CAACE,MAAF,CAASL,KAArC,CAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1D,CAHF,CA1DF,eAiEE;AAAI,QAAA,SAAS,EAAC,mBAAd;AAAkC,QAAA,IAAI,EAAC,SAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAyB;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAG,YAAWpB,SAAS,KAAK,KAAd,GAAsB,QAAtB,GAAiC,EAAG,EAAjF;AAAoF,QAAA,OAAO,EAAE,MAAM,KAAKU,QAAL,CAAc;AAAEV,UAAAA,SAAS,EAAE;AAAb,SAAd,CAAnG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAzB,CADF,eAEE;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAyB;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAG,YAAWA,SAAS,KAAK,YAAd,GAA6B,QAA7B,GAAwC,EAAG,EAAxF;AAA2F,QAAA,OAAO,EAAE,MAAM,KAAKU,QAAL,CAAc;AAAEV,UAAAA,SAAS,EAAE;AAAb,SAAd,CAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAzB,CAFF,eAGE;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAyB;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAG,YAAWA,SAAS,KAAK,MAAd,GAAuB,QAAvB,GAAkC,EAAG,EAAlF;AAAqF,QAAA,OAAO,EAAE,MAAM,KAAKU,QAAL,CAAc;AAAEV,UAAAA,SAAS,EAAE;AAAb,SAAd,CAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAzB,CAHF,CAjEF,EAuEGA,SAAS,KAAK,KAAd,iBACC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAArC,eAAyE;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEC,QAAQ,CAACmF,oBAAhE;AAAsF,QAAA,QAAQ,EAAE7D,CAAC,IAAI,KAAKL,YAAL,CAAkB,sBAAlB,EAA0CK,CAAC,CAACE,MAAF,CAASL,KAAnD,CAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAzE,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAArC,eAAwD;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAACoF,iBAA5E;AAA+F,QAAA,QAAQ,EAAE9D,CAAC,IAAI,KAAKL,YAAL,CAAkB,mBAAlB,EAAuCK,CAAC,CAACE,MAAF,CAASL,KAAhD,CAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAxD,CAFF,eAGE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAArC,eAAyD;AAAQ,QAAA,SAAS,EAAC,8BAAlB;AAAiD,QAAA,KAAK,EAAEnB,QAAQ,CAACqF,kBAAjE;AAAqF,QAAA,QAAQ,EAAE/D,CAAC,IAAI,KAAKL,YAAL,CAAkB,oBAAlB,EAAwCK,CAAC,CAACE,MAAF,CAASL,KAAjD,CAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8J,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAcb,GAAd,CAAkBgE,CAAC,iBAAG;AAAQ,QAAA,GAAG,EAAEA,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiBA,CAAjB,CAAtB,CAA9J,CAAzD,CAHF,eAIE;AAAK,QAAA,SAAS,EAAC,+CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiC;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,IAAI,EAAC,UAAzC;AAAoD,QAAA,OAAO,EAAEtE,QAAQ,CAACsF,gBAAtE;AAAwF,QAAA,QAAQ,EAAE,MAAM,KAAKrD,cAAL,CAAoB,kBAApB,CAAxG;AAAiJ,QAAA,EAAE,EAAC,MAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjC,eAA8L;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,OAAO,EAAC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA9L,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiC;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,IAAI,EAAC,UAAzC;AAAoD,QAAA,OAAO,EAAEjC,QAAQ,CAACuF,gBAAtE;AAAwF,QAAA,QAAQ,EAAE,MAAM,KAAKtD,cAAL,CAAoB,kBAApB,CAAxG;AAAiJ,QAAA,EAAE,EAAC,MAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAjC,eAA8L;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,OAAO,EAAC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAA9L,CAFF,eAGE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA4B;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,IAAI,EAAC,UAAzC;AAAoD,QAAA,OAAO,EAAEjC,QAAQ,CAACwF,gBAAtE;AAAwF,QAAA,QAAQ,EAAE,MAAM,KAAKvD,cAAL,CAAoB,kBAApB,CAAxG;AAAiJ,QAAA,EAAE,EAAC,MAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5B,eAAyL;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,OAAO,EAAC,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAzL,CAHF,CAJF,CAFF,CAxEJ,EAuFGlC,SAAS,KAAK,YAAd,iBACC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,wBAAhC;AAAyD,QAAA,OAAO,EAAE,KAAKyC,gBAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CAFF,eAKE;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBANF,CADF,CADF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAACxC,QAAQ,CAACyC,iBAAT,IAA8B,EAA/B,EAAmCnC,GAAnC,CAAuC,CAACmF,CAAD,EAAIC,CAAJ,kBACtC;AAAI,QAAA,GAAG,EAAEA,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKA,CAAC,GAAG,CAAT,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,KAAK,EAAED,CAAC,CAAC/C,wBAA5D;AAAsF,QAAA,QAAQ,EAAEpB,CAAC,IAAI,KAAKwB,mBAAL,CAAyB4C,CAAzB,EAA4B,0BAA5B,EAAwDpE,CAAC,CAACE,MAAF,CAASL,KAAjE,CAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,SAAS,EAAC,8BAAlB;AAAiD,QAAA,KAAK,EAAEsE,CAAC,CAAC9C,QAA1D;AAAoE,QAAA,QAAQ,EAAErB,CAAC,IAAI,KAAKwB,mBAAL,CAAyB4C,CAAzB,EAA4B,UAA5B,EAAwCpE,CAAC,CAACE,MAAF,CAASL,KAAjD,CAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,IAAD,EAAO,KAAP,EAAc,YAAd,EAA4Bb,GAA5B,CAAgCqF,CAAC,iBAAI;AAAQ,QAAA,GAAG,EAAEA,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiBA,CAAjB,CAArC,CADH,CADF,CAHF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAEF,CAAC,CAAC7C,UAAF,IAAgB,EAAnF;AAAuF,QAAA,QAAQ,EAAEtB,CAAC,IAAI,KAAKwB,mBAAL,CAAyB4C,CAAzB,EAA4B,YAA5B,EAA0CpE,CAAC,CAACE,MAAF,CAASL,KAAnD,CAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKsE,CAAC,CAAC5C,IAAF,IAAU,EAAf,CATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,uBAAhC;AAAwD,QAAA,OAAO,EAAE,MAAM,KAAKU,mBAAL,CAAyBmC,CAAzB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAJ,CAVF,CADD,CADH,EAeG,CAAC,CAAC1F,QAAQ,CAACyC,iBAAV,IAA+BzC,QAAQ,CAACyC,iBAAT,CAA2B1B,MAA3B,KAAsC,CAAtE,kBAA4E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAI,QAAA,OAAO,EAAE,CAAb;AAAgB,QAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAJ,CAf/E,CAXF,CALF,CAxFJ,EA6HGhB,SAAS,KAAK,MAAd,iBACC;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,eAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAtC,eAA4D;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,KAAK,EAAEC,QAAQ,CAAC4F,OAAhE;AAAyE,QAAA,QAAQ,EAAEtE,CAAC,IAAI,KAAKL,YAAL,CAAkB,SAAlB,EAA6BK,CAAC,CAACE,MAAF,CAASL,KAAtC,CAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5D,CADF,CAFF,eAKE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAArC,eAAqE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAAC6F,cAA5E;AAA4F,QAAA,QAAQ,EAAEvE,CAAC,IAAI,KAAKL,YAAL,CAAkB,gBAAlB,EAAoCK,CAAC,CAACE,MAAF,CAASL,KAA7C,CAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAArE,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAArC,eAAuE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAAC8F,gBAA5E;AAA8F,QAAA,QAAQ,EAAExE,CAAC,IAAI,KAAKL,YAAL,CAAkB,kBAAlB,EAAsCK,CAAC,CAACE,MAAF,CAASL,KAA/C,CAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAvE,CAFF,CALF,eASE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAArC,eAA0E;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAAC+F,mBAA5E;AAAiG,QAAA,QAAQ,EAAEzE,CAAC,IAAI,KAAKL,YAAL,CAAkB,qBAAlB,EAAyCK,CAAC,CAACE,MAAF,CAASL,KAAlD,CAAhH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA1E,CADF,eAEE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAArC,eAAkE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAACgG,WAA5E;AAAyF,QAAA,QAAQ,EAAE1E,CAAC,IAAI,KAAKL,YAAL,CAAkB,aAAlB,EAAiCK,CAAC,CAACE,MAAF,CAASL,KAA1C,CAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAlE,CAFF,CATF,eAaE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAtC,eAAuE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAACiG,eAA5E;AAA6F,QAAA,QAAQ,EAAE3E,CAAC,IAAI,KAAKL,YAAL,CAAkB,iBAAlB,EAAqCK,CAAC,CAACE,MAAF,CAASL,KAA9C,CAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAvE,CADF,CAbF,eAgBE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAtC,eAA4E;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,KAAK,EAAEnB,QAAQ,CAACkG,WAA5E;AAAyF,QAAA,QAAQ,EAAE5E,CAAC,IAAI,KAAKL,YAAL,CAAkB,aAAlB,EAAiCK,CAAC,CAACE,MAAF,CAASL,KAA1C,CAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA5E,CADF,CAhBF,eAmBE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CACC,CAAC,mBAAD,EAAsB,8BAAtB,CADD,EAEC,CAAC,kBAAD,EAAqB,UAArB,CAFD,EAGC,CAAC,sBAAD,EAAyB,iBAAzB,CAHD,EAIC,CAAC,sBAAD,EAAyB,iBAAzB,CAJD,EAKC,CAAC,6BAAD,EAAgC,yBAAhC,CALD,EAMC,CAAC,6BAAD,EAAgC,yBAAhC,CAND,EAOC,CAAC,uBAAD,EAA0B,kBAA1B,CAPD,EAQCb,GARD,CAQK,CAAC,CAAC6F,CAAD,EAAIC,KAAJ,CAAD,kBACJ;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAiC,QAAA,GAAG,EAAED,CAAtC;AAAyC,QAAA,KAAK,EAAE;AAAEE,UAAAA,QAAQ,EAAE;AAAZ,SAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,IAAI,EAAC,UAAzC;AAAoD,QAAA,OAAO,EAAE,KAAKC,YAAL,CAAkBH,CAAlB,CAA7D;AAAmF,QAAA,QAAQ,EAAE,MAAM,KAAKlE,cAAL,CAAoBkE,CAApB,CAAnG;AAA2H,QAAA,EAAE,EAAEA,CAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAO,QAAA,SAAS,EAAC,kBAAjB;AAAoC,QAAA,OAAO,EAAEA,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAiDC,KAAjD,CAFF,CATD,CADH,CADF,CAnBF,CA9HJ,eAsKE;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,wBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,0BAAhC;AAA2D,QAAA,OAAO,EAAE,MAAM,KAAK3F,QAAL,CAAc;AAAEhB,UAAAA,QAAQ,EAAE;AAAZ,SAAd,CAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,CAtKF,CAFF,CADF,CADF;AAkLD,KApV6B;;AAAA,SAsV9B6G,YAtV8B,GAsVdC,IAAD,IAAU;AACvB,YAAM;AAAEvG,QAAAA;AAAF,UAAe,KAAKT,KAA1B;AACA,YAAM,CAAC8C,GAAD,EAAMC,GAAN,IAAaiE,IAAI,CAAChE,KAAL,CAAW,GAAX,CAAnB;AACA,aAAOvC,QAAQ,CAACqC,GAAD,CAAR,IAAiBrC,QAAQ,CAACqC,GAAD,CAAR,CAAcC,GAAd,CAAjB,GAAsCtC,QAAQ,CAACqC,GAAD,CAAR,CAAcC,GAAd,CAAtC,GAA2D,KAAlE;AACD,KA1V6B;;AAAA,SA4V9BkE,aA5V8B,GA4Vd,MAAM;AACpB,YAAM;AAAExG,QAAAA,QAAF;AAAYL,QAAAA;AAAZ,UAA2B,KAAKJ,KAAtC;;AACA,YAAMkH,SAAS,GAAG,CAACL,KAAD,EAAQjF,KAAR,kBAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,KAAK,EAAE;AAAEuF,UAAAA,KAAK,EAAE;AAAT,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAASN,KAAT,CAA7B,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKjF,KAAK,IAAI,GAAd,CAFF,CADF;;AAOA,YAAMwF,SAAS,GAAG,mBAChB;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAC9CF,SAAS,CAAC,gBAAD,EAAmBzG,QAAQ,CAACgB,aAA5B,CADqC,EAE9CyF,SAAS,CAAC,WAAD,EAAczG,QAAQ,CAAC2D,aAAvB,CAFqC,EAG9C8C,SAAS,CAAC,MAAD,EAASzG,QAAQ,CAACmD,IAAlB,CAHqC,EAI9CsD,SAAS,CAAC,OAAD,EAAUzG,QAAQ,CAACqE,KAAnB,CAJqC,EAK9CoC,SAAS,CAAC,mBAAD,EAAsBzG,QAAQ,CAACuE,eAA/B,CALqC,EAM9CkC,SAAS,CAAC,cAAD,EAAiBzG,QAAQ,CAACyE,WAA1B,CANqC,EAO9CgC,SAAS,CAAC,mBAAD,EAAsBzG,QAAQ,CAAC2E,gBAA/B,CAPqC,EAQ9C8B,SAAS,CAAC,qBAAD,EAAwBzG,QAAQ,CAAC6E,kBAAjC,CARqC,EAS9C4B,SAAS,CAAC,cAAD,EAAiBzG,QAAQ,CAAC4E,WAA1B,CATqC,EAU9C6B,SAAS,CAAC,eAAD,EAAkBzG,QAAQ,CAACgF,YAA3B,CAVqC,EAW9CyB,SAAS,CAAC,UAAD,EAAazG,QAAQ,CAACiF,QAAtB,CAXqC,EAY9CwB,SAAS,CAAC,QAAD,EAAWzG,QAAQ,CAACkF,MAApB,CAZqC,CAAjD,CADF;;AAiBA,YAAM0B,gBAAgB,GAAG,mBACvB;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAC9C,CAAC5G,QAAQ,CAACyC,iBAAT,IAA8B,EAA/B,EAAmCnC,GAAnC,CAAuC,CAACmF,CAAD,EAAIC,CAAJ,kBACtC;AAAI,QAAA,GAAG,EAAEA,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAY;AAAI,QAAA,KAAK,EAAE;AAAEgB,UAAAA,KAAK,EAAE;AAAT,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAqChB,CAAC,GAAG,CAAzC,CAAZ,eAA4D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAJ,OAAoBD,CAAC,CAAC/C,wBAAF,IAA8B,GAAlD,eAAsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAtD,eAA2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAA3D,OAA8E+C,CAAC,CAAC9C,QAAhF,eAAyF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAzF,eAA8F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA9F,OAA8G8C,CAAC,CAAC7C,UAAhH,eAA2H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAA3H,eAAgI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAhI,OAA8I6C,CAAC,CAAC5C,IAAhJ,CAA5D,CADD,CAD8C,EAI9C,CAAC,CAAC7C,QAAQ,CAACyC,iBAAV,IAA+BzC,QAAQ,CAACyC,iBAAT,CAA2B1B,MAA3B,KAAsC,CAAtE,kBAA4E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAI;AAAI,QAAA,OAAO,EAAE,CAAb;AAAgB,QAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAAJ,CAJ9B,CAAjD,CADF;;AASA,YAAM8F,UAAU,GAAG,mBACjB;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAiD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAC9CJ,SAAS,CAAC,SAAD,EAAYzG,QAAQ,CAAC4F,OAArB,CADqC,EAE9Ca,SAAS,CAAC,mBAAD,EAAsBzG,QAAQ,CAAC6F,cAA/B,CAFqC,EAG9CY,SAAS,CAAC,qBAAD,EAAwBzG,QAAQ,CAAC8F,gBAAjC,CAHqC,EAI9CW,SAAS,CAAC,wBAAD,EAA2BzG,QAAQ,CAAC+F,mBAApC,CAJqC,EAK9CU,SAAS,CAAC,gBAAD,EAAmBzG,QAAQ,CAACgG,WAA5B,CALqC,EAM9CS,SAAS,CAAC,oBAAD,EAAuBzG,QAAQ,CAACiG,eAAhC,CANqC,EAO9CQ,SAAS,CAAC,cAAD,EAAiBzG,QAAQ,CAACkG,WAA1B,CAPqC,EAQ9CO,SAAS,CAAC,OAAD,EAAUK,MAAM,CAACC,OAAP,CAAe/G,QAAQ,CAACgH,KAAT,IAAkB,EAAjC,EAAqCC,MAArC,CAA4C,CAAC,CAACd,CAAD,EAAG3B,CAAH,CAAD,KAASA,CAArD,EAAwDlE,GAAxD,CAA4D,CAAC,CAAC6F,CAAD,CAAD,KAAOA,CAAnE,EAAsEe,IAAtE,CAA2E,IAA3E,CAAV,CARqC,CAAjD,CADF;;AAaA,YAAMC,UAAU,GAAG,MAAM;AACvB,gBAAQxH,UAAR;AACE,eAAK,KAAL;AAAY,mBAAOgH,SAAS,EAAhB;;AACZ,eAAK,YAAL;AAAmB,mBAAOC,gBAAgB,EAAvB;;AACnB,eAAK,MAAL;AAAa,mBAAOC,UAAU,EAAjB;;AACb,eAAK,SAAL;AACA;AACE,gCAAO,0CAAGF,SAAS,EAAZ,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAf,EAAqBC,gBAAgB,EAArC,eAAwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAxC,EAA8CC,UAAU,EAAxD,CAAP;AANJ;AAQD,OATD;;AAWA,0BACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,wDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,SAAS,EAAC,qCAAlB;AAAwD,QAAA,OAAO,EAAE,MAAM,KAAKjG,UAAL,CAAgBZ,QAAhB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAQ,QAAA,SAAS,EAAC,kCAAlB;AAAqD,QAAA,OAAO,EAAE,MAAM,KAAKS,QAAL,CAAc;AAAEf,UAAAA,WAAW,EAAE;AAAf,SAAd,CAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,CAFF,CADF,eASE;AAAO,QAAA,SAAS,EAAC,oCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACnD+G,SAAS,CAAC,gBAAD,EAAmBzG,QAAQ,CAACgB,aAA5B,CAD0C,EAEnDyF,SAAS,CAAC,WAAD,EAAczG,QAAQ,CAAC2D,aAAvB,CAF0C,EAGnD8C,SAAS,CAAC,mBAAD,EAAsBzG,QAAQ,CAAC2E,gBAA/B,CAH0C,EAInD8B,SAAS,CAAC,QAAD,EAAWzG,QAAQ,CAACkF,MAApB,CAJ0C,CAAtD,CATF,eAgBE;AAAI,QAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAAC,SAAD,EAAY,KAAZ,EAAmB,YAAnB,EAAiC,MAAjC,EAAyC5E,GAAzC,CAA6C8G,GAAG,iBAC/C;AAAI,QAAA,SAAS,EAAC,UAAd;AAAyB,QAAA,GAAG,EAAEA,GAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,SAAS,EAAG,YAAW,KAAK7H,KAAL,CAAWI,UAAX,KAA0ByH,GAA1B,GAAgC,QAAhC,GAA2C,EAAG,EAA7E;AAAgF,QAAA,OAAO,EAAE,MAAM,KAAK3G,QAAL,CAAc;AAAEd,UAAAA,UAAU,EAAEyH;AAAd,SAAd,CAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGA,GAAG,KAAK,SAAR,GAAoB,UAApB,GAAkCA,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAcC,WAAd,KAA8BF,GAAG,CAACG,KAAJ,CAAU,CAAV,CADnE,CADF,CADD,CADH,CAhBF,eA0BE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8BJ,UAAU,EAAxC,CA1BF,CADF;AA8BD,KArb6B;;AAAA,SAub9BK,WAvb8B,GAubhB,mBACZ;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,wDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,SAAS,EAAC,6BAAlB;AAAgD,MAAA,OAAO,EAAE,MAAM,KAAK5G,UAAL,EAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CAFF,CADF,eAOE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBATF,CADF,CADF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKrB,KAAL,CAAWC,IAAX,CAAgBc,GAAhB,CAAoB,CAACmH,CAAD,EAAI/B,CAAJ,kBACnB;AAAI,MAAA,GAAG,EAAE+B,CAAC,CAACjH,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI;AAAQ,MAAA,SAAS,EAAC,kBAAlB;AAAqC,MAAA,OAAO,EAAE,MAAM,KAAKE,aAAL,CAAmB+G,CAAnB,CAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA4EA,CAAC,CAACzG,aAA9E,CAAJ,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKyG,CAAC,CAAC9D,aAAP,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK8D,CAAC,CAACtE,IAAP,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKsE,CAAC,CAACpD,KAAP,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKoD,CAAC,CAAClD,eAAP,CALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKkD,CAAC,CAAChD,WAAP,CANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKgD,CAAC,CAAC9C,gBAAP,CAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK8C,CAAC,CAACvC,MAAP,CARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,SAAS,EAAC,qCAAlB;AAAwD,MAAA,OAAO,EAAE,MAAM,KAAKtE,UAAL,CAAgB6G,CAAhB,CAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAQ,MAAA,SAAS,EAAC,+BAAlB;AAAkD,MAAA,OAAO,EAAE,MAAM,KAAK5D,YAAL,CAAkB4D,CAAC,CAACjH,EAApB,CAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,CATF,CADD,CADH,EAiBG,KAAKjB,KAAL,CAAWC,IAAX,CAAgBuB,MAAhB,KAA2B,CAA3B,iBAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI;AAAI,MAAA,OAAO,EAAC,GAAZ;AAAgB,MAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAJ,CAjBnC,CAdF,CADF,CAPF,CADF,CAxb4B;;AAAA,SAwe9B2G,MAxe8B,GAwerB,MAAM;AACb,0BACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKnI,KAAL,CAAWE,QAAX,GACG,KAAKuE,UAAL,EADH,GAEG,KAAKzE,KAAL,CAAWG,WAAX,GACE,KAAK8G,aAAL,EADF,GAEE,KAAKgB,WAAL,EALR,CADF;AASD,KAlf6B;AAAA;;AAa9BvH,EAAAA,YAAY,GAAG;AACb,UAAM0H,KAAK,GAAG,IAAIzE,IAAJ,GAAW0E,WAAX,GAAyBrF,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAAd;AACA,WAAO;AACLvB,MAAAA,aAAa,EAAE,EADV;AAEL2C,MAAAA,aAAa,EAAE,EAFV;AAGLR,MAAAA,IAAI,EAAEwE,KAHD;AAILtD,MAAAA,KAAK,EAAE,GAJF;AAKLE,MAAAA,eAAe,EAAE,MALZ;AAMLE,MAAAA,WAAW,EAAE,MANR;AAOLE,MAAAA,gBAAgB,EAAE,EAPb;AAQLE,MAAAA,kBAAkB,EAAE,EARf;AASL/C,MAAAA,YAAY,EAAE,EATT;AASa;AAClB8C,MAAAA,WAAW,EAAE,EAVR;AAWLI,MAAAA,YAAY,EAAE,EAXT;AAYLC,MAAAA,QAAQ,EAAE,EAZL;AAaLC,MAAAA,MAAM,EAAE,MAbH;AAeL;AACAC,MAAAA,oBAAoB,EAAE,EAhBjB;AAiBLC,MAAAA,iBAAiB,EAAE,EAjBd;AAkBLC,MAAAA,kBAAkB,EAAE,GAlBf;AAmBLC,MAAAA,gBAAgB,EAAE,KAnBb;AAoBLC,MAAAA,gBAAgB,EAAE,KApBb;AAqBLC,MAAAA,gBAAgB,EAAE,KArBb;AAuBL;AACA/C,MAAAA,iBAAiB,EAAE,EAxBd;AA0BL;AACAmD,MAAAA,OAAO,EAAE,EA3BJ;AA4BLC,MAAAA,cAAc,EAAE,EA5BX;AA6BLC,MAAAA,gBAAgB,EAAE,EA7Bb;AA8BLC,MAAAA,mBAAmB,EAAE,EA9BhB;AA+BLC,MAAAA,WAAW,EAAE,EA/BR;AAgCLC,MAAAA,eAAe,EAAE,EAhCZ;AAiCLC,MAAAA,WAAW,EAAE,EAjCR;AAkCLc,MAAAA,KAAK,EAAE;AACLa,QAAAA,WAAW,EAAE,KADR;AAELC,QAAAA,UAAU,EAAE,KAFP;AAGLC,QAAAA,cAAc,EAAE,KAHX;AAILC,QAAAA,cAAc,EAAE,KAJX;AAKLC,QAAAA,qBAAqB,EAAE,KALlB;AAMLC,QAAAA,qBAAqB,EAAE,KANlB;AAOLC,QAAAA,eAAe,EAAE;AAPZ;AAlCF,KAAP;AA4CD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,SAAKlI,SAAL;AACD;;AA/D6B;;AAqfhC,eAAeZ,OAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { db } from '../../../firebase';\r\nimport { collection, addDoc, getDocs, deleteDoc, doc, setDoc } from 'firebase/firestore';\r\nimport '../../../assets/styles/components/_overlay.scss'\r\n\r\n// PSC (Problem Solving Card) form page - replaces customer form\r\nclass PSCPage extends Component {\r\n  state = {\r\n    pscs: [],\r\n    showForm: false,\r\n    showPreview: false,\r\n    previewTab: 'showAll',\r\n    overlaySearch: '',\r\n    overlayType: '',\r\n    editingId: null,\r\n    activeTab: 'psc',\r\n    formData: this.getEmptyForm()\r\n  };\r\n\r\n  getEmptyForm() {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    return {\r\n      problemNumber: '',\r\n      initiatorName: '',\r\n      date: today,\r\n      shift: 'A',\r\n      valueStreamLine: 'VL 1',\r\n      ticketStage: 'plan',\r\n      shortDescription: '',\r\n      problemDescription: '',\r\n      problemImage: '', // base64 data url\r\n      qtyAffected: '',\r\n      partAffected: '',\r\n      supplier: '',\r\n      status: 'open',\r\n\r\n      // effectiveness section\r\n      effectivenessChecked: '',\r\n      effectivenessDate: '',\r\n      effectivenessShift: 'A',\r\n      escalationLevel2: false,\r\n      escalationLevel3: false,\r\n      escalationLevel4: false,\r\n\r\n      // corrective actions - array of rows\r\n      correctiveActions: [],\r\n\r\n      // root cause\r\n      symptom: '',\r\n      problem_method: '',\r\n      problem_material: '',\r\n      problem_environment: '',\r\n      problem_man: '',\r\n      problem_machine: '',\r\n      actualCause: '',\r\n      flags: {\r\n        safetyIssue: false,\r\n        fiveSPoint: false,\r\n        machineProblem: false,\r\n        qualityConcern: false,\r\n        potentialMachineIssue: false,\r\n        potentialQualityIssue: false,\r\n        improvementIdea: false\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchPSCs();\r\n  }\r\n\r\n  fetchPSCs = async () => {\r\n    const snap = await getDocs(collection(db, 'psc'));\r\n    const data = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    this.setState({ pscs: data });\r\n  };\r\n\r\n  togglePreview = (item) => {\r\n    this.setState({ formData: { ...item }, showPreview: true, showForm: false, previewTab: 'showAll' });\r\n  };\r\n\r\n  toggleForm = (edit = null) => {\r\n    if (edit) {\r\n      this.setState({ showForm: true, editingId: edit.id, activeTab: 'psc', formData: { ...edit }, showPreview: false });\r\n    } else {\r\n      // generate a problem number\r\n      const num = `PSC-${101 + this.state.pscs.length}`;\r\n      this.setState({ showForm: true, editingId: null, activeTab: 'psc', showPreview: false, formData: { ...this.getEmptyForm(), problemNumber: num } });\r\n    }\r\n  };\r\n\r\n  handleChange = (field, value) => {\r\n    this.setState(prev => ({ formData: { ...prev.formData, [field]: value } }));\r\n  };\r\n\r\n  handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = (ev) => {\r\n      this.setState(prev => ({ formData: { ...prev.formData, problemImage: ev.target.result } }));\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  handleCheckbox = (fieldPath) => {\r\n    this.setState(prev => {\r\n      const fd = { ...prev.formData };\r\n      // support nested flags\r\n      if (fieldPath.indexOf('.') > -1) {\r\n        const [top, sub] = fieldPath.split('.');\r\n        fd[top] = { ...fd[top], [sub]: !fd[top][sub] };\r\n      } else {\r\n        fd[fieldPath] = !fd[fieldPath];\r\n      }\r\n      return { formData: fd };\r\n    });\r\n  };\r\n\r\n  // corrective actions helpers\r\n  addCorrectiveRow = () => {\r\n    this.setState(prev => ({ formData: { ...prev.formData, correctiveActions: [...(prev.formData.correctiveActions || []), { initialContainmentAction: '', assignTo: 'tl', targetDate: '', type: '' }] } }));\r\n  };\r\n\r\n  updateCorrectiveRow = (idx, field, value) => {\r\n    this.setState(prev => {\r\n      const rows = [...(prev.formData.correctiveActions || [])];\r\n      rows[idx] = { ...rows[idx], [field]: value };\r\n      // compute type based on targetDate compared to form date\r\n      if (field === 'targetDate') {\r\n        const formDate = new Date(prev.formData.date);\r\n        const target = new Date(value);\r\n        const diff = Math.ceil((target - formDate) / (1000 * 60 * 60 * 24));\r\n        rows[idx].type = diff > 7 ? 'Long Corrective Action' : 'Short Corrective Action';\r\n      }\r\n      return { formData: { ...prev.formData, correctiveActions: rows } };\r\n    });\r\n  };\r\n\r\n  removeCorrectiveRow = (idx) => {\r\n    this.setState(prev => {\r\n      const rows = [...(prev.formData.correctiveActions || [])];\r\n      rows.splice(idx, 1);\r\n      return { formData: { ...prev.formData, correctiveActions: rows } };\r\n    });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { editingId, formData } = this.state;\r\n    if (!formData.problemNumber || !formData.initiatorName) return alert('Problem Number and Initiator Name required');\r\n    if (editingId) {\r\n      await setDoc(doc(db, 'psc', editingId), formData);\r\n    } else {\r\n      await addDoc(collection(db, 'psc'), formData);\r\n    }\r\n    this.setState({ showForm: false, showPreview: false, editingId: null });\r\n    this.fetchPSCs();\r\n  };\r\n\r\n  handleDelete = async (id) => {\r\n    if (!window.confirm('Delete this PSC?')) return;\r\n    await deleteDoc(doc(db, 'psc', id));\r\n    this.fetchPSCs();\r\n  };\r\n\r\n  renderForm = () => {\r\n    const { formData, activeTab } = this.state;\r\n    return (\r\n      <div className=\"card full-height\" style={{ height: '100vh' }}>\r\n        <div style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>\r\n          <h4 className=\"mb-3\">PSC - Problem Solving Card</h4>\r\n          <form className=\"form-sample\" onSubmit={this.handleSubmit} autoComplete=\"off\">\r\n            {/* PSC Tab fields */}\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Problem Number</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.problemNumber} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Initiator Name</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.initiatorName} onChange={e => this.handleChange('initiatorName', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Date</label>\r\n                <input className=\"form-control form-control-sm\" type=\"date\" value={formData.date} onChange={e => this.handleChange('date', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-1\">\r\n                <label>Shift</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.shift} onChange={e => this.handleChange('shift', e.target.value)}>\r\n                  {['A', 'B', 'C'].map(s => <option key={s}>{s}</option>)}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Value Stream Line</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.valueStreamLine} onChange={e => this.handleChange('valueStreamLine', e.target.value)}>\r\n                  {['VL 1', 'VL 2', 'VL 3'].map(v => <option key={v}>{v}</option>)}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Ticket Stage</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.ticketStage} onChange={e => this.handleChange('ticketStage', e.target.value)}>\r\n                  {['plan', 'do', 'check', 'act'].map(t => <option key={t}>{t}</option>)}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-6\">\r\n                <label>Short Description</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.shortDescription} onChange={e => this.handleChange('shortDescription', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-6\">\r\n                <label>Qty Affected</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.qtyAffected} onChange={e => this.handleChange('qtyAffected', e.target.value)} />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-8\">\r\n                <label>Problem Description</label>\r\n                <textarea className=\"form-control form-control-sm\" rows={4} value={formData.problemDescription} onChange={e => this.handleChange('problemDescription', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-4\">\r\n                <label>Problem Image</label>\r\n                <input type=\"file\" accept=\"image/*\" className=\"form-control form-control-sm\" onChange={this.handleFileChange} />\r\n                {formData.problemImage && <img src={formData.problemImage} alt=\"problem\" style={{ maxWidth: '100%', marginTop: 8 }} />}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-4\"><label>Part Affected</label><input className=\"form-control form-control-sm\" value={formData.partAffected} onChange={e => this.handleChange('partAffected', e.target.value)} /></div>\r\n              <div className=\"form-group col-md-4\"><label>Supplier</label><input className=\"form-control form-control-sm\" value={formData.supplier} onChange={e => this.handleChange('supplier', e.target.value)} /></div>\r\n              <div className=\"form-group col-md-4\"><label>Status</label><input className=\"form-control form-control-sm\" value={formData.status} onChange={e => this.handleChange('status', e.target.value)} /></div>\r\n            </div>\r\n\r\n            {/* Tabs: PSC / Corrective / Root Cause */}\r\n            <ul className=\"nav nav-tabs mt-3\" role=\"tablist\">\r\n              <li className=\"nav-item\"><button type=\"button\" className={`nav-link ${activeTab === 'psc' ? 'active' : ''}`} onClick={() => this.setState({ activeTab: 'psc' })}>PSC</button></li>\r\n              <li className=\"nav-item\"><button type=\"button\" className={`nav-link ${activeTab === 'corrective' ? 'active' : ''}`} onClick={() => this.setState({ activeTab: 'corrective' })}>Corrective Actions</button></li>\r\n              <li className=\"nav-item\"><button type=\"button\" className={`nav-link ${activeTab === 'root' ? 'active' : ''}`} onClick={() => this.setState({ activeTab: 'root' })}>Root Cause</button></li>\r\n            </ul>\r\n\r\n            {activeTab === 'psc' && (\r\n              <div className=\"mt-3\">\r\n                <h5>Effectiveness</h5>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-3\"><label>Effectiveness Checked</label><input className=\"form-control form-control-sm\" value={formData.effectivenessChecked} onChange={e => this.handleChange('effectivenessChecked', e.target.value)} /></div>\r\n                  <div className=\"form-group col-md-3\"><label>Date</label><input type=\"date\" className=\"form-control form-control-sm\" value={formData.effectivenessDate} onChange={e => this.handleChange('effectivenessDate', e.target.value)} /></div>\r\n                  <div className=\"form-group col-md-2\"><label>Shift</label><select className=\"form-control form-control-sm\" value={formData.effectivenessShift} onChange={e => this.handleChange('effectivenessShift', e.target.value)}>{['A','B','C'].map(s=> <option key={s}>{s}</option>)}</select></div>\r\n                  <div className=\"form-group col-md-4 d-flex align-items-center\">\r\n                    <div className=\"form-check mr-3\"><input className=\"form-check-input\" type=\"checkbox\" checked={formData.escalationLevel2} onChange={() => this.handleCheckbox('escalationLevel2')} id=\"esc2\" /><label className=\"form-check-label\" htmlFor=\"esc2\">Escalation Level 2</label></div>\r\n                    <div className=\"form-check mr-3\"><input className=\"form-check-input\" type=\"checkbox\" checked={formData.escalationLevel3} onChange={() => this.handleCheckbox('escalationLevel3')} id=\"esc3\" /><label className=\"form-check-label\" htmlFor=\"esc3\">Escalation Level 3</label></div>\r\n                    <div className=\"form-check\"><input className=\"form-check-input\" type=\"checkbox\" checked={formData.escalationLevel4} onChange={() => this.handleCheckbox('escalationLevel4')} id=\"esc4\" /><label className=\"form-check-label\" htmlFor=\"esc4\">Escalation Level 4</label></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'corrective' && (\r\n              <div className=\"mt-3\">\r\n                <h5>Corrective Actions</h5>\r\n                <div className=\"mb-2\">\r\n                  <button type=\"button\" className=\"btn btn-sm btn-primary\" onClick={this.addCorrectiveRow}>+ Add Action</button>\r\n                </div>\r\n                <table className=\"table table-bordered table-sm\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>#</th>\r\n                      <th>Initial Containment Action</th>\r\n                      <th>Assign To</th>\r\n                      <th>Target Date</th>\r\n                      <th>Type</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {(formData.correctiveActions || []).map((r, i) => (\r\n                      <tr key={i}>\r\n                        <td>{i + 1}</td>\r\n                        <td><textarea className=\"form-control form-control-sm\" value={r.initialContainmentAction} onChange={e => this.updateCorrectiveRow(i, 'initialContainmentAction', e.target.value)} /></td>\r\n                        <td>\r\n                          <select className=\"form-control form-control-sm\" value={r.assignTo} onChange={e => this.updateCorrectiveRow(i, 'assignTo', e.target.value)}>\r\n                            {['tl', 'vsl', 'plant head'].map(a => <option key={a}>{a}</option>)}\r\n                          </select>\r\n                        </td>\r\n                        <td><input type=\"date\" className=\"form-control form-control-sm\" value={r.targetDate || ''} onChange={e => this.updateCorrectiveRow(i, 'targetDate', e.target.value)} /></td>\r\n                        <td>{r.type || ''}</td>\r\n                        <td><button type=\"button\" className=\"btn btn-sm btn-danger\" onClick={() => this.removeCorrectiveRow(i)}>Delete</button></td>\r\n                      </tr>\r\n                    ))}\r\n                    {(!formData.correctiveActions || formData.correctiveActions.length === 0) && <tr><td colSpan={6} className=\"text-center\">No corrective actions</td></tr>}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'root' && (\r\n              <div className=\"mt-3\">\r\n                <h5>Root Cause Analysis</h5>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-12\"><label>Symptom</label><input className=\"form-control form-control-sm\" value={formData.symptom} onChange={e => this.handleChange('symptom', e.target.value)} /></div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-6\"><label>Problem in Method</label><textarea className=\"form-control form-control-sm\" rows={3} value={formData.problem_method} onChange={e => this.handleChange('problem_method', e.target.value)} /></div>\r\n                  <div className=\"form-group col-md-6\"><label>Problem in Material</label><textarea className=\"form-control form-control-sm\" rows={3} value={formData.problem_material} onChange={e => this.handleChange('problem_material', e.target.value)} /></div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-6\"><label>Problem in Environment</label><textarea className=\"form-control form-control-sm\" rows={3} value={formData.problem_environment} onChange={e => this.handleChange('problem_environment', e.target.value)} /></div>\r\n                  <div className=\"form-group col-md-6\"><label>Problem in Man</label><textarea className=\"form-control form-control-sm\" rows={3} value={formData.problem_man} onChange={e => this.handleChange('problem_man', e.target.value)} /></div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-12\"><label>Problem in Machine</label><textarea className=\"form-control form-control-sm\" rows={3} value={formData.problem_machine} onChange={e => this.handleChange('problem_machine', e.target.value)} /></div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-12\"><label>Actual Cause of Problem</label><textarea className=\"form-control form-control-sm\" rows={4} value={formData.actualCause} onChange={e => this.handleChange('actualCause', e.target.value)} /></div>\r\n                </div>\r\n                <div className=\"form-row\">\r\n                  <div className=\"form-group col-md-12 d-flex flex-wrap\">\r\n                    {[\r\n                      ['flags.safetyIssue', 'Safety issue / Near Miss(es)'],\r\n                      ['flags.fiveSPoint', '5S point'],\r\n                      ['flags.machineProblem', 'Machine problem'],\r\n                      ['flags.qualityConcern', 'Quality concern'],\r\n                      ['flags.potentialMachineIssue', 'Potential machine issue'],\r\n                      ['flags.potentialQualityIssue', 'Potential quality issue'],\r\n                      ['flags.improvementIdea', 'Improvement idea']\r\n                    ].map(([k, label]) => (\r\n                      <div className=\"form-check mr-3\" key={k} style={{ minWidth: 200 }}>\r\n                        <input className=\"form-check-input\" type=\"checkbox\" checked={this.getFlagValue(k)} onChange={() => this.handleCheckbox(k)} id={k} />\r\n                        <label className=\"form-check-label\" htmlFor={k}>{label}</label>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"fixed-card-footer\">\r\n              <button type=\"submit\" className=\"btn btn-success btn-sm\">Save</button>\r\n              <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={() => this.setState({ showForm: false })}>Cancel</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  getFlagValue = (path) => {\r\n    const { formData } = this.state;\r\n    const [top, sub] = path.split('.');\r\n    return formData[top] && formData[top][sub] ? formData[top][sub] : false;\r\n  };\r\n\r\n  renderPreview = () => {\r\n    const { formData, previewTab } = this.state;\r\n    const renderRow = (label, value) => (\r\n      <tr>\r\n        <td style={{ width: '30%' }}><strong>{label}</strong></td>\r\n        <td>{value || '-'}</td>\r\n      </tr>\r\n    );\r\n\r\n    const renderPSC = () => (\r\n      <table className=\"table table-bordered table-sm\"><tbody>\r\n        {renderRow('Problem Number', formData.problemNumber)}\r\n        {renderRow('Initiator', formData.initiatorName)}\r\n        {renderRow('Date', formData.date)}\r\n        {renderRow('Shift', formData.shift)}\r\n        {renderRow('Value Stream Line', formData.valueStreamLine)}\r\n        {renderRow('Ticket Stage', formData.ticketStage)}\r\n        {renderRow('Short Description', formData.shortDescription)}\r\n        {renderRow('Problem Description', formData.problemDescription)}\r\n        {renderRow('Qty Affected', formData.qtyAffected)}\r\n        {renderRow('Part Affected', formData.partAffected)}\r\n        {renderRow('Supplier', formData.supplier)}\r\n        {renderRow('Status', formData.status)}\r\n      </tbody></table>\r\n    );\r\n\r\n    const renderCorrective = () => (\r\n      <table className=\"table table-bordered table-sm\"><tbody>\r\n        {(formData.correctiveActions || []).map((r, i) => (\r\n          <tr key={i}><td style={{ width: '20%' }}>Action {i + 1}</td><td><b>Action:</b> {r.initialContainmentAction || '-'}<br/><b>Assign To:</b> {r.assignTo}<br/><b>Target:</b> {r.targetDate}<br/><b>Type:</b> {r.type}</td></tr>\r\n        ))}\r\n        {(!formData.correctiveActions || formData.correctiveActions.length === 0) && <tr><td colSpan={2} className=\"text-center\">No corrective actions</td></tr>}\r\n      </tbody></table>\r\n    );\r\n\r\n    const renderRoot = () => (\r\n      <table className=\"table table-bordered table-sm\"><tbody>\r\n        {renderRow('Symptom', formData.symptom)}\r\n        {renderRow('Problem in Method', formData.problem_method)}\r\n        {renderRow('Problem in Material', formData.problem_material)}\r\n        {renderRow('Problem in Environment', formData.problem_environment)}\r\n        {renderRow('Problem in Man', formData.problem_man)}\r\n        {renderRow('Problem in Machine', formData.problem_machine)}\r\n        {renderRow('Actual Cause', formData.actualCause)}\r\n        {renderRow('Flags', Object.entries(formData.flags || {}).filter(([k,v])=>v).map(([k])=>k).join(', '))}\r\n      </tbody></table>\r\n    );\r\n\r\n    const tabContent = () => {\r\n      switch (previewTab) {\r\n        case 'psc': return renderPSC();\r\n        case 'corrective': return renderCorrective();\r\n        case 'root': return renderRoot();\r\n        case 'showAll':\r\n        default:\r\n          return <>{renderPSC()}<hr/>{renderCorrective()}<hr/>{renderRoot()}</>;\r\n      }\r\n    };\r\n\r\n    return (\r\n      <div className=\"card p-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"mb-0\">PSC Preview</h4>\r\n          <div>\r\n            <button className=\"btn btn-outline-primary btn-sm mr-2\" onClick={() => this.toggleForm(formData)}>View / Edit</button>\r\n            <button className=\"btn btn-outline-secondary btn-sm\" onClick={() => this.setState({ showPreview: false })}>Back to List</button>\r\n          </div>\r\n        </div>\r\n\r\n        <table className=\"table table-bordered table-sm mb-4\"><tbody>\r\n          {renderRow('Problem Number', formData.problemNumber)}\r\n          {renderRow('Initiator', formData.initiatorName)}\r\n          {renderRow('Short Description', formData.shortDescription)}\r\n          {renderRow('Status', formData.status)}\r\n        </tbody></table>\r\n\r\n        <ul className=\"nav nav-tabs mb-3\">\r\n          {['showAll', 'psc', 'corrective', 'root'].map(key => (\r\n            <li className=\"nav-item\" key={key}>\r\n              <button className={`nav-link ${this.state.previewTab === key ? 'active' : ''}`} onClick={() => this.setState({ previewTab: key })}>\r\n                {key === 'showAll' ? 'Show All' : (key.charAt(0).toUpperCase() + key.slice(1))}\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        <div className=\"tab-content\">{tabContent()}</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">PSC List</h4>\r\n          <div>\r\n            <button className=\"btn btn-primary btn-sm mr-2\" onClick={() => this.toggleForm()}>+ Add PSC</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"custom-table-responsive\">\r\n          <table className=\"table table-bordered table-sm\">\r\n            <thead className='thead-light'>\r\n              <tr>\r\n                <th>Problem No</th>\r\n                <th>Initiator</th>\r\n                <th>Date</th>\r\n                <th>Shift</th>\r\n                <th>Value Stream</th>\r\n                <th>Stage</th>\r\n                <th>Short Description</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.pscs.map((c, i) => (\r\n                <tr key={c.id}>\r\n                  <td><button className='btn btn-link p-0' onClick={() => this.togglePreview(c)}>{c.problemNumber}</button></td>\r\n                  <td>{c.initiatorName}</td>\r\n                  <td>{c.date}</td>\r\n                  <td>{c.shift}</td>\r\n                  <td>{c.valueStreamLine}</td>\r\n                  <td>{c.ticketStage}</td>\r\n                  <td>{c.shortDescription}</td>\r\n                  <td>{c.status}</td>\r\n                  <td>\r\n                    <button className=\"btn btn-sm btn-outline-primary mr-2\" onClick={() => this.toggleForm(c)}>Edit</button>\r\n                    <button className=\"btn btn-sm btn-outline-danger\" onClick={() => this.handleDelete(c.id)}>Delete</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {this.state.pscs.length === 0 && <tr><td colSpan=\"9\" className=\"text-center\">No records found</td></tr>}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render = () => {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showForm\r\n          ? this.renderForm()\r\n          : this.state.showPreview\r\n            ? this.renderPreview()\r\n            : this.renderTable()}\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nexport default PSCPage;"]},"metadata":{},"sourceType":"module"}