{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\invoice\\\\CustomerOrderBilling.js\";\nimport React, { Component } from 'react';\nimport { db } from '../../../../firebase';\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\n\nclass CustomerOrderBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      cobilling: [],\n      orders: [],\n      customers: [],\n      taxGroups: [],\n      despatchModes: [],\n      paymentTerms: [],\n      activeTab: 0,\n      showForm: false,\n      editingId: null,\n      showOrderOverlay: false,\n      orderOverlaySearch: '',\n      showTaxOverlay: false,\n      currentTaxIdx: null,\n      notes: '',\n      formData: this.getEmptyCOBillingForm()\n    };\n\n    this.fetchCOBilling = async () => {\n      const snap = await getDocs(collection(db, 'cobilling'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        cobilling: data.reverse()\n      });\n    };\n\n    this.fetchOrders = async () => {\n      const snap = await getDocs(collection(db, 'orders'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        orders: data.reverse()\n      });\n    };\n\n    this.fetchCustomers = async () => {\n      const snap = await getDocs(collection(db, 'customers'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        customers: data\n      });\n    };\n\n    this.fetchTaxGroups = async () => {\n      const snap = await getDocs(collection(db, 'taxGroups'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        taxGroups: data\n      });\n    };\n\n    this.fetchDespatchModes = async () => {\n      const snap = await getDocs(collection(db, 'modes'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        despatchModes: data\n      });\n    };\n\n    this.fetchPaymentTerms = async () => {\n      const snap = await getDocs(collection(db, 'paymentTerms'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        paymentTerms: data\n      });\n    };\n\n    this.showOrderOverlay = () => this.setState({\n      showOrderOverlay: true,\n      orderOverlaySearch: ''\n    });\n\n    this.hideOrderOverlay = () => this.setState({\n      showOrderOverlay: false,\n      orderOverlaySearch: ''\n    });\n\n    this.selectOrderForInvoice = order => {\n      const customerObj = this.state.customers.find(c => c.custname === order.customer || c.custcode === order.customer);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          customerOrderId: order.orderNo,\n          customerOrderCompany: order.customer,\n          customerOrderDate: order.orderDate,\n          customer: order.customer,\n          refNo: order.orderNo,\n          billTo: customerObj ? this.formatAddress(customerObj.billTo) : '',\n          shipTo: customerObj ? this.formatAddress(customerObj.shipTo) : '',\n          currency: customerObj ? customerObj.currency || '' : '',\n          despatchMode: order.despatchMode || '',\n          paymentTerms: order.paymentTerms || '',\n          freightCharges: order.freightCharges || '',\n          freighttaxAmount: order.freighttaxAmount || '',\n          packingCharges: order.packingCharges || '',\n          lineItems: (order.lineItems || []).map(item => ({\n            itemCode: item.itemCode || '',\n            itemDescription: item.itemDescription || '',\n            custPartCode: item.custPartCode || '',\n            hsnCode: item.hsnCode || '',\n            locator: item.locator || '',\n            uom: item.uom || '',\n            onHand: item.onHand || 0,\n            unitPrice: item.unitPrice || 0,\n            orderQty: item.qty || 0,\n            recvQty: '',\n            // will be calculated after approval\n            qty: '',\n            taxGroupNames: item.taxGroupNames || [],\n            taxAmt: item.taxAmt || 0,\n            total: this.calcItemTotal(item.qty || item.orderQty || 1, item.unitPrice || 0, item.taxAmt || 0)\n          }))\n        },\n        showOrderOverlay: false\n      }));\n    };\n\n    this.formatAddress = addr => {\n      if (!addr) return '';\n      if (typeof addr === 'string') return addr;\n      return [addr.address, [addr.city, addr.state, addr.country].filter(Boolean).join(', '), addr.zip].filter(Boolean).join('\\n');\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }));\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const updatedItems = [...this.state.formData.lineItems];\n      updatedItems[idx] = { ...updatedItems[idx],\n        [field]: value\n      };\n\n      if (field === 'qty' || field === 'unitPrice') {\n        // recalculate taxAmt and total\n        const taxAmt = this.calcTaxAmt(updatedItems[idx]);\n        updatedItems[idx].taxAmt = taxAmt;\n        updatedItems[idx].total = this.calcItemTotal(value, updatedItems[idx].unitPrice, taxAmt);\n      }\n\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateBillTotals);\n    };\n\n    this.calcTaxAmt = item => {\n      // Calculate tax based on selected tax group, unit price, qty\n      let percent = 0;\n      let amount = 0;\n      (item.taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const baseTotal = parseFloat(item.unitPrice || 0) * parseFloat(item.qty || 1);\n      return (baseTotal * percent / 100 + amount).toFixed(2);\n    };\n\n    this.calcItemTotal = (qty, unitPrice, taxAmt) => {\n      qty = parseFloat(qty) || 0;\n      unitPrice = parseFloat(unitPrice) || 0;\n      taxAmt = parseFloat(taxAmt) || 0;\n      return (qty * unitPrice + taxAmt).toFixed(2);\n    };\n\n    this.toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\n      const formData = { ...this.state.formData\n      };\n      const item = formData.lineItems[lineIdx];\n      if (!item.taxGroupNames) item.taxGroupNames = [];\n\n      if (isChecked) {\n        if (!item.taxGroupNames.includes(groupName)) {\n          item.taxGroupNames.push(groupName);\n        }\n      } else {\n        item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\n      } // recalculate taxAmt and total\n\n\n      item.taxAmt = this.calcTaxAmt(item);\n      item.total = this.calcItemTotal(item.qty, item.unitPrice, item.taxAmt);\n      this.setState({\n        formData\n      }, this.recalculateBillTotals);\n    };\n\n    this.recalculateBillTotals = () => {\n      const {\n        lineItems\n      } = this.state.formData;\n      let taxAmount = 0;\n      let billValue = 0;\n      (lineItems || []).forEach(item => {\n        taxAmount += parseFloat(item.taxAmt || 0);\n        billValue += parseFloat(item.total || 0);\n      });\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          taxAmount: taxAmount.toFixed(2),\n          billValue: billValue.toFixed(2)\n        }\n      }));\n    };\n\n    this.handleTabChange = idx => this.setState({\n      activeTab: idx\n    });\n\n    this.handleNotesChange = e => this.setState({\n      notes: e.target.value\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        cobilling,\n        notes\n      } = this.state;\n      if (!formData.customer) return alert(\"Customer is required\");\n      if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\n      const saveData = { ...formData,\n        notes,\n        status: \"Entered\",\n        createdAt: serverTimestamp()\n      };\n\n      if (editingId) {\n        await updateDoc(doc(db, \"cobilling\", editingId), saveData);\n      } else {\n        if (formData.cobillingType === 'Standard') {\n          saveData.cobillingNo = `COB${101 + cobilling.length}`;\n        }\n\n        await addDoc(collection(db, \"cobilling\"), saveData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null,\n        formData: this.getEmptyCOBillingForm(),\n        notes: ''\n      });\n      this.fetchCOBilling();\n    };\n\n    this.renderOrderOverlay = () => {\n      const {\n        orders,\n        orderOverlaySearch\n      } = this.state;\n      const filtered = orders.filter(o => (o.orderNo || '').toLowerCase().includes(orderOverlaySearch.toLowerCase()) || (o.customer || '').toLowerCase().includes(orderOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }\n      }, \"Select Customer Order\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by ID or Company...\",\n        value: orderOverlaySearch,\n        onChange: e => this.setState({\n          orderOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 19\n        }\n      }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 19\n        }\n      }, \"Company\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 19\n        }\n      }, \"Date\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 15\n        }\n      }, filtered.map((o, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: o.id || i,\n        onClick: () => this.selectOrderForInvoice(o),\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 21\n        }\n      }, o.orderNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }\n      }, o.customer), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 21\n        }\n      }, o.orderDate))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 3,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 21\n        }\n      }, \"No orders found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideOrderOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderTaxOverlay = () => {\n      const {\n        taxGroups,\n        currentTaxIdx,\n        formData\n      } = this.state;\n      if (currentTaxIdx === null) return null;\n      const item = formData.lineItems[currentTaxIdx];\n      const selected = new Set(item.taxGroupNames || []);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: 'fixed',\n          zIndex: 1000,\n          top: '10%',\n          left: '15%',\n          background: '#fff',\n          border: '1px solid #ccc',\n          padding: '20px',\n          boxShadow: '0 0 10px rgba(0,0,0,0.3)',\n          width: '70%',\n          maxHeight: '70vh',\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 9\n        }\n      }, \"Select Tax Groups\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-sm table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 26\n        }\n      }, \"Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 40\n        }\n      }, \"Components\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 59\n        }\n      }, \"%\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }\n      }, taxGroups.map(tg => /*#__PURE__*/React.createElement(\"tr\", {\n        key: tg.groupName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selected.has(tg.groupName),\n        onChange: e => this.toggleTaxGroupSelection(tg.groupName, currentTaxIdx, e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 17\n        }\n      }, tg.groupName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 17\n        }\n      }, tg.lineItems.map(li => li.component).join(', ')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 17\n        }\n      }, tg.lineItems.map(li => li.percentOrAmt).join(', ')))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.setState({\n          showTaxOverlay: false,\n          currentTaxIdx: null\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }\n      }, \"Done\")));\n    };\n\n    this.renderTabs = () => {\n      const {\n        activeTab\n      } = this.state;\n      const tabNames = ['Billing Details', 'Commercial Details', 'Notes'];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        style: {\n          fontSize: '16px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 7\n        }\n      }, tabNames.map((tab, idx) => /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        key: tab,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link${activeTab === idx ? ' active' : ''}`,\n        onClick: () => this.handleTabChange(idx),\n        style: {\n          background: activeTab === idx ? '#e9ecef' : '#fff',\n          border: '1px solid #dee2e6',\n          borderBottom: activeTab === idx ? 'none' : undefined,\n          fontWeight: activeTab === idx ? 'bold' : 'normal'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }\n      }, tab))));\n    };\n\n    this.renderBillingTab = () => {\n      const {\n        formData,\n        showOrderOverlay,\n        showTaxOverlay,\n        currentTaxIdx\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }\n      }, \"Bill Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.cobillingType,\n        onChange: e => this.handleInputChange('cobillingType', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 15\n        }\n      }, \"Standard\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 15\n        }\n      }, \"Manual\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }\n      }, \"Bill No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.cobillingNo,\n        onChange: e => this.handleInputChange('cobillingNo', e.target.value),\n        readOnly: formData.cobillingType === 'Standard',\n        placeholder: formData.cobillingType === 'Standard' ? 'Auto' : 'Enter Bill No',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }\n      }, \"Bill Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control form-control-sm\",\n        value: formData.cobillingDate,\n        onChange: e => this.handleInputChange('cobillingDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 13\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.status,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }\n      }, \"Ref No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.refNo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 13\n        }\n      }, \"Customer Order\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: formData.customerOrderId,\n        readOnly: true,\n        onClick: this.showOrderOverlay,\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        type: \"button\",\n        onClick: this.showOrderOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 17\n        }\n      }, \"Select\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.conversionRate,\n        onChange: e => this.handleInputChange('conversionRate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }\n      }, \"Tax Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.taxAmount,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 13\n        }\n      }, \"Bill Value\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.billValue,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive mt-3\",\n        style: {\n          overflowX: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        style: {\n          minWidth: 1200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        style: {\n          position: 'sticky',\n          left: 0,\n          background: '#f9f9f9',\n          zIndex: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 17\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        style: {\n          position: 'sticky',\n          left: 90,\n          width: '100px',\n          background: '#f9f9f9',\n          zIndex: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 17\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        style: {\n          position: 'sticky',\n          left: 160,\n          background: '#f9f9f9',\n          zIndex: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 17\n        }\n      }, \"Cust Part Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 17\n        }\n      }, \"HSN/SAC\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 17\n        }\n      }, \"Locator\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 17\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 17\n        }\n      }, \"On Hand\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 17\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 17\n        }\n      }, \"Order Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 17\n        }\n      }, \"Recv Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 17\n        }\n      }, \"Quantity\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 17\n        }\n      }, \"Tax Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 17\n        }\n      }, \"Tax Amt\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 17\n        }\n      }, \"Item Total\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }\n      }, (formData.lineItems || []).map((item, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          position: 'sticky',\n          left: 0,\n          background: '#f9f9f9',\n          zIndex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 19\n        }\n      }, item.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          position: 'sticky',\n          left: 90,\n          width: '100px',\n          background: '#f9f9f9',\n          zIndex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 19\n        }\n      }, item.itemDescription), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          position: 'sticky',\n          left: 160,\n          background: '#f9f9f9',\n          zIndex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 19\n        }\n      }, item.custPartCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 19\n        }\n      }, item.hsnCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 19\n        }\n      }, item.locator), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 19\n        }\n      }, item.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 19\n        }\n      }, item.onHand), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 19\n        }\n      }, item.unitPrice), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 19\n        }\n      }, item.orderQty), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 19\n        }\n      }, item.recvQty), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.qty,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'qty', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-outline-primary btn-sm\",\n        onClick: () => this.setState({\n          showTaxOverlay: true,\n          currentTaxIdx: idx\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 21\n        }\n      }, \"Select Tax\"), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontSize: '10px',\n          marginTop: '4px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 21\n        }\n      }, (item.taxGroupNames || []).join(', ') || '-')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 19\n        }\n      }, item.taxAmt), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 19\n        }\n      }, item.total))), (!formData.lineItems || formData.lineItems.length === 0) && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"14\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 19\n        }\n      }, \"No items\"))))), showOrderOverlay && this.renderOrderOverlay(), showTaxOverlay && this.renderTaxOverlay());\n    };\n\n    this.renderCommercialTab = () => {\n      const {\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 13\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.despatchMode,\n        onChange: e => this.handleInputChange('despatchMode', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.paymentTerms,\n        onChange: e => this.handleInputChange('paymentTerms', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 13\n        }\n      }, \"Freight Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightCharges,\n        onChange: e => this.handleInputChange('freightCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 13\n        }\n      }, \"Freight Tax Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freighttaxAmount,\n        onChange: e => this.handleInputChange('freighttaxAmount', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }\n      }, \"Packing Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.packingCharges,\n        onChange: e => this.handleInputChange('packingCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.billTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.shipTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: \"4\",\n      value: this.state.notes,\n      onChange: this.handleNotesChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 9\n      }\n    })));\n\n    this.renderForm = () => {\n      const {\n        activeTab\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: '24px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 598,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 13\n        }\n      }, \"Customer Order Billing\"), this.renderTabs(), activeTab === 0 && this.renderBillingTab(), activeTab === 1 && this.renderCommercialTab(), activeTab === 2 && this.renderNotesTab(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 15\n        }\n      }, \"Save Invoice\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyCOBillingForm(),\n          notes: ''\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 15\n        }\n      }, \"Cancel\")))));\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 11\n      }\n    }, \"Customer Order Billing\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 11\n      }\n    }, \"Create\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 17\n      }\n    }, \"Bill No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 17\n      }\n    }, \"Customer Order\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 17\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 17\n      }\n    }, \"Bill Value\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 17\n      }\n    }, \"Status\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 13\n      }\n    }, this.state.cobilling.map((inv, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 19\n      }\n    }, inv.cobillingNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 19\n      }\n    }, inv.customerOrderId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 19\n      }\n    }, inv.customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 19\n      }\n    }, inv.cobillingDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 19\n      }\n    }, inv.billValue), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 19\n      }\n    }, inv.status))), this.state.cobilling.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 645,\n        columnNumber: 21\n      }\n    }, \"No cobilling found.\")))))));\n  }\n\n  getEmptyCOBillingForm() {\n    return {\n      cobillingType: 'Standard',\n      cobillingNo: '',\n      cobillingDate: new Date().toISOString().split('T')[0],\n      status: 'Entered',\n      refNo: '',\n      customerOrderId: '',\n      customerOrderCompany: '',\n      customerOrderDate: '',\n      customer: '',\n      currency: '',\n      conversionRate: '',\n      taxAmount: '',\n      billValue: '',\n      billTo: '',\n      shipTo: '',\n      lineItems: [],\n      despatchMode: '',\n      paymentTerms: '',\n      freightCharges: '',\n      freighttaxAmount: '',\n      packingCharges: '',\n      notes: ''\n    };\n  }\n\n  componentDidMount() {\n    this.fetchCOBilling();\n    this.fetchOrders();\n    this.fetchCustomers();\n    this.fetchTaxGroups();\n    this.fetchDespatchModes();\n    this.fetchPaymentTerms();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 7\n      }\n    }, this.state.showForm ? this.renderForm() : this.renderTable());\n  }\n\n}\n\nexport default CustomerOrderBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/invoice/CustomerOrderBilling.js"],"names":["React","Component","db","collection","getDocs","addDoc","updateDoc","doc","serverTimestamp","CustomerOrderBilling","state","cobilling","orders","customers","taxGroups","despatchModes","paymentTerms","activeTab","showForm","editingId","showOrderOverlay","orderOverlaySearch","showTaxOverlay","currentTaxIdx","notes","formData","getEmptyCOBillingForm","fetchCOBilling","snap","data","docs","map","id","setState","reverse","fetchOrders","fetchCustomers","fetchTaxGroups","fetchDespatchModes","fetchPaymentTerms","hideOrderOverlay","selectOrderForInvoice","order","customerObj","find","c","custname","customer","custcode","prev","customerOrderId","orderNo","customerOrderCompany","customerOrderDate","orderDate","refNo","billTo","formatAddress","shipTo","currency","despatchMode","freightCharges","freighttaxAmount","packingCharges","lineItems","item","itemCode","itemDescription","custPartCode","hsnCode","locator","uom","onHand","unitPrice","orderQty","qty","recvQty","taxGroupNames","taxAmt","total","calcItemTotal","addr","address","city","country","filter","Boolean","join","zip","handleInputChange","field","value","handleLineItemChange","idx","updatedItems","calcTaxAmt","recalculateBillTotals","percent","amount","forEach","groupName","group","t","Array","isArray","comp","val","parseFloat","percentOrAmt","type","baseTotal","toFixed","toggleTaxGroupSelection","lineIdx","isChecked","includes","push","g","taxAmount","billValue","handleTabChange","handleNotesChange","e","target","handleSubmit","preventDefault","alert","length","saveData","status","createdAt","cobillingType","cobillingNo","renderOrderOverlay","filtered","o","toLowerCase","maxHeight","overflowY","i","cursor","renderTaxOverlay","selected","Set","position","zIndex","top","left","background","border","padding","boxShadow","width","tg","has","checked","li","component","renderTabs","tabNames","fontSize","tab","borderBottom","undefined","fontWeight","renderBillingTab","cobillingDate","conversionRate","overflowX","minWidth","marginTop","renderCommercialTab","renderNotesTab","renderForm","flex","renderTable","inv","Date","toISOString","split","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { db } from '../../../../firebase';\r\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\r\n\r\nclass CustomerOrderBilling extends Component {\r\n  state = {\r\n    cobilling: [],\r\n    orders: [],\r\n    customers: [],\r\n    taxGroups: [],\r\n    despatchModes: [],\r\n    paymentTerms: [],\r\n    activeTab: 0,\r\n    showForm: false,\r\n    editingId: null,\r\n    showOrderOverlay: false,\r\n    orderOverlaySearch: '',\r\n    showTaxOverlay: false,\r\n    currentTaxIdx: null,\r\n    notes: '',\r\n    formData: this.getEmptyCOBillingForm()\r\n  };\r\n\r\n  getEmptyCOBillingForm() {\r\n    return {\r\n      cobillingType: 'Standard',\r\n      cobillingNo: '',\r\n      cobillingDate: new Date().toISOString().split('T')[0],\r\n      status: 'Entered',\r\n      refNo: '',\r\n      customerOrderId: '',\r\n      customerOrderCompany: '',\r\n      customerOrderDate: '',\r\n      customer: '',\r\n      currency: '',\r\n      conversionRate: '',\r\n      taxAmount: '',\r\n      billValue: '',\r\n      billTo: '',\r\n      shipTo: '',\r\n      lineItems: [],\r\n      despatchMode: '',\r\n      paymentTerms: '',\r\n      freightCharges: '',\r\n      freighttaxAmount: '',\r\n      packingCharges: '',\r\n      notes: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchCOBilling();\r\n    this.fetchOrders();\r\n    this.fetchCustomers();\r\n    this.fetchTaxGroups();\r\n    this.fetchDespatchModes();\r\n    this.fetchPaymentTerms();\r\n  }\r\n\r\n  fetchCOBilling = async () => {\r\n    const snap = await getDocs(collection(db, 'cobilling'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ cobilling: data.reverse() });\r\n  };\r\n\r\n  fetchOrders = async () => {\r\n    const snap = await getDocs(collection(db, 'orders'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ orders: data.reverse() });\r\n  };\r\n\r\n  fetchCustomers = async () => {\r\n    const snap = await getDocs(collection(db, 'customers'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ customers: data });\r\n  };\r\n\r\n  fetchTaxGroups = async () => {\r\n    const snap = await getDocs(collection(db, 'taxGroups'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ taxGroups: data });\r\n  };\r\n\r\n  fetchDespatchModes = async () => {\r\n    const snap = await getDocs(collection(db, 'modes'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ despatchModes: data });\r\n  };\r\n\r\n  fetchPaymentTerms = async () => {\r\n    const snap = await getDocs(collection(db, 'paymentTerms'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ paymentTerms: data });\r\n  };\r\n\r\n  showOrderOverlay = () => this.setState({ showOrderOverlay: true, orderOverlaySearch: '' });\r\n  hideOrderOverlay = () => this.setState({ showOrderOverlay: false, orderOverlaySearch: '' });\r\n\r\n  selectOrderForInvoice = (order) => {\r\n    const customerObj = this.state.customers.find(\r\n      c => c.custname === order.customer || c.custcode === order.customer\r\n    );\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        customerOrderId: order.orderNo,\r\n        customerOrderCompany: order.customer,\r\n        customerOrderDate: order.orderDate,\r\n        customer: order.customer,\r\n        refNo: order.orderNo,\r\n        billTo: customerObj ? this.formatAddress(customerObj.billTo) : '',\r\n        shipTo: customerObj ? this.formatAddress(customerObj.shipTo) : '',\r\n        currency: customerObj ? customerObj.currency || '' : '',\r\n        despatchMode: order.despatchMode || '',\r\n        paymentTerms: order.paymentTerms || '',\r\n        freightCharges: order.freightCharges || '',\r\n        freighttaxAmount: order.freighttaxAmount || '',\r\n        packingCharges: order.packingCharges || '',\r\n        lineItems: (order.lineItems || []).map(item => ({\r\n          itemCode: item.itemCode || '',\r\n          itemDescription: item.itemDescription || '',\r\n          custPartCode: item.custPartCode || '',\r\n          hsnCode: item.hsnCode || '',\r\n          locator: item.locator || '',\r\n          uom: item.uom || '',\r\n          onHand: item.onHand || 0,\r\n          unitPrice: item.unitPrice || 0,\r\n          orderQty: item.qty || 0,\r\n          recvQty: '', // will be calculated after approval\r\n          qty: '',\r\n          taxGroupNames: item.taxGroupNames || [],\r\n          taxAmt: item.taxAmt || 0,\r\n          total: this.calcItemTotal(item.qty || item.orderQty || 1, item.unitPrice || 0, item.taxAmt || 0)\r\n        }))\r\n      },\r\n      showOrderOverlay: false\r\n    }));\r\n  };\r\n\r\n  formatAddress = (addr) => {\r\n    if (!addr) return '';\r\n    if (typeof addr === 'string') return addr;\r\n    return [\r\n      addr.address,\r\n      [addr.city, addr.state, addr.country].filter(Boolean).join(', '),\r\n      addr.zip\r\n    ].filter(Boolean).join('\\n');\r\n  };\r\n\r\n  handleInputChange = (field, value) => {\r\n    this.setState(prev => ({\r\n      formData: { ...prev.formData, [field]: value }\r\n    }));\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    const updatedItems = [...this.state.formData.lineItems];\r\n    updatedItems[idx] = { ...updatedItems[idx], [field]: value };\r\n    if (field === 'qty' || field === 'unitPrice') {\r\n      // recalculate taxAmt and total\r\n      const taxAmt = this.calcTaxAmt(updatedItems[idx]);\r\n      updatedItems[idx].taxAmt = taxAmt;\r\n      updatedItems[idx].total = this.calcItemTotal(value, updatedItems[idx].unitPrice, taxAmt);\r\n    }\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: updatedItems\r\n      }\r\n    }), this.recalculateBillTotals);\r\n  };\r\n\r\n  calcTaxAmt = (item) => {\r\n    // Calculate tax based on selected tax group, unit price, qty\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (item.taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const baseTotal = (parseFloat(item.unitPrice || 0) * parseFloat(item.qty || 1));\r\n    return ((baseTotal * percent) / 100 + amount).toFixed(2);\r\n  };\r\n\r\n  calcItemTotal = (qty, unitPrice, taxAmt) => {\r\n    qty = parseFloat(qty) || 0;\r\n    unitPrice = parseFloat(unitPrice) || 0;\r\n    taxAmt = parseFloat(taxAmt) || 0;\r\n    return ((qty * unitPrice) + taxAmt).toFixed(2);\r\n  };\r\n\r\n  toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\r\n    const formData = { ...this.state.formData };\r\n    const item = formData.lineItems[lineIdx];\r\n    if (!item.taxGroupNames) item.taxGroupNames = [];\r\n    if (isChecked) {\r\n      if (!item.taxGroupNames.includes(groupName)) {\r\n        item.taxGroupNames.push(groupName);\r\n      }\r\n    } else {\r\n      item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\r\n    }\r\n    // recalculate taxAmt and total\r\n    item.taxAmt = this.calcTaxAmt(item);\r\n    item.total = this.calcItemTotal(item.qty, item.unitPrice, item.taxAmt);\r\n    this.setState({ formData }, this.recalculateBillTotals);\r\n  };\r\n\r\n  recalculateBillTotals = () => {\r\n    const { lineItems } = this.state.formData;\r\n    let taxAmount = 0;\r\n    let billValue = 0;\r\n    (lineItems || []).forEach(item => {\r\n      taxAmount += parseFloat(item.taxAmt || 0);\r\n      billValue += parseFloat(item.total || 0);\r\n    });\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        taxAmount: taxAmount.toFixed(2),\r\n        billValue: billValue.toFixed(2)\r\n      }\r\n    }));\r\n  };\r\n\r\n  handleTabChange = (idx) => this.setState({ activeTab: idx });\r\n\r\n  handleNotesChange = (e) => this.setState({ notes: e.target.value });\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { editingId, formData, cobilling, notes } = this.state;\r\n    if (!formData.customer) return alert(\"Customer is required\");\r\n    if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\r\n\r\n    const saveData = {\r\n      ...formData,\r\n      notes,\r\n      status: \"Entered\",\r\n      createdAt: serverTimestamp()\r\n    };\r\n\r\n    if (editingId) {\r\n      await updateDoc(doc(db, \"cobilling\", editingId), saveData);\r\n    } else {\r\n      if (formData.cobillingType === 'Standard') {\r\n        saveData.cobillingNo = `COB${101 + cobilling.length}`;\r\n      }\r\n      await addDoc(collection(db, \"cobilling\"), saveData);\r\n    }\r\n\r\n    this.setState({\r\n      showForm: false,\r\n      editingId: null,\r\n      formData: this.getEmptyCOBillingForm(),\r\n      notes: ''\r\n    });\r\n    this.fetchCOBilling();\r\n  };\r\n\r\n  renderOrderOverlay = () => {\r\n    const { orders, orderOverlaySearch } = this.state;\r\n    const filtered = orders.filter(o =>\r\n      (o.orderNo || '').toLowerCase().includes(orderOverlaySearch.toLowerCase()) ||\r\n      (o.customer || '').toLowerCase().includes(orderOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Customer Order</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by ID or Company...\"\r\n            value={orderOverlaySearch}\r\n            onChange={e => this.setState({ orderOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Company</th>\r\n                  <th>Date</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((o, i) => (\r\n                  <tr key={o.id || i} onClick={() => this.selectOrderForInvoice(o)} style={{ cursor: 'pointer' }}>\r\n                    <td>{o.orderNo}</td>\r\n                    <td>{o.customer}</td>\r\n                    <td>{o.orderDate}</td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={3} className=\"text-center\">No orders found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideOrderOverlay}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTaxOverlay = () => {\r\n    const { taxGroups, currentTaxIdx, formData } = this.state;\r\n    if (currentTaxIdx === null) return null;\r\n    const item = formData.lineItems[currentTaxIdx];\r\n    const selected = new Set(item.taxGroupNames || []);\r\n    return (\r\n      <div style={{\r\n        position: 'fixed', zIndex: 1000, top: '10%', left: '15%',\r\n        background: '#fff', border: '1px solid #ccc', padding: '20px',\r\n        boxShadow: '0 0 10px rgba(0,0,0,0.3)', width: '70%',\r\n        maxHeight: '70vh', overflowY: 'auto'\r\n      }}>\r\n        <h5>Select Tax Groups</h5>\r\n        <table className=\"table table-sm table-bordered\">\r\n          <thead>\r\n            <tr><th></th><th>Group</th><th>Components</th><th>%</th></tr>\r\n          </thead>\r\n          <tbody>\r\n            {taxGroups.map(tg => (\r\n              <tr key={tg.groupName}>\r\n                <td>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selected.has(tg.groupName)}\r\n                    onChange={e =>\r\n                      this.toggleTaxGroupSelection(tg.groupName, currentTaxIdx, e.target.checked)\r\n                    }\r\n                  />\r\n                </td>\r\n                <td>{tg.groupName}</td>\r\n                <td>{tg.lineItems.map(li => li.component).join(', ')}</td>\r\n                <td>{tg.lineItems.map(li => li.percentOrAmt).join(', ')}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n        <div className=\"text-right mt-3\">\r\n          <button className=\"btn btn-sm btn-success\" onClick={() => this.setState({ showTaxOverlay: false, currentTaxIdx: null })}>\r\n            Done\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTabs = () => {\r\n    const { activeTab } = this.state;\r\n    const tabNames = ['Billing Details', 'Commercial Details', 'Notes'];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\" style={{ fontSize: '16px' }}>\r\n        {tabNames.map((tab, idx) => (\r\n          <li className=\"nav-item\" key={tab}>\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link${activeTab === idx ? ' active' : ''}`}\r\n              onClick={() => this.handleTabChange(idx)}\r\n              style={{\r\n                background: activeTab === idx ? '#e9ecef' : '#fff',\r\n                border: '1px solid #dee2e6',\r\n                borderBottom: activeTab === idx ? 'none' : undefined,\r\n                fontWeight: activeTab === idx ? 'bold' : 'normal'\r\n              }}\r\n            >\r\n              {tab}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  renderBillingTab = () => {\r\n    const { formData, showOrderOverlay, showTaxOverlay, currentTaxIdx } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Type</label>\r\n            <select\r\n              className=\"form-control form-control-sm\"\r\n              value={formData.cobillingType}\r\n              onChange={e => this.handleInputChange('cobillingType', e.target.value)}\r\n            >\r\n              <option value=\"Standard\">Standard</option>\r\n              <option value=\"Manual\">Manual</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill No</label>\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control form-control-sm\"\r\n              value={formData.cobillingNo}\r\n              onChange={e => this.handleInputChange('cobillingNo', e.target.value)}\r\n              readOnly={formData.cobillingType === 'Standard'}\r\n              placeholder={formData.cobillingType === 'Standard' ? 'Auto' : 'Enter Bill No'}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control form-control-sm\"\r\n              value={formData.cobillingDate}\r\n              onChange={e => this.handleInputChange('cobillingDate', e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Status</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.status} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Ref No</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.refNo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Customer Order</label>\r\n            <div className=\"input-group input-group-sm\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                value={formData.customerOrderId}\r\n                readOnly\r\n                onClick={this.showOrderOverlay}\r\n                style={{ cursor: 'pointer' }}\r\n              />\r\n              <div className=\"input-group-append\">\r\n                <button className=\"btn btn-outline-secondary btn-sm\" type=\"button\" onClick={this.showOrderOverlay}>Select</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Currency</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.currency} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Conversion Rate</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.conversionRate} onChange={e => this.handleInputChange('conversionRate', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Tax Amount</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.taxAmount} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Value</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.billValue} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"table-responsive mt-3\" style={{ overflowX: 'auto' }}>\r\n          <table className=\"table table-bordered\" style={{ minWidth: 1200 }}>\r\n            <thead>\r\n              <tr>\r\n                <th style={{ position: 'sticky', left: 0, background: '#f9f9f9', zIndex: 2 }}>Item Code</th>\r\n                <th style={{ position: 'sticky', left: 90, width:'100px',background: '#f9f9f9', zIndex: 2 }}>Item Desc</th>\r\n                <th style={{ position: 'sticky', left: 160, background: '#f9f9f9', zIndex: 2 }}>Cust Part Code</th>\r\n                <th>HSN/SAC</th>\r\n                <th>Locator</th>\r\n                <th>UOM</th>\r\n                <th>On Hand</th>\r\n                <th>Unit Price</th>\r\n                <th>Order Qty</th>\r\n                <th>Recv Qty</th>\r\n                <th>Quantity</th>\r\n                <th>Tax Group</th>\r\n                <th>Tax Amt</th>\r\n                <th>Item Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {(formData.lineItems || []).map((item, idx) => (\r\n                <tr key={idx}>\r\n                  <td style={{ position: 'sticky', left: 0, background: '#f9f9f9', zIndex: 1 }}>{item.itemCode}</td>\r\n                  <td style={{ position: 'sticky', left: 90, width:'100px',background: '#f9f9f9', zIndex: 1 }}>{item.itemDescription}</td>\r\n                  <td style={{ position: 'sticky', left: 160, background: '#f9f9f9', zIndex: 1 }}>{item.custPartCode}</td>\r\n                  <td>{item.hsnCode}</td>\r\n                  <td>{item.locator}</td>\r\n                  <td>{item.uom}</td>\r\n                  <td>{item.onHand}</td>\r\n                  <td>{item.unitPrice}</td>\r\n                  <td>{item.orderQty}</td>\r\n                  <td>{item.recvQty}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.qty}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'qty', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-outline-primary btn-sm\"\r\n                      onClick={() => this.setState({ showTaxOverlay: true, currentTaxIdx: idx })}\r\n                    >\r\n                      Select Tax\r\n                    </button>\r\n                    <div style={{ fontSize: '10px', marginTop: '4px' }}>\r\n                      {(item.taxGroupNames || []).join(', ') || '-'}\r\n                    </div>\r\n                  </td>\r\n                  <td>{item.taxAmt}</td>\r\n                  <td>{item.total}</td>\r\n                </tr>\r\n              ))}\r\n              {(!formData.lineItems || formData.lineItems.length === 0) && (\r\n                <tr>\r\n                  <td colSpan=\"14\" className=\"text-center\">No items</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {showOrderOverlay && this.renderOrderOverlay()}\r\n        {showTaxOverlay && this.renderTaxOverlay()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderCommercialTab = () => {\r\n    const { formData } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Despatch Mode</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.despatchMode} onChange={e => this.handleInputChange('despatchMode', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Payment Terms</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.paymentTerms} onChange={e => this.handleInputChange('paymentTerms', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Currency</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.currency} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Freight Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightCharges} onChange={e => this.handleInputChange('freightCharges', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Freight Tax Amount</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freighttaxAmount} onChange={e => this.handleInputChange('freighttaxAmount', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Packing Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.packingCharges} onChange={e => this.handleInputChange('packingCharges', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Bill To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.billTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Ship To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.shipTo} readOnly />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderNotesTab = () => (\r\n    <div>\r\n      <div className=\"form-group\">\r\n        <label>Notes / Remarks</label>\r\n        <textarea className=\"form-control form-control-sm\" rows=\"4\" value={this.state.notes} onChange={this.handleNotesChange} />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  renderForm = () => {\r\n    const { activeTab } = this.state;\r\n    return (\r\n      <div className=\"card full-height\">\r\n        <form className=\"form-sample\" onSubmit={this.handleSubmit}>\r\n          <div style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>\r\n            <h4 className=\"mb-3\">Customer Order Billing</h4>\r\n            {this.renderTabs()}\r\n            {activeTab === 0 && this.renderBillingTab()}\r\n            {activeTab === 1 && this.renderCommercialTab()}\r\n            {activeTab === 2 && this.renderNotesTab()}\r\n            <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n              <button type=\"submit\" className=\"btn btn-success mr-2\">Save Invoice</button>\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={() => this.setState({ showForm: false, editingId: null, formData: this.getEmptyCOBillingForm(), notes: '' })}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Customer Order Billing</h4>\r\n          <button className=\"btn btn-primary\" onClick={() => this.setState({ showForm: true })}>Create</button>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered table-hover\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Bill No</th>\r\n                <th>Customer Order</th>\r\n                <th>Customer</th>\r\n                <th>Date</th>\r\n                <th>Bill Value</th>\r\n                <th>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.cobilling.map((inv, i) => (\r\n                <tr key={i}>\r\n                  <td>{inv.cobillingNo}</td>\r\n                  <td>{inv.customerOrderId}</td>\r\n                  <td>{inv.customer}</td>\r\n                  <td>{inv.cobillingDate}</td>\r\n                  <td>{inv.billValue}</td>\r\n                  <td>{inv.status}</td>\r\n                </tr>\r\n              ))}\r\n              {this.state.cobilling.length === 0 && (\r\n                <tr><td colSpan=\"6\" className=\"text-center\">No cobilling found.</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CustomerOrderBilling;"]},"metadata":{},"sourceType":"module"}