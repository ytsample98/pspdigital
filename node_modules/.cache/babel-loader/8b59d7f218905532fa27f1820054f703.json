{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\invoice\\\\cbill\\\\contractfinalbill.js\";\n// src/app/sales/salestransactions/servicecontract/contractfinalbilling.js\nimport React, { Component } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { db } from \"../../../../../firebase\";\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from \"firebase/firestore\"; // ...existing imports...\n\nimport { format } from 'date-fns'; // ...existing code...\n\nclass ContractFinalBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      contracts: [],\n      taxGroups: [],\n      bills: [],\n      showForm: false,\n      editingId: null,\n      activeTab: 0,\n      showContractOverlay: false,\n      contractOverlaySearch: \"\",\n      formData: this.getEmptyForm(),\n      notes: \"\"\n    };\n\n    this.fetchContracts = async () => {\n      const snap = await getDocs(collection(db, \"contracts\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        contracts: data\n      });\n    };\n\n    this.fetchBills = async () => {\n      const snap = await getDocs(collection(db, \"finalBills\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        bills: data.reverse()\n      });\n    };\n\n    this.fetchTaxGroups = async () => {\n      const snap = await getDocs(collection(db, \"taxGroups\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        taxGroups: data\n      });\n    };\n\n    this.formatAddress = addr => {\n      if (!addr) return '';\n      if (typeof addr === 'string') return addr;\n      return [addr.address, [addr.city, addr.state, addr.country].filter(Boolean).join(', '), addr.zip].filter(Boolean).join('\\n');\n    };\n\n    this.selectContract = c => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          contractId: c.id,\n          contractNo: c.contractNo,\n          customer: c.customer,\n          currency: c.currency,\n          conversionRate: c.conversionRate,\n          stdDays: c.stdDays,\n          amtAgreed: c.amtAgreed,\n          durationFrom: c.contrDurationFrom,\n          durationTo: c.contrDurationTo,\n          scheduleDate: c.scheduleDate || \"\",\n          billTo: this.formatAddress(c.billTo),\n          shipTo: this.formatAddress(c.shipTo),\n          placeOfDelivery: c.placeOfDelivery || \"\",\n          despatchMode: c.despatchMode,\n          paymentTerms: c.paymentTerms,\n          freightCharges: c.freightCharges || \"\",\n          freightPercent: c.freightTaxPercent || \"\",\n          freightTaxAmt: c.freightTaxAmt || \"\",\n          packingCharges: c.packingCharges || \"\",\n          lineItems: (c.lineItems || []).map(li => ({\n            itemCode: li.itemCode,\n            itemDesc: li.itemDesc,\n            hsnNo: li.hsnNo,\n            uom: li.uom,\n            locator: li.locator || \"\",\n            onHand: li.onHand || \"\",\n            billQty: li.qty,\n            unitDayOrWk: li.unitDayOrWk,\n            unitPrice: li.unitPrice,\n            months: li.months,\n            taxGroupNames: li.taxGroupNames || [],\n            taxAmt: li.taxAmt,\n            itemTotal: li.itemTotal,\n            schedule: li.schedule || \"\"\n          }))\n        },\n        showContractOverlay: false\n      }), this.recalculateBillTotals);\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }), () => {\n        if (['freightCharges', 'freightPercent', 'packingCharges', 'conversionRate', 'stdDays', 'amtAgreed'].includes(field)) {\n          this.recalculateBillTotals();\n        }\n      });\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const items = [...this.state.formData.lineItems];\n      items[idx] = { ...items[idx],\n        [field]: value\n      }; // Calculate taxAmt and itemTotal for this line\n\n      let percent = 0;\n      let amount = 0;\n      (items[idx].taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const qty = parseFloat(items[idx].billQty || 0);\n      const unitPrice = parseFloat(items[idx].unitPrice || 0);\n      const months = parseFloat(items[idx].months || 1);\n      const unitDayOrWk = parseFloat(items[idx].unitDayOrWk || 1);\n      const stdDays = parseFloat(this.state.formData.stdDays || 30);\n      const baseTotal = qty * unitDayOrWk * unitPrice * months * stdDays;\n      const taxAmt = baseTotal * percent / 100 + amount;\n      items[idx].taxAmt = taxAmt.toFixed(2);\n      items[idx].itemTotal = (baseTotal + taxAmt).toFixed(2);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: items\n        }\n      }), this.recalculateBillTotals);\n    };\n\n    this.recalculateBillTotals = () => {\n      const {\n        lineItems,\n        freightCharges,\n        freightPercent,\n        packingCharges,\n        conversionRate\n      } = this.state.formData;\n      let billValue = 0;\n      let taxAmt = 0;\n      (lineItems || []).forEach(item => {\n        billValue += parseFloat(item.itemTotal || 0);\n        taxAmt += parseFloat(item.taxAmt || 0);\n      }); // Freight + packing\n\n      const freightTaxAmt = parseFloat(freightCharges || 0) * parseFloat(freightPercent || 0) / 100;\n      billValue += parseFloat(freightCharges || 0) + parseFloat(packingCharges || 0) + freightTaxAmt; // Apply conversion rate if needed\n\n      let finalValue = billValue;\n\n      if (conversionRate) {\n        finalValue = billValue * parseFloat(conversionRate);\n      }\n\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          billValue: finalValue.toFixed(2),\n          taxAmt: taxAmt.toFixed(2),\n          freightTaxAmt: freightTaxAmt.toFixed(2)\n        }\n      }));\n    };\n\n    this.handleTabChange = i => this.setState({\n      activeTab: i\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        bills\n      } = this.state;\n      const saveData = { ...formData,\n        notes: this.state.notes,\n        createdAt: serverTimestamp()\n      };\n\n      if (editingId) {\n        await updateDoc(doc(db, \"finalBills\", editingId), saveData);\n      } else {\n        saveData.billNo = `CB${1000 + bills.length}`;\n        await addDoc(collection(db, \"finalBills\"), saveData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null,\n        formData: this.getEmptyForm(),\n        notes: \"\"\n      });\n      this.fetchBills();\n    };\n\n    this.renderBillingDetailsTab = () => {\n      const f = this.state.formData;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 13\n        }\n      }, \"Bill Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control\",\n        value: f.billType,\n        onChange: e => this.handleInputChange(\"billType\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }\n      }, \"Standard\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 15\n        }\n      }, \"Manual\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }\n      }, \"Bill No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.billNo,\n        readOnly: true,\n        placeholder: \"Auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }\n      }, \"Bill Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.billDate,\n        onChange: e => this.handleInputChange(\"billDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 13\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.status,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }\n      }, \"Ref No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.refNo,\n        onChange: e => this.handleInputChange(\"refNo\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }\n      }, \"Contract\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        placeholder: \"Select Contract\",\n        value: f.contractNo,\n        readOnly: true,\n        onClick: () => this.setState({\n          showContractOverlay: true\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.conversionRate,\n        onChange: e => this.handleInputChange(\"conversionRate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }\n      }, \"Std Days\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.stdDays,\n        onChange: e => this.handleInputChange(\"stdDays\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }\n      }, \"Change Inv Unit Price\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: f.changeInvUnitPrice,\n        onChange: e => this.handleInputChange(\"changeInvUnitPrice\", e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }\n      }, \"Amt Agreed\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.amtAgreed,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }\n      }, \"Duration From\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.durationFrom,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }\n      }, \"Duration To\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.durationTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }\n      }, \"Schedule Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.scheduleDate,\n        onChange: e => this.handleInputChange(\"scheduleDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 13\n        }\n      }, \"Repeat\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: f.repeat,\n        onChange: e => this.handleInputChange(\"repeat\", e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }\n      }, \"Tax Amount (INR)\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.taxAmt,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }\n      }, \"Bill Value (INR)\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.billValue,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderTermsTab = () => {\n      const f = this.state.formData;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control\",\n        value: f.billTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 13\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control\",\n        value: f.shipTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }\n      }, \"Place Of Delivery\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.placeOfDelivery,\n        onChange: e => this.handleInputChange(\"placeOfDelivery\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.despatchMode,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.paymentTerms,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 13\n        }\n      }, \"Freight Charges (INR)\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.freightCharges,\n        onChange: e => this.handleInputChange(\"freightCharges\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }\n      }, \"Freight %\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.freightPercent,\n        onChange: e => this.handleInputChange(\"freightPercent\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }\n      }, \"Freight Tax Amount (INR)\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.freightTaxAmt,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }\n      }, \"Packing Charges (INR)\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.packingCharges,\n        onChange: e => this.handleInputChange(\"packingCharges\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderLineItems = () => {\n      const items = this.state.formData.lineItems || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 15\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 15\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 15\n        }\n      }, \"HSN/SAC\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 15\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 15\n        }\n      }, \"Locator\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 15\n        }\n      }, \"On Hand\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 15\n        }\n      }, \"Bill Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 15\n        }\n      }, \"Unit/Day\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 15\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 15\n        }\n      }, \"Months\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 15\n        }\n      }, \"Tax Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 15\n        }\n      }, \"Tax Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 15\n        }\n      }, \"Item Total\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 15\n        }\n      }, \"Schedule\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }\n      }, items.map((it, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 17\n        }\n      }, it.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 17\n        }\n      }, it.itemDesc), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 17\n        }\n      }, it.hsnNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 17\n        }\n      }, it.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 17\n        }\n      }, it.locator), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 17\n        }\n      }, it.onHand), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.billQty,\n        onChange: e => this.handleLineItemChange(i, \"billQty\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.unitDayOrWk,\n        onChange: e => this.handleLineItemChange(i, \"unitDayOrWk\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.unitPrice,\n        onChange: e => this.handleLineItemChange(i, \"unitPrice\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.months,\n        onChange: e => this.handleLineItemChange(i, \"months\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control\",\n        value: it.taxGroupNames[0] || '',\n        onChange: e => {\n          const val = e.target.value;\n          const arr = val ? [val] : [];\n          this.handleLineItemChange(i, \"taxGroupNames\", arr);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 21\n        }\n      }, \"-Select-\"), this.state.taxGroups.map((tg, idx) => /*#__PURE__*/React.createElement(\"option\", {\n        key: idx,\n        value: tg.groupName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 23\n        }\n      }, tg.groupName)))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 17\n        }\n      }, it.taxAmt), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 17\n        }\n      }, it.itemTotal), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: it.schedule,\n        onChange: e => this.handleLineItemChange(i, \"schedule\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 19\n        }\n      })))))));\n    };\n\n    this.renderTabs = () => {\n      const tabs = [\"Billing Details\", \"Port & Terms\", \"Notes\"];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 7\n        }\n      }, tabs.map((t, i) => /*#__PURE__*/React.createElement(\"li\", {\n        key: i,\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link ${this.state.activeTab === i ? \"active\" : \"\"}`,\n        onClick: () => this.handleTabChange(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }\n      }, t))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 7\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: 2,\n      value: this.state.notes,\n      onChange: e => this.setState({\n        notes: e.target.value\n      }),\n      style: {\n        resize: \"vertical\",\n        minHeight: \"40px\",\n        maxHeight: \"120px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 7\n      }\n    })));\n\n    this.renderForm = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }\n      }, this.renderTabs(), this.state.activeTab === 0 && /*#__PURE__*/React.createElement(React.Fragment, null, this.renderBillingDetailsTab(), this.renderLineItems()), this.state.activeTab === 1 && this.renderTermsTab(), this.state.activeTab === 2 && this.renderNotesTab()), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary ml-2\",\n        type: \"button\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyForm(),\n          notes: \"\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }\n      }, this.state.editingId ? \"Update\" : \"Create\"))));\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 11\n      }\n    }, \"Contract Billing\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 11\n      }\n    }, \"Create\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 596,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 15\n      }\n    }, \"Bill No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 15\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 15\n      }\n    }, \"Contract\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 15\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 15\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 15\n      }\n    }, \"Bill Value\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 15\n      }\n    }, \"Status\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 608,\n        columnNumber: 11\n      }\n    }, this.state.bills.map((b, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link\",\n      onClick: () => this.setState({\n        showForm: true,\n        editingId: b.id,\n        formData: { ...b\n        },\n        notes: b.notes || \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 19\n      }\n    }, b.billNo)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 17\n      }\n    }, b.billDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 17\n      }\n    }, b.contractNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 628,\n        columnNumber: 17\n      }\n    }, b.customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 17\n      }\n    }, b.currency), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 17\n      }\n    }, b.billValue), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 17\n      }\n    }, b.status))))))));\n\n    this.renderContractOverlay = () => {\n      const {\n        contracts,\n        contractOverlaySearch\n      } = this.state;\n      const filtered = contracts.filter(c => (c.contractNo || \"\").toLowerCase().includes(contractOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 11\n        }\n      }, \"Select Contract\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control mb-2\",\n        value: contractOverlaySearch,\n        onChange: e => this.setState({\n          contractOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-sm table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 17\n        }\n      }, \"Contract No\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 17\n        }\n      }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 17\n        }\n      }, \"Value\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 13\n        }\n      }, filtered.map(c => /*#__PURE__*/React.createElement(\"tr\", {\n        key: c.id,\n        style: {\n          cursor: \"pointer\"\n        },\n        onClick: () => this.selectContract(c),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 19\n        }\n      }, c.contractNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 19\n        }\n      }, c.customer), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 19\n        }\n      }, c.contractValue))))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary btn-sm\",\n        onClick: () => this.setState({\n          showContractOverlay: false\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }\n      }, \"Close\")));\n    };\n  }\n\n  getEmptyForm() {\n    return {\n      billType: \"Standard\",\n      billNo: \"\",\n      billDate: new Date().toISOString().split(\"T\")[0],\n      status: \"Entered\",\n      refNo: \"\",\n      contractId: \"\",\n      contractNo: \"\",\n      customer: \"\",\n      currency: \"\",\n      conversionRate: \"\",\n      stdDays: 30,\n      changeInvUnitPrice: false,\n      repeat: false,\n      amtAgreed: \"\",\n      durationFrom: \"\",\n      durationTo: \"\",\n      scheduleDate: \"\",\n      taxAmt: \"\",\n      billValue: \"\",\n      billTo: \"\",\n      shipTo: \"\",\n      placeOfDelivery: \"\",\n      despatchMode: \"\",\n      paymentTerms: \"\",\n      freightCharges: \"\",\n      freightPercent: \"\",\n      freightTaxAmt: \"\",\n      packingCharges: \"\",\n      lineItems: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchContracts();\n    this.fetchBills();\n    this.fetchTaxGroups();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 694,\n        columnNumber: 7\n      }\n    }, this.state.showForm ? this.renderForm() : this.renderTable(), this.state.showContractOverlay && this.renderContractOverlay());\n  }\n\n}\n\nexport default ContractFinalBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/invoice/cbill/contractfinalbill.js"],"names":["React","Component","DatePicker","db","collection","getDocs","addDoc","updateDoc","doc","serverTimestamp","format","ContractFinalBilling","state","contracts","taxGroups","bills","showForm","editingId","activeTab","showContractOverlay","contractOverlaySearch","formData","getEmptyForm","notes","fetchContracts","snap","data","docs","map","d","id","setState","fetchBills","reverse","fetchTaxGroups","formatAddress","addr","address","city","country","filter","Boolean","join","zip","selectContract","c","prev","contractId","contractNo","customer","currency","conversionRate","stdDays","amtAgreed","durationFrom","contrDurationFrom","durationTo","contrDurationTo","scheduleDate","billTo","shipTo","placeOfDelivery","despatchMode","paymentTerms","freightCharges","freightPercent","freightTaxPercent","freightTaxAmt","packingCharges","lineItems","li","itemCode","itemDesc","hsnNo","uom","locator","onHand","billQty","qty","unitDayOrWk","unitPrice","months","taxGroupNames","taxAmt","itemTotal","schedule","recalculateBillTotals","handleInputChange","field","value","includes","handleLineItemChange","idx","items","percent","amount","forEach","groupName","group","find","t","Array","isArray","comp","val","parseFloat","percentOrAmt","type","baseTotal","toFixed","billValue","item","finalValue","handleTabChange","i","handleSubmit","e","preventDefault","saveData","createdAt","billNo","length","renderBillingDetailsTab","f","billType","target","billDate","status","refNo","changeInvUnitPrice","checked","repeat","renderTermsTab","renderLineItems","it","arr","tg","renderTabs","tabs","renderNotesTab","resize","minHeight","maxHeight","renderForm","renderTable","b","renderContractOverlay","filtered","toLowerCase","cursor","contractValue","Date","toISOString","split","componentDidMount","render"],"mappings":"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","sourcesContent":["// src/app/sales/salestransactions/servicecontract/contractfinalbilling.js\r\nimport React, { Component } from \"react\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { db } from \"../../../../../firebase\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  doc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\n\r\n// ...existing imports...\r\nimport { format } from 'date-fns';\r\n\r\n// ...existing code...\r\n\r\nclass ContractFinalBilling extends Component {\r\n  state = {\r\n    contracts: [],\r\n    taxGroups: [],\r\n    bills: [],\r\n    showForm: false,\r\n    editingId: null,\r\n    activeTab: 0,\r\n    showContractOverlay: false,\r\n    contractOverlaySearch: \"\",\r\n    formData: this.getEmptyForm(),\r\n    notes: \"\",\r\n  };\r\n\r\n  getEmptyForm() {\r\n    return {\r\n      billType: \"Standard\",\r\n      billNo: \"\",\r\n      billDate: new Date().toISOString().split(\"T\")[0],\r\n      status: \"Entered\",\r\n      refNo: \"\",\r\n      contractId: \"\",\r\n      contractNo: \"\",\r\n      customer: \"\",\r\n      currency: \"\",\r\n      conversionRate: \"\",\r\n      stdDays: 30,\r\n      changeInvUnitPrice: false,\r\n      repeat: false,\r\n      amtAgreed: \"\",\r\n      durationFrom: \"\",\r\n      durationTo: \"\",\r\n      scheduleDate: \"\",\r\n      taxAmt: \"\",\r\n      billValue: \"\",\r\n      billTo: \"\",\r\n      shipTo: \"\",\r\n      placeOfDelivery: \"\",\r\n      despatchMode: \"\",\r\n      paymentTerms: \"\",\r\n      freightCharges: \"\",\r\n      freightPercent: \"\",\r\n      freightTaxAmt: \"\",\r\n      packingCharges: \"\",\r\n      lineItems: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchContracts();\r\n    this.fetchBills();\r\n    this.fetchTaxGroups();\r\n  }\r\n\r\n  fetchContracts = async () => {\r\n    const snap = await getDocs(collection(db, \"contracts\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ contracts: data });\r\n  };\r\n\r\n  fetchBills = async () => {\r\n    const snap = await getDocs(collection(db, \"finalBills\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ bills: data.reverse() });\r\n  };\r\n\r\n  fetchTaxGroups = async () => {\r\n    const snap = await getDocs(collection(db, \"taxGroups\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ taxGroups: data });\r\n  };\r\n\r\n  formatAddress = (addr) => {\r\n    if (!addr) return '';\r\n    if (typeof addr === 'string') return addr;\r\n    return [\r\n      addr.address,\r\n      [addr.city, addr.state, addr.country].filter(Boolean).join(', '),\r\n      addr.zip\r\n    ].filter(Boolean).join('\\n');\r\n  };\r\n\r\n  selectContract = (c) => {\r\n    this.setState((prev) => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        contractId: c.id,\r\n        contractNo: c.contractNo,\r\n        customer: c.customer,\r\n        currency: c.currency,\r\n        conversionRate: c.conversionRate,\r\n        stdDays: c.stdDays,\r\n        amtAgreed: c.amtAgreed,\r\n        durationFrom: c.contrDurationFrom,\r\n        durationTo: c.contrDurationTo,\r\n        scheduleDate: c.scheduleDate || \"\",\r\n        billTo: this.formatAddress(c.billTo),\r\n        shipTo: this.formatAddress(c.shipTo),\r\n        placeOfDelivery: c.placeOfDelivery || \"\",\r\n        despatchMode: c.despatchMode,\r\n        paymentTerms: c.paymentTerms,\r\n        freightCharges: c.freightCharges || \"\",\r\n        freightPercent: c.freightTaxPercent || \"\",\r\n        freightTaxAmt: c.freightTaxAmt || \"\",\r\n        packingCharges: c.packingCharges || \"\",\r\n        lineItems: (c.lineItems || []).map((li) => ({\r\n          itemCode: li.itemCode,\r\n          itemDesc: li.itemDesc,\r\n          hsnNo: li.hsnNo,\r\n          uom: li.uom,\r\n          locator: li.locator || \"\",\r\n          onHand: li.onHand || \"\",\r\n          billQty: li.qty,\r\n          unitDayOrWk: li.unitDayOrWk,\r\n          unitPrice: li.unitPrice,\r\n          months: li.months,\r\n          taxGroupNames: li.taxGroupNames || [],\r\n          taxAmt: li.taxAmt,\r\n          itemTotal: li.itemTotal,\r\n          schedule: li.schedule || \"\",\r\n        })),\r\n      },\r\n      showContractOverlay: false,\r\n    }), this.recalculateBillTotals);\r\n  };\r\n\r\n  handleInputChange = (field, value) => {\r\n    this.setState((prev) => ({\r\n      formData: { ...prev.formData, [field]: value },\r\n    }), () => {\r\n      if ([\r\n        'freightCharges', 'freightPercent', 'packingCharges', 'conversionRate',\r\n        'stdDays', 'amtAgreed'\r\n      ].includes(field)) {\r\n        this.recalculateBillTotals();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    const items = [...this.state.formData.lineItems];\r\n    items[idx] = { ...items[idx], [field]: value };\r\n\r\n    // Calculate taxAmt and itemTotal for this line\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (items[idx].taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const qty = parseFloat(items[idx].billQty || 0);\r\n    const unitPrice = parseFloat(items[idx].unitPrice || 0);\r\n    const months = parseFloat(items[idx].months || 1);\r\n    const unitDayOrWk = parseFloat(items[idx].unitDayOrWk || 1);\r\n    const stdDays = parseFloat(this.state.formData.stdDays || 30);\r\n    const baseTotal = qty * unitDayOrWk * unitPrice * months * stdDays;\r\n    const taxAmt = ((baseTotal * percent) / 100 + amount);\r\n    items[idx].taxAmt = taxAmt.toFixed(2);\r\n    items[idx].itemTotal = (baseTotal + taxAmt).toFixed(2);\r\n\r\n    this.setState((prev) => ({\r\n      formData: { ...prev.formData, lineItems: items },\r\n    }), this.recalculateBillTotals);\r\n  };\r\n\r\nrecalculateBillTotals = () => {\r\n  const { lineItems, freightCharges, freightPercent, packingCharges, conversionRate } = this.state.formData;\r\n  let billValue = 0;\r\n  let taxAmt = 0;\r\n  (lineItems || []).forEach(item => {\r\n    billValue += parseFloat(item.itemTotal || 0);\r\n    taxAmt += parseFloat(item.taxAmt || 0);\r\n  });\r\n\r\n  // Freight + packing\r\n  const freightTaxAmt = (parseFloat(freightCharges || 0) * parseFloat(freightPercent || 0)) / 100;\r\n  billValue += parseFloat(freightCharges || 0) + parseFloat(packingCharges || 0) + freightTaxAmt;\r\n\r\n  // Apply conversion rate if needed\r\n  let finalValue = billValue;\r\n  if (conversionRate) {\r\n    finalValue = billValue * parseFloat(conversionRate);\r\n  }\r\n\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      billValue: finalValue.toFixed(2),\r\n      taxAmt: taxAmt.toFixed(2),\r\n      freightTaxAmt: freightTaxAmt.toFixed(2)\r\n    }\r\n  }));\r\n};\r\n\r\n  handleTabChange = (i) => this.setState({ activeTab: i });\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { editingId, formData, bills } = this.state;\r\n    const saveData = {\r\n      ...formData,\r\n      notes: this.state.notes,\r\n      createdAt: serverTimestamp(),\r\n    };\r\n    if (editingId) {\r\n      await updateDoc(doc(db, \"finalBills\", editingId), saveData);\r\n    } else {\r\n      saveData.billNo = `CB${1000 + bills.length}`;\r\n      await addDoc(collection(db, \"finalBills\"), saveData);\r\n    }\r\n    this.setState({\r\n      showForm: false,\r\n      editingId: null,\r\n      formData: this.getEmptyForm(),\r\n      notes: \"\",\r\n    });\r\n    this.fetchBills();\r\n  };\r\n\r\n  renderBillingDetailsTab = () => {\r\n    const f = this.state.formData;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Type</label>\r\n            <select\r\n              className=\"form-control\"\r\n              value={f.billType}\r\n              onChange={(e) => this.handleInputChange(\"billType\", e.target.value)}\r\n            >\r\n              <option value=\"Standard\">Standard</option>\r\n              <option value=\"Manual\">Manual</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill No</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={f.billNo}\r\n              readOnly\r\n              placeholder=\"Auto\"\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Bill Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              value={f.billDate}\r\n              onChange={(e) => this.handleInputChange(\"billDate\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Status</label>\r\n            <input className=\"form-control\" value={f.status} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Ref No</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={f.refNo}\r\n              onChange={(e) => this.handleInputChange(\"refNo\", e.target.value)}\r\n            />\r\n          </div>\r\n          \r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Contract</label>\r\n            <input\r\n              className=\"form-control\"\r\n              placeholder=\"Select Contract\"\r\n              value={f.contractNo}\r\n              readOnly\r\n              onClick={() => this.setState({ showContractOverlay: true })}\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"form-group col-md-2\">\r\n            <label>Currency</label>\r\n            <input className=\"form-control\" value={f.currency} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Conversion Rate</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.conversionRate} onChange={e => this.handleInputChange(\"conversionRate\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Std Days</label>\r\n            <input type=\"number\" className=\"form-control\" value={f.stdDays} onChange={e => this.handleInputChange(\"stdDays\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Change Inv Unit Price</label>\r\n            <input type=\"checkbox\" checked={f.changeInvUnitPrice} onChange={e => this.handleInputChange(\"changeInvUnitPrice\", e.target.checked)} />\r\n          </div>\r\n          \r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Amt Agreed</label>\r\n            <input className=\"form-control\" value={f.amtAgreed} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Duration From</label>\r\n            <input type=\"date\" className=\"form-control\" value={f.durationFrom} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Duration To</label>\r\n            <input type=\"date\" className=\"form-control\" value={f.durationTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Schedule Date</label>\r\n            <input className=\"form-control\" value={f.scheduleDate} onChange={e => this.handleInputChange(\"scheduleDate\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-mb-2\">\r\n            <label>Repeat</label>\r\n            <input type=\"checkbox\" checked={f.repeat} onChange={e => this.handleInputChange(\"repeat\", e.target.checked)} />\r\n          </div>\r\n          </div>\r\n          <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Tax Amount (INR)</label>\r\n            <input className=\"form-control\" value={f.taxAmt} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Bill Value (INR)</label>\r\n            <input className=\"form-control\" value={f.billValue} readOnly />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTermsTab = () => {\r\n    const f = this.state.formData;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Bill To</label>\r\n            <textarea className=\"form-control\" value={f.billTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Ship To</label>\r\n            <textarea className=\"form-control\" value={f.shipTo} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Place Of Delivery</label>\r\n            <input className=\"form-control\" value={f.placeOfDelivery} onChange={e => this.handleInputChange(\"placeOfDelivery\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Despatch Mode</label>\r\n            <input className=\"form-control\" value={f.despatchMode} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Payment Terms</label>\r\n            <input className=\"form-control\" value={f.paymentTerms} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Charges (INR)</label>\r\n            <input className=\"form-control\" value={f.freightCharges} onChange={e => this.handleInputChange(\"freightCharges\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight %</label>\r\n            <input className=\"form-control\" value={f.freightPercent} onChange={e => this.handleInputChange(\"freightPercent\", e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax Amount (INR)</label>\r\n            <input className=\"form-control\" value={f.freightTaxAmt} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Packing Charges (INR)</label>\r\n            <input className=\"form-control\" value={f.packingCharges} onChange={e => this.handleInputChange(\"packingCharges\", e.target.value)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderLineItems = () => {\r\n    const items = this.state.formData.lineItems || [];\r\n    return (\r\n      <div className=\"table-responsive\">\r\n        <table className=\"table table-bordered\">\r\n          <thead>\r\n            <tr>\r\n              <th>Item Code</th>\r\n              <th>Item Desc</th>\r\n              <th>HSN/SAC</th>\r\n              <th>UOM</th>\r\n              <th>Locator</th>\r\n              <th>On Hand</th>\r\n              <th>Bill Qty</th>\r\n              <th>Unit/Day</th>\r\n              <th>Unit Price</th>\r\n              <th>Months</th>\r\n              <th>Tax Group</th>\r\n              <th>Tax Amount</th>\r\n              <th>Item Total</th>\r\n              <th>Schedule</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map((it, i) => (\r\n              <tr key={i}>\r\n                <td>{it.itemCode}</td>\r\n                <td>{it.itemDesc}</td>\r\n                <td>{it.hsnNo}</td>\r\n                <td>{it.uom}</td>\r\n                <td>{it.locator}</td>\r\n                <td>{it.onHand}</td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={it.billQty}\r\n                    onChange={(e) =>\r\n                      this.handleLineItemChange(i, \"billQty\", e.target.value)\r\n                    }\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={it.unitDayOrWk}\r\n                    onChange={(e) =>\r\n                      this.handleLineItemChange(i, \"unitDayOrWk\", e.target.value)\r\n                    }\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={it.unitPrice}\r\n                    onChange={(e) =>\r\n                      this.handleLineItemChange(i, \"unitPrice\", e.target.value)\r\n                    }\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    value={it.months}\r\n                    onChange={(e) =>\r\n                      this.handleLineItemChange(i, \"months\", e.target.value)\r\n                    }\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <select\r\n                    className=\"form-control\"\r\n                    value={it.taxGroupNames[0] || ''}\r\n                    onChange={e => {\r\n                      const val = e.target.value;\r\n                      const arr = val ? [val] : [];\r\n                      this.handleLineItemChange(i, \"taxGroupNames\", arr);\r\n                    }}\r\n                  >\r\n                    <option value=\"\">-Select-</option>\r\n                    {this.state.taxGroups.map((tg, idx) => (\r\n                      <option key={idx} value={tg.groupName}>{tg.groupName}</option>\r\n                    ))}\r\n                  </select>\r\n                </td>\r\n                <td>{it.taxAmt}</td>\r\n                <td>{it.itemTotal}</td>\r\n                <td>\r\n                  <input\r\n                    className=\"form-control\"\r\n                    value={it.schedule}\r\n                    onChange={(e) =>\r\n                      this.handleLineItemChange(i, \"schedule\", e.target.value)\r\n                    }\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTabs = () => {\r\n    const tabs = [\"Billing Details\", \"Port & Terms\", \"Notes\"];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\">\r\n        {tabs.map((t, i) => (\r\n          <li key={i} className=\"nav-item\">\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link ${this.state.activeTab === i ? \"active\" : \"\"}`}\r\n              onClick={() => this.handleTabChange(i)}\r\n            >\r\n              {t}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\nrenderNotesTab = () => (\r\n  <div>\r\n    <div className=\"form-group\">\r\n      <label>Notes / Remarks</label>\r\n      <textarea\r\n        className=\"form-control form-control-sm\"\r\n        rows={2}\r\n        value={this.state.notes}\r\n        onChange={e => this.setState({ notes: e.target.value })}\r\n        style={{ resize: \"vertical\", minHeight: \"40px\", maxHeight: \"120px\" }}\r\n      />\r\n    </div>\r\n  </div>\r\n);\r\n  renderForm = () => {\r\n    return (\r\n      <div className=\"card full-height\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <div className=\"card-body\">\r\n            {this.renderTabs()}\r\n            {this.state.activeTab === 0 && (\r\n              <>\r\n                {this.renderBillingDetailsTab()}\r\n                {this.renderLineItems()}\r\n              </>\r\n            )}\r\n            {this.state.activeTab === 1 && this.renderTermsTab()}\r\n            {this.state.activeTab === 2 && this.renderNotesTab()}\r\n          </div>\r\n              <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n            \r\n            <button\r\n              className=\"btn btn-secondary ml-2\"\r\n              type=\"button\"\r\n              onClick={() =>\r\n                this.setState({\r\n                  showForm: false,\r\n                  editingId: null,\r\n                  formData: this.getEmptyForm(),\r\n                  notes: \"\",\r\n                })\r\n              }\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button className=\"btn btn-success\" type=\"submit\">\r\n              {this.state.editingId ? \"Update\" : \"Create\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Contract Billing</h4>\r\n          <button className=\"btn btn-primary\" onClick={() => this.setState({ showForm: true })}>Create</button>\r\n        </div>\r\n              <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered table-hover\">\r\n            <thead className=\"thead-light\">\r\n            <tr>\r\n              <th>Bill No</th>\r\n              <th>Date</th>\r\n              <th>Contract</th>\r\n              <th>Customer</th>\r\n              <th>Currency</th>\r\n              <th>Bill Value</th>\r\n              <th>Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.bills.map((b, i) => (\r\n              <tr key={i}>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-link\"\r\n                    onClick={() =>\r\n                      this.setState({\r\n                        showForm: true,\r\n                        editingId: b.id,\r\n                        formData: { ...b },\r\n                        notes: b.notes || \"\",\r\n                      })\r\n                    }\r\n                  >\r\n                    {b.billNo}\r\n                  </button>\r\n                </td>\r\n                <td>{b.billDate}</td>\r\n                <td>{b.contractNo}</td>\r\n                <td>{b.customer}</td>\r\n                <td>{b.currency}</td>\r\n                <td>{b.billValue}</td>\r\n                <td>{b.status}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  );\r\n\r\n  renderContractOverlay = () => {\r\n    const { contracts, contractOverlaySearch } = this.state;\r\n    const filtered = contracts.filter((c) =>\r\n      (c.contractNo || \"\")\r\n        .toLowerCase()\r\n        .includes(contractOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <h5>Select Contract</h5>\r\n          <input\r\n            className=\"form-control mb-2\"\r\n            value={contractOverlaySearch}\r\n            onChange={(e) =>\r\n              this.setState({ contractOverlaySearch: e.target.value })\r\n            }\r\n          />\r\n          <table className=\"table table-sm table-bordered\">\r\n            <thead>\r\n              <tr>\r\n                <th>Contract No</th>\r\n                <th>Customer</th>\r\n                <th>Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filtered.map((c) => (\r\n                <tr\r\n                  key={c.id}\r\n                  style={{ cursor: \"pointer\" }}\r\n                  onClick={() => this.selectContract(c)}\r\n                >\r\n                  <td>{c.contractNo}</td>\r\n                  <td>{c.customer}</td>\r\n                  <td>{c.contractValue}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <button\r\n            className=\"btn btn-secondary btn-sm\"\r\n            onClick={() => this.setState({ showContractOverlay: false })}\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n        {this.state.showContractOverlay && this.renderContractOverlay()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContractFinalBilling;\r\n"]},"metadata":{},"sourceType":"module"}