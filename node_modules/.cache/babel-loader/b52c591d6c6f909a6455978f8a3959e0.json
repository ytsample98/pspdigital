{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\inventory\\\\invmaster\\\\CurrencyPage.js\";\nimport React, { Component } from 'react';\nimport { db } from '../../../firebase';\nimport { collection, addDoc, getDocs, updateDoc, deleteDoc, doc } from 'firebase/firestore';\nimport staticRates from '../../../assets/currencyRates.json';\n\nclass CurrencyPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currencies: [],\n      formData: {\n        name: '',\n        code: '',\n        conversionRate: ''\n      },\n      editingId: null,\n      loading: false\n    };\n\n    this.componentDidMount = async () => {\n      this.fetchCurrencies();\n    };\n\n    this.fetchCurrencies = async () => {\n      const snap = await getDocs(collection(db, 'currencies'));\n      const currencies = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        currencies\n      });\n    };\n\n    this.syncStaticRates = async () => {\n      try {\n        this.setState({\n          loading: true\n        }); // Remove old\n\n        const existingSnap = await getDocs(collection(db, 'currencies'));\n        const deletePromises = existingSnap.docs.map(d => deleteDoc(doc(db, 'currencies', d.id)));\n        await Promise.all(deletePromises); // Add static rates\n\n        await Promise.all(Object.entries(staticRates.rates).map(([code, rate]) => addDoc(collection(db, 'currencies'), {\n          code,\n          name: code,\n          conversionRate: rate,\n          base: staticRates.base || 'INR'\n        })));\n        alert('Static rates loaded!');\n        this.fetchCurrencies();\n      } catch (err) {\n        alert('Error loading static rates');\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      const {\n        name,\n        value\n      } = e.target;\n      this.setState({\n        formData: { ...this.state.formData,\n          [name]: value\n        }\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        name,\n        code,\n        conversionRate\n      } = this.state.formData;\n      if (!name || !code || !conversionRate) return alert('Fill all fields');\n\n      if (this.state.editingId) {\n        await updateDoc(doc(db, 'currencies', this.state.editingId), {\n          name,\n          code,\n          conversionRate: parseFloat(conversionRate),\n          base: 'INR'\n        });\n        alert('Updated!');\n      } else {\n        await addDoc(collection(db, 'currencies'), {\n          name,\n          code,\n          conversionRate: parseFloat(conversionRate),\n          base: 'INR'\n        });\n        alert('Added!');\n      }\n\n      this.setState({\n        formData: {\n          name: '',\n          code: '',\n          conversionRate: ''\n        },\n        editingId: null\n      });\n      this.fetchCurrencies();\n    };\n\n    this.handleEdit = cur => {\n      this.setState({\n        formData: {\n          name: cur.name,\n          code: cur.code,\n          conversionRate: cur.conversionRate\n        },\n        editingId: cur.id\n      });\n    };\n\n    this.handleDelete = async id => {\n      if (window.confirm('Delete this currency?')) {\n        await deleteDoc(doc(db, 'currencies', id));\n        this.fetchCurrencies();\n      }\n    };\n  }\n\n  render() {\n    const {\n      currencies,\n      formData,\n      loading,\n      searchTerm = ''\n    } = this.state;\n    const filteredCurrencies = currencies.filter(c => (c.name || '').toLowerCase().includes(searchTerm.toLowerCase()) || (c.code || '').toLowerCase().includes(searchTerm.toLowerCase()));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, \"Currency Master (Base: INR)\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.syncLiveRates,\n      className: \"btn btn-success btn-sm\",\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, loading ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"spinner-border spinner-border-sm mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }), \"Syncing...\") : 'Sync Live Rates')), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row g-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"name\",\n      placeholder: \"Currency Name\",\n      value: formData.name,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"code\",\n      placeholder: \"Code (USD)\",\n      value: formData.code,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.0001\",\n      className: \"form-control\",\n      name: \"conversionRate\",\n      placeholder: \"Rate vs INR\",\n      value: formData.conversionRate,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, this.state.editingId ? 'Update' : 'Add')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Search currency...\",\n      value: searchTerm,\n      onChange: e => this.setState({\n        searchTerm: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-sm table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, \"Rate (1 unit = ? INR)\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, filteredCurrencies.length > 0 ? filteredCurrencies.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }, i + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 23\n      }\n    }, c.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 23\n      }\n    }, c.code), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 23\n      }\n    }, c.conversionRate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-info me-2\",\n      onClick: () => this.handleEdit(c),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 25\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-danger\",\n      onClick: () => this.handleDelete(c.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, \"Delete\")))) : /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    }, \"No data found\"))))))));\n  }\n\n}\n\nexport default CurrencyPage;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/inventory/invmaster/CurrencyPage.js"],"names":["React","Component","db","collection","addDoc","getDocs","updateDoc","deleteDoc","doc","staticRates","CurrencyPage","state","currencies","formData","name","code","conversionRate","editingId","loading","componentDidMount","fetchCurrencies","snap","docs","map","d","id","data","setState","syncStaticRates","existingSnap","deletePromises","Promise","all","Object","entries","rates","rate","base","alert","err","handleChange","e","value","target","handleSubmit","preventDefault","parseFloat","handleEdit","cur","handleDelete","window","confirm","render","searchTerm","filteredCurrencies","filter","c","toLowerCase","includes","syncLiveRates","length","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { db } from '../../../firebase';\r\nimport { collection, addDoc, getDocs, updateDoc, deleteDoc, doc } from 'firebase/firestore';\r\nimport staticRates from '../../../assets/currencyRates.json';\r\nclass CurrencyPage extends Component {\r\n  state = {\r\n    currencies: [],\r\n    formData: { name: '', code: '', conversionRate: '' },\r\n    editingId: null,\r\n    loading: false,\r\n  };\r\n\r\n  componentDidMount = async () => {\r\n    this.fetchCurrencies();\r\n  };\r\n\r\n  fetchCurrencies = async () => {\r\n    const snap = await getDocs(collection(db, 'currencies'));\r\n    const currencies = snap.docs.map(d => ({ id: d.id, ...d.data() }));\r\n    this.setState({ currencies });\r\n  };\r\n\r\nsyncStaticRates = async () => {\r\n  try {\r\n    this.setState({ loading: true });\r\n    // Remove old\r\n    const existingSnap = await getDocs(collection(db, 'currencies'));\r\n    const deletePromises = existingSnap.docs.map(d => deleteDoc(doc(db, 'currencies', d.id)));\r\n    await Promise.all(deletePromises);\r\n\r\n    // Add static rates\r\n    await Promise.all(Object.entries(staticRates.rates).map(([code, rate]) =>\r\n      addDoc(collection(db, 'currencies'), {\r\n        code,\r\n        name: code,\r\n        conversionRate: rate,\r\n        base: staticRates.base || 'INR',\r\n      })\r\n    ));\r\n\r\n    alert('Static rates loaded!');\r\n    this.fetchCurrencies();\r\n  } catch (err) {\r\n    alert('Error loading static rates');\r\n  } finally {\r\n    this.setState({ loading: false });\r\n  }\r\n};\r\n\r\n  handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    this.setState({ formData: { ...this.state.formData, [name]: value } });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { name, code, conversionRate } = this.state.formData;\r\n    if (!name || !code || !conversionRate) return alert('Fill all fields');\r\n\r\n    if (this.state.editingId) {\r\n      await updateDoc(doc(db, 'currencies', this.state.editingId), {\r\n        name, code, conversionRate: parseFloat(conversionRate), base: 'INR'\r\n      });\r\n      alert('Updated!');\r\n    } else {\r\n      await addDoc(collection(db, 'currencies'), {\r\n        name, code, conversionRate: parseFloat(conversionRate), base: 'INR'\r\n      });\r\n      alert('Added!');\r\n    }\r\n\r\n    this.setState({ formData: { name: '', code: '', conversionRate: '' }, editingId: null });\r\n    this.fetchCurrencies();\r\n  };\r\n\r\n  handleEdit = (cur) => {\r\n    this.setState({ formData: { name: cur.name, code: cur.code, conversionRate: cur.conversionRate }, editingId: cur.id });\r\n  };\r\n\r\n  handleDelete = async (id) => {\r\n    if (window.confirm('Delete this currency?')) {\r\n      await deleteDoc(doc(db, 'currencies', id));\r\n      this.fetchCurrencies();\r\n    }\r\n  };\r\n\r\nrender() {\r\n  const { currencies, formData, loading, searchTerm = '' } = this.state;\r\n  const filteredCurrencies = currencies.filter(c =>\r\n    (c.name || '').toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    (c.code || '').toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <div className=\"container-fluid mt-3\">\r\n      <div className=\"card full-height\">\r\n        <div className=\"card-body\">\r\n          <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <h4 className=\"card-title mb-0\">Currency Master (Base: INR)</h4>\r\n            <button\r\n              onClick={this.syncLiveRates}\r\n              className=\"btn btn-success btn-sm\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <span>\r\n                  <span className=\"spinner-border spinner-border-sm mr-2\"></span>\r\n                  Syncing...\r\n                </span>\r\n              ) : 'Sync Live Rates'}\r\n            </button>\r\n          </div>\r\n\r\n          <form onSubmit={this.handleSubmit} className=\"mb-3\">\r\n            <div className=\"row g-2\">\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  name=\"name\"\r\n                  placeholder=\"Currency Name\"\r\n                  value={formData.name}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  name=\"code\"\r\n                  placeholder=\"Code (USD)\"\r\n                  value={formData.code}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.0001\"\r\n                  className=\"form-control\"\r\n                  name=\"conversionRate\"\r\n                  placeholder=\"Rate vs INR\"\r\n                  value={formData.conversionRate}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-2\">\r\n                <button className=\"btn btn-primary w-100\">\r\n                  {this.state.editingId ? 'Update' : 'Add'}\r\n                </button>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Search currency...\"\r\n                  value={searchTerm}\r\n                  onChange={e => this.setState({ searchTerm: e.target.value })}\r\n                />\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-sm table-bordered table-hover\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th>#</th>\r\n                  <th>Currency</th>\r\n                  <th>Code</th>\r\n                  <th>Rate (1 unit = ? INR)</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredCurrencies.length > 0 ? (\r\n                  filteredCurrencies.map((c, i) => (\r\n                    <tr key={c.id}>\r\n                      <td>{i + 1}</td>\r\n                      <td>{c.name}</td>\r\n                      <td>{c.code}</td>\r\n                      <td>{c.conversionRate}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-sm btn-info me-2\"\r\n                          onClick={() => this.handleEdit(c)}\r\n                        >Edit</button>\r\n                        <button\r\n                          className=\"btn btn-sm btn-danger\"\r\n                          onClick={() => this.handleDelete(c.id)}\r\n                        >Delete</button>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr><td colSpan=\"5\">No data found</td></tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n}\r\n\r\nexport default CurrencyPage;\r\n"]},"metadata":{},"sourceType":"module"}