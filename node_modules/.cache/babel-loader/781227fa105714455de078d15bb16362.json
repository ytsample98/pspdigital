{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\servicecontract\\\\servicecontractbilling.js\";\nimport React, { Component } from 'react';\nimport { Form } from 'react-bootstrap';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { db } from '../../../../firebase';\nimport { Modal, Button } from 'react-bootstrap';\nimport { collection, query, where, getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\n\nclass ContractBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      contracts: [],\n      customers: [],\n      products: [],\n      taxGroups: [],\n      users: [],\n      showTaxOverlay: false,\n      activeTab: 0,\n      showForm: false,\n      editingId: null,\n      durationFrom: null,\n      durationTo: null,\n      canAddItems: false,\n      showProductOverlay: false,\n      productOverlaySearch: '',\n      selectedProductIds: [],\n      formData: this.getEmptyContractForm(),\n      notes: '',\n      showCustomerOrderOverlay: false,\n      customerOrderOverlaySearch: '',\n      selectedCustomerOrders: [],\n      customerOrders: [],\n      customerOrderLineItems: [],\n      showAlert: false,\n      alertMsg: ''\n    };\n\n    this.fetchContracts = async () => {\n      const snap = await getDocs(collection(db, 'contracts'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        contracts: data.reverse()\n      });\n    };\n\n    this.fetchCustomers = async () => {\n      const snap = await getDocs(collection(db, 'customers'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        customers: data\n      });\n    };\n\n    this.fetchCustomerOrders = async customerId => {\n      try {\n        if (!customerId) return; // Query the 'orders' collection for orders matching this customer\n\n        const q = query(collection(db, 'orders'), where('customerId', '==', customerId));\n        const snap = await getDocs(q);\n        const orders = snap.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        })); // Save the orders so you can show them in a dropdown/overlay\n\n        this.setState({\n          customerOrders: orders\n        });\n      } catch (error) {\n        console.error('Error fetching customer orders:', error);\n        alert('Failed to fetch customer orders: ' + error.message);\n      }\n    };\n\n    this.fetchProducts = async () => {\n      const snap = await getDocs(collection(db, 'products'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        products: data\n      });\n    };\n\n    this.fetchUsers = async () => {\n      const snap = await getDocs(collection(db, 'users'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        users: data\n      });\n    };\n\n    this.fetchTaxGroups = async () => {\n      const snap = await getDocs(collection(db, 'taxGroups'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        taxGroups: data\n      });\n    };\n\n    this.checkDurationSelected = () => {\n      const {\n        durationFrom,\n        durationTo\n      } = this.state;\n      this.setState({\n        canAddItems: !!(durationFrom && durationTo)\n      });\n    };\n\n    this.showProductOverlay = () => this.setState({\n      showProductOverlay: true,\n      productOverlaySearch: '',\n      selectedProductIds: []\n    });\n\n    this.hideProductOverlay = () => this.setState({\n      showProductOverlay: false,\n      productOverlaySearch: '',\n      selectedProductIds: []\n    });\n\n    this.toggleProductSelection = (productId, checked) => {\n      this.setState(prev => ({\n        selectedProductIds: checked ? [...prev.selectedProductIds, productId] : prev.selectedProductIds.filter(id => id !== productId)\n      }));\n    };\n\n    this.addSelectedProductsToLineItems = () => {\n      const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\n      const newItems = selectedProducts.map(product => ({\n        itemCode: product.productId || '',\n        itemDesc: product.ptdescription || '',\n        hsnCode: product.hsnCode || '',\n        qty: 1,\n        unitDayOrWk: 1,\n        unitPrice: product.price || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, ...newItems]\n        },\n        showProductOverlay: false,\n        selectedProductIds: []\n      }), this.recalculateContractTotals);\n    };\n\n    this.showCustomerOverlay = () => this.setState({\n      showCustomerOverlay: true,\n      customerOverlaySearch: ''\n    });\n\n    this.hideCustomerOverlay = () => this.setState({\n      showCustomerOverlay: false,\n      customerOverlaySearch: ''\n    });\n\n    this.showCustomerOrderOverlay = () => this.setState({\n      showCustomerOrderOverlay: true,\n      customerOrderOverlaySearch: ''\n    });\n\n    this.ideCustomerOrderOverlay = () => this.setState({\n      showCustomerOrderOverlay: false,\n      customerOrderOverlaySearch: ''\n    });\n\n    this.formatAddress = addr => {\n      if (!addr) return '';\n      if (typeof addr === 'string') return addr;\n      return [addr.address, [addr.city, addr.state, addr.country].filter(Boolean).join(', '), addr.zip].filter(Boolean).join('\\n');\n    };\n\n    this.selectCustomer = customer => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          customer: customer.custname,\n          currency: customer.currency || '',\n          billTo: this.formatAddress(customer.billTo),\n          shipTo: this.formatAddress(customer.shipTo),\n          despatchMode: customer.despatchMode || '',\n          paymentTerms: customer.paymentTerms || '',\n          customerOrderId: ''\n        },\n        showCustomerOverlay: false,\n        customerOrderLineItems: []\n      }), () => {\n        this.fetchCustomerOrders(customer.id);\n      });\n    };\n\n    this.selectCustomerOrder = order => {\n      const lineItems = (order.lineItems || []).map(item => ({\n        itemCode: item.itemCode || '',\n        itemDesc: item.itemDescription || '',\n        hsnCode: item.hsnCode || '',\n        uom: item.uom || '',\n        qty: item.qty || 1,\n        unitDayOrWk: 1,\n        unitPrice: item.unitPrice || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          customerOrderId: order.orderNo,\n          lineItems\n        },\n        showCustomerOrderOverlay: false,\n        customerOrderLineItems: lineItems\n      }), this.recalculateContractTotals);\n    };\n\n    this.selectProductForLineItem = product => {\n      const newItem = {\n        itemCode: product.code || '',\n        itemDesc: product.name || '',\n        hsnCode: product.hsn || '',\n        uom: product.uom || '',\n        qty: 1,\n        unitDayOrWk: 1,\n        unitPrice: product.price || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      };\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, newItem]\n        },\n        showProductOverlay: false\n      }), this.recalculateContractTotals);\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }), () => {\n        if (['freightCharges', 'freightTaxPercent', 'packingCharges', 'amtAgreed', 'conversionRate'].includes(field)) {\n          this.recalculateContractTotals();\n        }\n      });\n    };\n\n    this.handleAddItemsClick = () => {\n      const {\n        formData,\n        durationFrom,\n        durationTo\n      } = this.state;\n\n      if (!formData.customer) {\n        this.setState({\n          showAlert: true,\n          alertMsg: \"Select customer first!\"\n        });\n        return;\n      }\n\n      if (!durationFrom || !durationTo) {\n        this.setState({\n          showAlert: true,\n          alertMsg: \"Select contract duration first!\"\n        });\n        return;\n      }\n\n      this.showProductOverlay();\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const updatedItems = [...this.state.formData.lineItems];\n      updatedItems[idx] = { ...updatedItems[idx],\n        [field]: value\n      }; // Calculate taxAmt and itemTotal for this line\n\n      let percent = 0;\n      let amount = 0;\n      (updatedItems[idx].taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const qty = parseFloat(updatedItems[idx].qty || 0);\n      const unitPrice = parseFloat(updatedItems[idx].unitPrice || 0);\n      const months = parseFloat(updatedItems[idx].months || 1);\n      const unitDayOrWk = parseFloat(updatedItems[idx].unitDayOrWk || 1);\n      const stdDays = parseFloat(this.state.formData.stdDays || 0);\n      const baseTotal = qty * unitDayOrWk * unitPrice * months * stdDays;\n      const taxAmt = baseTotal * percent / 100 + amount;\n      updatedItems[idx].taxAmt = taxAmt.toFixed(2);\n      updatedItems[idx].itemTotal = (baseTotal + taxAmt).toFixed(2);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateContractTotals);\n    };\n\n    this.toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\n      const formData = { ...this.state.formData\n      };\n      const item = formData.lineItems[lineIdx];\n      if (!item.taxGroupNames) item.taxGroupNames = [];\n\n      if (isChecked) {\n        if (!item.taxGroupNames.includes(groupName)) {\n          item.taxGroupNames.push(groupName);\n        }\n      } else {\n        item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\n      } // recalculate taxAmt and total\n\n\n      let percent = 0;\n      let amount = 0;\n      (item.taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const qty = parseFloat(item.qty || 0);\n      const unitPrice = parseFloat(item.unitPrice || 0);\n      const months = parseFloat(item.months || 1);\n      const unitDayOrWk = parseFloat(item.unitDayOrWk || 1);\n      const stdDays = parseFloat(this.state.formData.stdDays || 0);\n      const baseTotal = qty * unitDayOrWk * unitPrice * months * stdDays;\n      const taxAmt = baseTotal * percent / 100 + amount;\n      item.taxAmt = taxAmt.toFixed(2);\n      item.itemTotal = (baseTotal + taxAmt).toFixed(2);\n      this.setState({\n        formData\n      }, this.recalculateContractTotals);\n    };\n\n    this.recalculateContractTotals = () => {\n      const {\n        lineItems,\n        freightCharges,\n        freightTaxPercent,\n        packingCharges,\n        conversionRate\n      } = this.state.formData;\n      let amtAgreed = 0;\n      (lineItems || []).forEach(item => {\n        amtAgreed += parseFloat(item.itemTotal || 0);\n      }); // Freight + packing\n\n      const freightTaxAmt = parseFloat(freightCharges || 0) * parseFloat(freightTaxPercent || 0) / 100;\n      amtAgreed += parseFloat(packingCharges || 0) + freightTaxAmt; // Apply conversion rate if needed\n\n      let finalValue = amtAgreed;\n\n      if (conversionRate) {\n        finalValue = amtAgreed * parseFloat(conversionRate);\n      }\n\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          amtAgreed: finalValue.toFixed(2),\n          contractValue: finalValue.toFixed(2),\n          freightTaxAmt: freightTaxAmt.toFixed(2)\n        }\n      }));\n    };\n\n    this.handleTabChange = idx => this.setState({\n      activeTab: idx\n    });\n\n    this.handleNotesChange = e => this.setState({\n      notes: e.target.value\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        contracts,\n        notes\n      } = this.state;\n      if (!formData.customer) return alert(\"Customer is required\");\n      if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\n      const saveData = { ...formData,\n        notes,\n        status: \"Entered\",\n        createdAt: serverTimestamp()\n      };\n\n      if (editingId) {\n        await updateDoc(doc(db, \"contracts\", editingId), saveData);\n      } else {\n        saveData.contractNo = `SC${1000 + contracts.length}`;\n        await addDoc(collection(db, \"contracts\"), saveData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null,\n        formData: this.getEmptyContractForm(),\n        notes: ''\n      });\n      this.fetchContracts();\n    };\n\n    this.renderAlert = () => /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showAlert,\n      onHide: () => this.setState({\n        showAlert: false\n      }),\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 9\n      }\n    }, this.state.alertMsg)), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.setState({\n        showAlert: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }\n    }, \"OK\")));\n\n    this.renderTaxOverlay = () => {\n      const {\n        taxGroups,\n        currentTaxLineIdx,\n        formData\n      } = this.state;\n      if (currentTaxLineIdx === null) return null;\n      const item = formData.lineItems[currentTaxLineIdx];\n      const selected = new Set(item.taxGroupNames || []);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: 'fixed',\n          zIndex: 1000,\n          top: '10%',\n          left: '15%',\n          background: '#fff',\n          border: '1px solid #2196F3',\n          borderRadius: '8px',\n          padding: '24px',\n          boxShadow: '0 4px 24px rgba(33,150,243,0.15)',\n          width: '700px',\n          maxHeight: '70vh',\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          color: '#2196F3',\n          marginBottom: '16px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 7\n        }\n      }, \"Select Tax Groups\"), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-sm table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        style: {\n          background: '#f4f6fa'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 13\n        }\n      }, \"Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }\n      }, \"Components\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 13\n        }\n      }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }\n      }, \"% / Amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 9\n        }\n      }, taxGroups.map(tg => /*#__PURE__*/React.createElement(\"tr\", {\n        key: tg.groupName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selected.has(tg.groupName),\n        onChange: e => this.toggleTaxGroupSelection(tg.groupName, currentTaxLineIdx, e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        style: {\n          fontWeight: 'bold',\n          color: '#2196F3'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 15\n        }\n      }, tg.groupName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 15\n        }\n      }, tg.lineItems.map(li => li.component).join(', ')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 15\n        }\n      }, tg.lineItems.map(li => li.type).join(', ')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 15\n        }\n      }, tg.lineItems.map(li => li.percentOrAmt).join(', ')))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-right mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.setState({\n          showTaxOverlay: false\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 9\n        }\n      }, \"Done\")));\n    };\n\n    this.renderContractNoField = () => {\n      const {\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 9\n        }\n      }, \"Contract No\"), formData.contractType === \"Standard\" ? /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.contractNo,\n        readOnly: true,\n        placeholder: \"Auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }\n      }) : /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.contractNo,\n        onChange: e => this.handleInputChange('contractNo', e.target.value),\n        placeholder: \"Enter Contract No\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }\n      }));\n    };\n\n    this.renderCustomerOrderOverlay = () => {\n      const {\n        customerOrders,\n        customerOrderOverlaySearch\n      } = this.state;\n      const filtered = customerOrders.filter(o => (o.orderNo || '').toLowerCase().includes(customerOrderOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }\n      }, \"Select Customer Order\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by order no...\",\n        value: customerOrderOverlaySearch,\n        onChange: e => this.setState({\n          customerOrderOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 19\n        }\n      }, \"Order No\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 19\n        }\n      }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 19\n        }\n      }, \"Value\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 19\n        }\n      }, \"Select\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 15\n        }\n      }, filtered.map((o, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: o.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 21\n        }\n      }, o.orderNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 21\n        }\n      }, o.orderDate), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 21\n        }\n      }, o.orderValue), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.selectCustomerOrder(o),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 23\n        }\n      }, \"Select\")))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 4,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 21\n        }\n      }, \"No approved orders found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideCustomerOrderOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderCustomerOverlay = () => {\n      const {\n        customers,\n        customerOverlaySearch\n      } = this.state;\n      const filtered = customers.filter(c => (c.custname || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) || (c.custcode || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) || (c.custshortName || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }\n      }, \"Select Customer Order\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        onChange: e => this.setState({\n          customerOrderOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 19\n        }\n      }, \"Order No\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 19\n        }\n      }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 19\n        }\n      }, \"Value\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 19\n        }\n      }, \"Select\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 15\n        }\n      }, filtered.map((o, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: o.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 21\n        }\n      }, o.orderNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 21\n        }\n      }, o.orderDate), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 21\n        }\n      }, o.orderValue), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.selectCustomerOrder(o),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 23\n        }\n      }, \"Select\")))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 4,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 21\n        }\n      }, \"No approved orders found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideCustomerOrderOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderProductOverlay = () => {\n      const {\n        products,\n        productOverlaySearch,\n        selectedProductIds\n      } = this.state;\n      const filtered = products.filter(p => (p.ptshortName || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptdescription || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.itemCode || '').toLowerCase().includes(productOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 11\n        }\n      }, \"Select Products\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code or name...\",\n        value: productOverlaySearch,\n        onChange: e => this.setState({\n          productOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 19\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 19\n        }\n      }, \"Select\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 15\n        }\n      }, filtered.map((p, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: p.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 21\n        }\n      }, p.productId), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 21\n        }\n      }, p.ptdescription), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.selectProductForLineItem(p),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 23\n        }\n      }, \"Select\")))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 3,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 21\n        }\n      }, \"No products found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideProductOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderTabs = () => {\n      const {\n        activeTab\n      } = this.state;\n      const tabNames = ['Lines', 'Terms', 'Notes'];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        style: {\n          fontSize: '16px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 7\n        }\n      }, tabNames.map((tab, idx) => /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        key: tab,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link${activeTab === idx ? ' active' : ''}`,\n        onClick: () => this.handleTabChange(idx),\n        style: {\n          color: '#007bff',\n          background: activeTab === idx ? '#e9ecef' : '#fff',\n          border: '1px solid #dee2e6',\n          borderBottom: activeTab === idx ? 'none' : undefined,\n          fontWeight: activeTab === idx ? 'bold' : 'normal'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 13\n        }\n      }, tab))));\n    };\n\n    this.renderLinesTab = () => {\n      const {\n        formData,\n        showProductOverlay\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-2\",\n        onClick: this.handleAddItemsClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 11\n        }\n      }, \"Add Items\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive\",\n        style: {\n          overflowX: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 704,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        style: {\n          minWidth: 1200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 17\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 17\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 17\n        }\n      }, \"HSN No\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 17\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 712,\n          columnNumber: 17\n        }\n      }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 17\n        }\n      }, \"Unit/Day or Wk\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 714,\n          columnNumber: 17\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 17\n        }\n      }, \"Months\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 17\n        }\n      }, \"Tax Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 17\n        }\n      }, \"Tax Amt\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 17\n        }\n      }, \"Item Total\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 721,\n          columnNumber: 13\n        }\n      }, (formData.lineItems || []).map((item, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 19\n        }\n      }, item.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 19\n        }\n      }, item.itemDesc), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 19\n        }\n      }, item.hsnCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 19\n        }\n      }, item.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.qty,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'qty', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.unitDayOrWk,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'unitDayOrWk', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.unitPrice,\n        min: \"0\",\n        style: {\n          width: 100\n        },\n        onChange: e => this.handleLineItemChange(idx, 'unitPrice', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.months,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'months', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 768,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-link btn-sm\",\n        onClick: () => this.setState({\n          showTaxOverlay: true,\n          currentTaxLineIdx: idx\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 19\n        }\n      }, item.taxGroupNames && item.taxGroupNames.length > 0 ? item.taxGroupNames.join(', ') : 'Select Tax')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 19\n        }\n      }, item.taxAmt), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 19\n        }\n      }, item.itemTotal))), (!formData.lineItems || formData.lineItems.length === 0) && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 784,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"11\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 785,\n          columnNumber: 19\n        }\n      }, \"No items\"))))), showProductOverlay && this.renderProductOverlay());\n    };\n\n    this.renderTermsTab = () => {\n      const {\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 802,\n          columnNumber: 13\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.despatchMode,\n        onChange: e => this.handleInputChange('despatchMode', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 805,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 806,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.paymentTerms,\n        onChange: e => this.handleInputChange('paymentTerms', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 807,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 812,\n          columnNumber: 13\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.billTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 813,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 815,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 816,\n          columnNumber: 13\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.shipTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 817,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 820,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 821,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 822,\n          columnNumber: 13\n        }\n      }, \"Freight Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightCharges,\n        onChange: e => this.handleInputChange('freightCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 825,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 826,\n          columnNumber: 13\n        }\n      }, \"Freight Tax %\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightTaxPercent,\n        onChange: e => this.handleInputChange('freightTaxPercent', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 827,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 829,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 830,\n          columnNumber: 13\n        }\n      }, \"Freight Tax Amt\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightTaxAmt,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 831,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 833,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 13\n        }\n      }, \"Packing Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.packingCharges,\n        onChange: e => this.handleInputChange('packingCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 839,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 840,\n          columnNumber: 13\n        }\n      }, \"Amount Limit\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.amountLimit,\n        onChange: e => this.handleInputChange('amountLimit', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 841,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 13\n        }\n      }, \"Minimum Release\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.minimumRelease,\n        onChange: e => this.handleInputChange('minimumRelease', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 853,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 854,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 855,\n        columnNumber: 9\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: \"4\",\n      value: this.state.notes,\n      onChange: this.handleNotesChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 856,\n        columnNumber: 9\n      }\n    })));\n\n    this.renderForm = () => {\n      const {\n        activeTab,\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 865,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: '24px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 866,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 867,\n          columnNumber: 13\n        }\n      }, \"Service Contract Creation/Update\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 17\n        }\n      }, \"Contract Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.contractType,\n        onChange: e => this.handleInputChange('contractType', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 876,\n          columnNumber: 19\n        }\n      }, \"Standard\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 877,\n          columnNumber: 19\n        }\n      }, \"Manual\"))), this.renderContractNoField(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 882,\n          columnNumber: 17\n        }\n      }, \"Created Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control form-control-sm\",\n        value: formData.createdDate,\n        onChange: e => this.handleInputChange('createdDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 890,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 891,\n          columnNumber: 17\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.status,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 892,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 895,\n          columnNumber: 17\n        }\n      }, \"Ref No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.refNo,\n        onChange: e => this.handleInputChange('refNo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 901,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 902,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 17\n        }\n      }, \"Customer\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 904,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Choose Customer\",\n        value: formData.customer,\n        readOnly: true,\n        onClick: this.showCustomerOverlay,\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 905,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        type: \"button\",\n        onClick: this.showCustomerOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 915,\n          columnNumber: 21\n        }\n      }, \"Select\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 17\n        }\n      }, \"Customer Order\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Select Order\",\n        value: formData.customerOrderId || '',\n        readOnly: true,\n        onClick: this.showCustomerOrderOverlay,\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 922,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        type: \"button\",\n        onClick: this.showCustomerOrderOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 932,\n          columnNumber: 21\n        }\n      }, \"Select\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 936,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 937,\n          columnNumber: 17\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 938,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 17\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.conversionRate,\n        onChange: e => this.handleInputChange('conversionRate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 945,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 946,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 15\n        }\n      }, \"Contr.Duration From\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        value: this.state.formData.durationFrom || '',\n        onChange: e => this.handleInputChange('durationFrom', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 948,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 954,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 17\n        }\n      }, \"Contr.Duration To\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        value: this.state.formData.durationTo || '',\n        onChange: e => this.handleInputChange('durationTo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 956,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 962,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 963,\n          columnNumber: 17\n        }\n      }, \"Std.days\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.stdDays,\n        onChange: e => this.handleInputChange('stdDays', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 964,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 966,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 967,\n          columnNumber: 17\n        }\n      }, \"Amt.Agreed\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.amtAgreed,\n        onChange: e => this.handleInputChange('amtAgreed', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 968,\n          columnNumber: 17\n        }\n      }))), this.renderTabs(), activeTab === 0 && this.renderLinesTab(), activeTab === 1 && this.renderTermsTab(), activeTab === 2 && this.renderNotesTab(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 976,\n          columnNumber: 15\n        }\n      }, this.state.editingId ? \"Update\" : \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyContractForm(),\n          notes: ''\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 979,\n          columnNumber: 15\n        }\n      }, \"Cancel\")))), this.state.showAlert && this.renderAlert(), this.state.showCustomerOrderOverlay && this.renderCustomerOrderOverlay());\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 990,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 992,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 993,\n        columnNumber: 11\n      }\n    }, \"Service Contracts\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 994,\n        columnNumber: 11\n      }\n    }, \"+ Create Contract\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 996,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 997,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 998,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 999,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1000,\n        columnNumber: 17\n      }\n    }, \"Contract No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1001,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1002,\n        columnNumber: 17\n      }\n    }, \"Ref No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1003,\n        columnNumber: 17\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1004,\n        columnNumber: 17\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1005,\n        columnNumber: 17\n      }\n    }, \"Duration\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1006,\n        columnNumber: 17\n      }\n    }, \"Std Days\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 17\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1008,\n        columnNumber: 17\n      }\n    }, \"Value\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1011,\n        columnNumber: 13\n      }\n    }, this.state.contracts.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1013,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1014,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link p-0\",\n      onClick: () => this.setState({\n        showForm: true,\n        editingId: c.id,\n        formData: { ...c\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1015,\n        columnNumber: 11\n      }\n    }, c.contractNo)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1026,\n        columnNumber: 7\n      }\n    }, c.createdDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1027,\n        columnNumber: 7\n      }\n    }, c.refNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1028,\n        columnNumber: 7\n      }\n    }, c.customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1029,\n        columnNumber: 7\n      }\n    }, c.currency), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1030,\n        columnNumber: 7\n      }\n    }, c.contrDurationFrom, \" - \", c.contrDurationTo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1031,\n        columnNumber: 7\n      }\n    }, c.stdDays), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1032,\n        columnNumber: 7\n      }\n    }, c.status), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1033,\n        columnNumber: 7\n      }\n    }, c.contractValue))))))));\n  }\n\n  getEmptyContractForm() {\n    return {\n      contractType: 'Standard',\n      contractNo: '',\n      createdDate: new Date().toISOString().split('T')[0],\n      status: 'Entered',\n      refNo: '',\n      customer: '',\n      currency: '',\n      conversionRate: '',\n      stdDays: 30,\n      amtAgreed: '',\n      contrDurationFrom: '',\n      contrDurationTo: '',\n      lineItems: [],\n      despatchMode: '',\n      paymentTerms: '',\n      billTo: '',\n      shipTo: '',\n      freightCharges: '',\n      freightTaxPercent: '',\n      freightTaxAmt: '',\n      packingCharges: '',\n      amountLimit: '',\n      minimumRelease: '',\n      contractValue: '',\n      notes: ''\n    };\n  }\n\n  componentDidMount() {\n    this.fetchContracts();\n    this.fetchCustomers();\n    this.fetchProducts();\n    this.fetchTaxGroups();\n    this.fetchUsers();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1047,\n        columnNumber: 7\n      }\n    }, this.state.showCustomerOverlay && this.renderCustomerOverlay(), this.state.showProductOverlay && this.renderProductOverlay(), this.state.showForm ? this.renderForm() : this.renderTable(), this.state.showTaxOverlay && this.renderTaxOverlay());\n  }\n\n}\n\nexport default ContractBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/servicecontract/servicecontractbilling.js"],"names":["React","Component","Form","DatePicker","db","Modal","Button","collection","query","where","getDocs","addDoc","updateDoc","doc","serverTimestamp","ContractBilling","state","contracts","customers","products","taxGroups","users","showTaxOverlay","activeTab","showForm","editingId","durationFrom","durationTo","canAddItems","showProductOverlay","productOverlaySearch","selectedProductIds","formData","getEmptyContractForm","notes","showCustomerOrderOverlay","customerOrderOverlaySearch","selectedCustomerOrders","customerOrders","customerOrderLineItems","showAlert","alertMsg","fetchContracts","snap","data","docs","map","id","setState","reverse","fetchCustomers","fetchCustomerOrders","customerId","q","orders","error","console","alert","message","fetchProducts","fetchUsers","fetchTaxGroups","checkDurationSelected","hideProductOverlay","toggleProductSelection","productId","checked","prev","filter","addSelectedProductsToLineItems","selectedProducts","p","includes","newItems","product","itemCode","itemDesc","ptdescription","hsnCode","qty","unitDayOrWk","unitPrice","price","months","taxGroupNames","taxAmt","itemTotal","lineItems","recalculateContractTotals","showCustomerOverlay","customerOverlaySearch","hideCustomerOverlay","ideCustomerOrderOverlay","formatAddress","addr","address","city","country","Boolean","join","zip","selectCustomer","customer","custname","currency","billTo","shipTo","despatchMode","paymentTerms","customerOrderId","selectCustomerOrder","order","item","itemDescription","uom","orderNo","selectProductForLineItem","newItem","code","name","hsn","handleInputChange","field","value","handleAddItemsClick","handleLineItemChange","idx","updatedItems","percent","amount","forEach","groupName","group","find","t","Array","isArray","comp","val","parseFloat","percentOrAmt","type","stdDays","baseTotal","toFixed","toggleTaxGroupSelection","lineIdx","isChecked","push","g","freightCharges","freightTaxPercent","packingCharges","conversionRate","amtAgreed","freightTaxAmt","finalValue","contractValue","handleTabChange","handleNotesChange","e","target","handleSubmit","preventDefault","length","saveData","status","createdAt","contractNo","renderAlert","renderTaxOverlay","currentTaxLineIdx","selected","Set","position","zIndex","top","left","background","border","borderRadius","padding","boxShadow","width","maxHeight","overflowY","color","marginBottom","tg","has","fontWeight","li","component","renderContractNoField","contractType","renderCustomerOrderOverlay","filtered","o","toLowerCase","i","orderDate","orderValue","hideCustomerOrderOverlay","renderCustomerOverlay","c","custcode","custshortName","renderProductOverlay","ptshortName","renderTabs","tabNames","fontSize","tab","borderBottom","undefined","renderLinesTab","overflowX","minWidth","renderTermsTab","amountLimit","minimumRelease","renderNotesTab","renderForm","flex","createdDate","refNo","cursor","renderTable","contrDurationFrom","contrDurationTo","Date","toISOString","split","componentDidMount","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,iBAArB;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,OAAO,4CAAP;AACA,SAASC,EAAT,QAAmB,sBAAnB;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iBAA9B;AACA,SAASC,UAAT,EAAqBC,KAArB,EAA4BC,KAA5B,EAAkCC,OAAlC,EAA2CC,MAA3C,EAAmDC,SAAnD,EAA8DC,GAA9D,EAAmEC,eAAnE,QAA0F,oBAA1F;;AAEA,MAAMC,eAAN,SAA8Bd,SAA9B,CAAwC;AAAA;AAAA;AAAA,SACtCe,KADsC,GAC9B;AACNC,MAAAA,SAAS,EAAE,EADL;AAENC,MAAAA,SAAS,EAAE,EAFL;AAGNC,MAAAA,QAAQ,EAAE,EAHJ;AAINC,MAAAA,SAAS,EAAE,EAJL;AAKNC,MAAAA,KAAK,EAAE,EALD;AAMNC,MAAAA,cAAc,EAAE,KANV;AAONC,MAAAA,SAAS,EAAE,CAPL;AAQNC,MAAAA,QAAQ,EAAE,KARJ;AASNC,MAAAA,SAAS,EAAE,IATL;AAUNC,MAAAA,YAAY,EAAE,IAVR;AAWNC,MAAAA,UAAU,EAAE,IAXN;AAYNC,MAAAA,WAAW,EAAE,KAZP;AAaNC,MAAAA,kBAAkB,EAAE,KAbd;AAcNC,MAAAA,oBAAoB,EAAE,EAdhB;AAeNC,MAAAA,kBAAkB,EAAC,EAfb;AAgBNC,MAAAA,QAAQ,EAAE,KAAKC,oBAAL,EAhBJ;AAiBNC,MAAAA,KAAK,EAAE,EAjBD;AAkBNC,MAAAA,wBAAwB,EAAE,KAlBpB;AAmBNC,MAAAA,0BAA0B,EAAE,EAnBtB;AAoBNC,MAAAA,sBAAsB,EAAE,EApBlB;AAqBNC,MAAAA,cAAc,EAAE,EArBV;AAsBNC,MAAAA,sBAAsB,EAAE,EAtBlB;AAuBNC,MAAAA,SAAS,EAAE,KAvBL;AAwBNC,MAAAA,QAAQ,EAAE;AAxBJ,KAD8B;;AAAA,SAkEtCC,cAlEsC,GAkErB,YAAY;AAC3B,YAAMC,IAAI,GAAG,MAAMjC,OAAO,CAACH,UAAU,CAACH,EAAD,EAAK,WAAL,CAAX,CAA1B;AACA,YAAMwC,IAAI,GAAGD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcjC,GAAG,KAAK;AAAEkC,QAAAA,EAAE,EAAElC,GAAG,CAACkC,EAAV;AAAc,WAAGlC,GAAG,CAAC+B,IAAJ;AAAjB,OAAL,CAAjB,CAAb;AACA,WAAKI,QAAL,CAAc;AAAE/B,QAAAA,SAAS,EAAE2B,IAAI,CAACK,OAAL;AAAb,OAAd;AACD,KAtEqC;;AAAA,SAwEtCC,cAxEsC,GAwErB,YAAY;AAC3B,YAAMP,IAAI,GAAG,MAAMjC,OAAO,CAACH,UAAU,CAACH,EAAD,EAAK,WAAL,CAAX,CAA1B;AACA,YAAMwC,IAAI,GAAGD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcjC,GAAG,KAAK;AAAEkC,QAAAA,EAAE,EAAElC,GAAG,CAACkC,EAAV;AAAc,WAAGlC,GAAG,CAAC+B,IAAJ;AAAjB,OAAL,CAAjB,CAAb;AACA,WAAKI,QAAL,CAAc;AAAE9B,QAAAA,SAAS,EAAE0B;AAAb,OAAd;AACD,KA5EqC;;AAAA,SA8ExCO,mBA9EwC,GA8ElB,MAAOC,UAAP,IAAsB;AAC1C,UAAI;AACF,YAAI,CAACA,UAAL,EAAiB,OADf,CAGF;;AACA,cAAMC,CAAC,GAAG7C,KAAK,CACbD,UAAU,CAACH,EAAD,EAAK,QAAL,CADG,EAEbK,KAAK,CAAC,YAAD,EAAe,IAAf,EAAqB2C,UAArB,CAFQ,CAAf;AAKA,cAAMT,IAAI,GAAG,MAAMjC,OAAO,CAAC2C,CAAD,CAA1B;AAEA,cAAMC,MAAM,GAAGX,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcjC,GAAG,KAAK;AACnCkC,UAAAA,EAAE,EAAElC,GAAG,CAACkC,EAD2B;AAEnC,aAAGlC,GAAG,CAAC+B,IAAJ;AAFgC,SAAL,CAAjB,CAAf,CAXE,CAgBF;;AACA,aAAKI,QAAL,CAAc;AAAEV,UAAAA,cAAc,EAAEgB;AAAlB,SAAd;AACD,OAlBD,CAkBE,OAAOC,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,iCAAd,EAAiDA,KAAjD;AACAE,QAAAA,KAAK,CAAC,sCAAsCF,KAAK,CAACG,OAA7C,CAAL;AACD;AACF,KArGuC;;AAAA,SAuGtCC,aAvGsC,GAuGtB,YAAY;AAC1B,YAAMhB,IAAI,GAAG,MAAMjC,OAAO,CAACH,UAAU,CAACH,EAAD,EAAK,UAAL,CAAX,CAA1B;AACA,YAAMwC,IAAI,GAAGD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcjC,GAAG,KAAK;AAAEkC,QAAAA,EAAE,EAAElC,GAAG,CAACkC,EAAV;AAAc,WAAGlC,GAAG,CAAC+B,IAAJ;AAAjB,OAAL,CAAjB,CAAb;AACA,WAAKI,QAAL,CAAc;AAAE7B,QAAAA,QAAQ,EAAEyB;AAAZ,OAAd;AACD,KA3GqC;;AAAA,SA4GxCgB,UA5GwC,GA4G3B,YAAY;AACvB,YAAMjB,IAAI,GAAG,MAAMjC,OAAO,CAACH,UAAU,CAACH,EAAD,EAAK,OAAL,CAAX,CAA1B;AACA,YAAMwC,IAAI,GAAGD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcjC,GAAG,KAAK;AAAEkC,QAAAA,EAAE,EAAElC,GAAG,CAACkC,EAAV;AAAc,WAAGlC,GAAG,CAAC+B,IAAJ;AAAjB,OAAL,CAAjB,CAAb;AACA,WAAKI,QAAL,CAAc;AAAE3B,QAAAA,KAAK,EAAEuB;AAAT,OAAd;AACD,KAhHuC;;AAAA,SAiHtCiB,cAjHsC,GAiHrB,YAAY;AAC3B,YAAMlB,IAAI,GAAG,MAAMjC,OAAO,CAACH,UAAU,CAACH,EAAD,EAAK,WAAL,CAAX,CAA1B;AACA,YAAMwC,IAAI,GAAGD,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAcjC,GAAG,KAAK;AAAEkC,QAAAA,EAAE,EAAElC,GAAG,CAACkC,EAAV;AAAc,WAAGlC,GAAG,CAAC+B,IAAJ;AAAjB,OAAL,CAAjB,CAAb;AACA,WAAKI,QAAL,CAAc;AAAE5B,QAAAA,SAAS,EAAEwB;AAAb,OAAd;AACD,KArHqC;;AAAA,SAsHtCkB,qBAtHsC,GAsHd,MAAM;AAC9B,YAAM;AAAEpC,QAAAA,YAAF;AAAgBC,QAAAA;AAAhB,UAA+B,KAAKX,KAA1C;AACA,WAAKgC,QAAL,CAAc;AAAEpB,QAAAA,WAAW,EAAE,CAAC,EAAEF,YAAY,IAAIC,UAAlB;AAAhB,OAAd;AACD,KAzHuC;;AAAA,SA2HtCE,kBA3HsC,GA2HjB,MAAM,KAAKmB,QAAL,CAAc;AAAEnB,MAAAA,kBAAkB,EAAE,IAAtB;AAA4BC,MAAAA,oBAAoB,EAAE,EAAlD;AAAsDC,MAAAA,kBAAkB,EAAE;AAA1E,KAAd,CA3HW;;AAAA,SA4HtCgC,kBA5HsC,GA4HjB,MAAM,KAAKf,QAAL,CAAc;AAAEnB,MAAAA,kBAAkB,EAAE,KAAtB;AAA6BC,MAAAA,oBAAoB,EAAE,EAAnD;AAAuDC,MAAAA,kBAAkB,EAAE;AAA3E,KAAd,CA5HW;;AAAA,SA8HxCiC,sBA9HwC,GA8Hf,CAACC,SAAD,EAAYC,OAAZ,KAAwB;AAC/C,WAAKlB,QAAL,CAAcmB,IAAI,KAAK;AACrBpC,QAAAA,kBAAkB,EAAEmC,OAAO,GACvB,CAAC,GAAGC,IAAI,CAACpC,kBAAT,EAA6BkC,SAA7B,CADuB,GAEvBE,IAAI,CAACpC,kBAAL,CAAwBqC,MAAxB,CAA+BrB,EAAE,IAAIA,EAAE,KAAKkB,SAA5C;AAHiB,OAAL,CAAlB;AAKD,KApIuC;;AAAA,SAqIxCI,8BArIwC,GAqIP,MAAM;AACrC,YAAMC,gBAAgB,GAAG,KAAKtD,KAAL,CAAWG,QAAX,CAAoBiD,MAApB,CAA2BG,CAAC,IAAI,KAAKvD,KAAL,CAAWe,kBAAX,CAA8ByC,QAA9B,CAAuCD,CAAC,CAACxB,EAAzC,CAAhC,CAAzB;AACA,YAAM0B,QAAQ,GAAGH,gBAAgB,CAACxB,GAAjB,CAAqB4B,OAAO,KAAK;AAChDC,QAAAA,QAAQ,EAAED,OAAO,CAACT,SAAR,IAAqB,EADiB;AAEhDW,QAAAA,QAAQ,EAAEF,OAAO,CAACG,aAAR,IAAyB,EAFa;AAGhDC,QAAAA,OAAO,EAAEJ,OAAO,CAACI,OAAR,IAAmB,EAHoB;AAIhDC,QAAAA,GAAG,EAAE,CAJ2C;AAKhDC,QAAAA,WAAW,EAAE,CALmC;AAMhDC,QAAAA,SAAS,EAAEP,OAAO,CAACQ,KAAR,IAAiB,CANoB;AAOhDC,QAAAA,MAAM,EAAE,CAPwC;AAQhDC,QAAAA,aAAa,EAAE,EARiC;AAShDC,QAAAA,MAAM,EAAE,CATwC;AAUhDC,QAAAA,SAAS,EAAE;AAVqC,OAAL,CAA5B,CAAjB;AAYA,WAAKtC,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EACR,GAAGmC,IAAI,CAACnC,QADA;AAERuD,UAAAA,SAAS,EAAE,CAAC,GAAGpB,IAAI,CAACnC,QAAL,CAAcuD,SAAlB,EAA6B,GAAGd,QAAhC;AAFH,SADW;AAKrB5C,QAAAA,kBAAkB,EAAE,KALC;AAMrBE,QAAAA,kBAAkB,EAAE;AANC,OAAL,CAAlB,EAOI,KAAKyD,yBAPT;AAQD,KA3JuC;;AAAA,SAgKxCC,mBAhKwC,GAgKlB,MAAM,KAAKzC,QAAL,CAAc;AAAEyC,MAAAA,mBAAmB,EAAE,IAAvB;AAA6BC,MAAAA,qBAAqB,EAAE;AAApD,KAAd,CAhKY;;AAAA,SAiKxCC,mBAjKwC,GAiKlB,MAAM,KAAK3C,QAAL,CAAc;AAAEyC,MAAAA,mBAAmB,EAAE,KAAvB;AAA8BC,MAAAA,qBAAqB,EAAE;AAArD,KAAd,CAjKY;;AAAA,SAkKxCvD,wBAlKwC,GAkKb,MAAM,KAAKa,QAAL,CAAc;AAAEb,MAAAA,wBAAwB,EAAE,IAA5B;AAAkCC,MAAAA,0BAA0B,EAAE;AAA9D,KAAd,CAlKO;;AAAA,SAmKxCwD,uBAnKwC,GAmKd,MAAM,KAAK5C,QAAL,CAAc;AAAEb,MAAAA,wBAAwB,EAAE,KAA5B;AAAmCC,MAAAA,0BAA0B,EAAE;AAA/D,KAAd,CAnKQ;;AAAA,SAqKxCyD,aArKwC,GAqKvBC,IAAD,IAAU;AACxB,UAAI,CAACA,IAAL,EAAW,OAAO,EAAP;AACX,UAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B,OAAOA,IAAP;AAC9B,aAAO,CACLA,IAAI,CAACC,OADA,EAEL,CAACD,IAAI,CAACE,IAAN,EAAYF,IAAI,CAAC9E,KAAjB,EAAwB8E,IAAI,CAACG,OAA7B,EAAsC7B,MAAtC,CAA6C8B,OAA7C,EAAsDC,IAAtD,CAA2D,IAA3D,CAFK,EAGLL,IAAI,CAACM,GAHA,EAILhC,MAJK,CAIE8B,OAJF,EAIWC,IAJX,CAIgB,IAJhB,CAAP;AAKD,KA7KuC;;AAAA,SA+KtCE,cA/KsC,GA+KpBC,QAAD,IAAc;AAC7B,WAAKtD,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EACR,GAAGmC,IAAI,CAACnC,QADA;AAERsE,UAAAA,QAAQ,EAAEA,QAAQ,CAACC,QAFX;AAGRC,UAAAA,QAAQ,EAAEF,QAAQ,CAACE,QAAT,IAAqB,EAHvB;AAIRC,UAAAA,MAAM,EAAE,KAAKZ,aAAL,CAAmBS,QAAQ,CAACG,MAA5B,CAJA;AAKRC,UAAAA,MAAM,EAAE,KAAKb,aAAL,CAAmBS,QAAQ,CAACI,MAA5B,CALA;AAMRC,UAAAA,YAAY,EAAEL,QAAQ,CAACK,YAAT,IAAyB,EAN/B;AAORC,UAAAA,YAAY,EAAEN,QAAQ,CAACM,YAAT,IAAyB,EAP/B;AAQRC,UAAAA,eAAe,EAAE;AART,SADW;AAWrBpB,QAAAA,mBAAmB,EAAE,KAXA;AAYrBlD,QAAAA,sBAAsB,EAAE;AAZH,OAAL,CAAlB,EAaI,MAAM;AACd,aAAKY,mBAAL,CAAyBmD,QAAQ,CAACvD,EAAlC;AACK,OAfD;AAgBD,KAhMqC;;AAAA,SAkMtC+D,mBAlMsC,GAkMfC,KAAD,IAAW;AAC/B,YAAMxB,SAAS,GAAG,CAACwB,KAAK,CAACxB,SAAN,IAAmB,EAApB,EAAwBzC,GAAxB,CAA4BkE,IAAI,KAAK;AACrDrC,QAAAA,QAAQ,EAAEqC,IAAI,CAACrC,QAAL,IAAiB,EAD0B;AAErDC,QAAAA,QAAQ,EAAEoC,IAAI,CAACC,eAAL,IAAwB,EAFmB;AAGrDnC,QAAAA,OAAO,EAAEkC,IAAI,CAAClC,OAAL,IAAgB,EAH4B;AAIrDoC,QAAAA,GAAG,EAAEF,IAAI,CAACE,GAAL,IAAY,EAJoC;AAKrDnC,QAAAA,GAAG,EAAEiC,IAAI,CAACjC,GAAL,IAAY,CALoC;AAMrDC,QAAAA,WAAW,EAAE,CANwC;AAOrDC,QAAAA,SAAS,EAAE+B,IAAI,CAAC/B,SAAL,IAAkB,CAPwB;AAQrDE,QAAAA,MAAM,EAAE,CAR6C;AASrDC,QAAAA,aAAa,EAAE,EATsC;AAUrDC,QAAAA,MAAM,EAAE,CAV6C;AAWrDC,QAAAA,SAAS,EAAE;AAX0C,OAAL,CAAhC,CAAlB;AAaA,WAAKtC,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EACR,GAAGmC,IAAI,CAACnC,QADA;AAER6E,UAAAA,eAAe,EAAEE,KAAK,CAACI,OAFf;AAGR5B,UAAAA;AAHQ,SADW;AAMrBpD,QAAAA,wBAAwB,EAAE,KANL;AAOrBI,QAAAA,sBAAsB,EAAEgD;AAPH,OAAL,CAAlB,EAQI,KAAKC,yBART;AASD,KAzNqC;;AAAA,SA2NtC4B,wBA3NsC,GA2NV1C,OAAD,IAAa;AACtC,YAAM2C,OAAO,GAAG;AACd1C,QAAAA,QAAQ,EAAED,OAAO,CAAC4C,IAAR,IAAgB,EADZ;AAEd1C,QAAAA,QAAQ,EAAEF,OAAO,CAAC6C,IAAR,IAAgB,EAFZ;AAGdzC,QAAAA,OAAO,EAAEJ,OAAO,CAAC8C,GAAR,IAAe,EAHV;AAIdN,QAAAA,GAAG,EAAExC,OAAO,CAACwC,GAAR,IAAe,EAJN;AAKdnC,QAAAA,GAAG,EAAE,CALS;AAMdC,QAAAA,WAAW,EAAE,CANC;AAOdC,QAAAA,SAAS,EAAEP,OAAO,CAACQ,KAAR,IAAiB,CAPd;AAQdC,QAAAA,MAAM,EAAE,CARM;AASdC,QAAAA,aAAa,EAAE,EATD;AAUdC,QAAAA,MAAM,EAAE,CAVM;AAWdC,QAAAA,SAAS,EAAE;AAXG,OAAhB;AAaA,WAAKtC,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EACR,GAAGmC,IAAI,CAACnC,QADA;AAERuD,UAAAA,SAAS,EAAE,CAAC,GAAGpB,IAAI,CAACnC,QAAL,CAAcuD,SAAlB,EAA6B8B,OAA7B;AAFH,SADW;AAKrBxF,QAAAA,kBAAkB,EAAE;AALC,OAAL,CAAlB,EAMI,KAAK2D,yBANT;AAOD,KAhPqC;;AAAA,SAkPtCiC,iBAlPsC,GAkPlB,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACpC,WAAK3E,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EAAE,GAAGmC,IAAI,CAACnC,QAAV;AAAoB,WAAC0F,KAAD,GAASC;AAA7B;AADW,OAAL,CAAlB,EAEI,MAAM;AACR,YAAI,CAAC,gBAAD,EAAmB,mBAAnB,EAAwC,gBAAxC,EAA0D,WAA1D,EAAuE,gBAAvE,EAAyFnD,QAAzF,CAAkGkD,KAAlG,CAAJ,EAA8G;AAC5G,eAAKlC,yBAAL;AACD;AACF,OAND;AAOD,KA1PqC;;AAAA,SA2PvCoC,mBA3PuC,GA2PjB,MAAM;AACzB,YAAM;AAAE5F,QAAAA,QAAF;AAAYN,QAAAA,YAAZ;AAA0BC,QAAAA;AAA1B,UAAyC,KAAKX,KAApD;;AACA,UAAI,CAACgB,QAAQ,CAACsE,QAAd,EAAwB;AACtB,aAAKtD,QAAL,CAAc;AAAER,UAAAA,SAAS,EAAE,IAAb;AAAmBC,UAAAA,QAAQ,EAAE;AAA7B,SAAd;AACA;AACD;;AACD,UAAI,CAACf,YAAD,IAAiB,CAACC,UAAtB,EAAkC;AAChC,aAAKqB,QAAL,CAAc;AAAER,UAAAA,SAAS,EAAE,IAAb;AAAmBC,UAAAA,QAAQ,EAAE;AAA7B,SAAd;AACA;AACD;;AACD,WAAKZ,kBAAL;AACD,KAtQqC;;AAAA,SAwQtCgG,oBAxQsC,GAwQf,CAACC,GAAD,EAAMJ,KAAN,EAAaC,KAAb,KAAuB;AAC5C,YAAMI,YAAY,GAAG,CAAC,GAAG,KAAK/G,KAAL,CAAWgB,QAAX,CAAoBuD,SAAxB,CAArB;AACAwC,MAAAA,YAAY,CAACD,GAAD,CAAZ,GAAoB,EAAE,GAAGC,YAAY,CAACD,GAAD,CAAjB;AAAwB,SAACJ,KAAD,GAASC;AAAjC,OAApB,CAF4C,CAI5C;;AACA,UAAIK,OAAO,GAAG,CAAd;AACA,UAAIC,MAAM,GAAG,CAAb;AACA,OAACF,YAAY,CAACD,GAAD,CAAZ,CAAkB1C,aAAlB,IAAmC,EAApC,EAAwC8C,OAAxC,CAAgDC,SAAS,IAAI;AAC3D,cAAMC,KAAK,GAAG,KAAKpH,KAAL,CAAWI,SAAX,CAAqBiH,IAArB,CAA0BC,CAAC,IAAIA,CAAC,CAACH,SAAF,KAAgBA,SAA/C,CAAd;;AACA,YAAIC,KAAK,IAAIG,KAAK,CAACC,OAAN,CAAcJ,KAAK,CAAC7C,SAApB,CAAb,EAA6C;AAC3C6C,UAAAA,KAAK,CAAC7C,SAAN,CAAgB2C,OAAhB,CAAwBO,IAAI,IAAI;AAC9B,kBAAMC,GAAG,GAAGC,UAAU,CAACF,IAAI,CAACG,YAAL,IAAqB,CAAtB,CAAtB;AACA,gBAAIH,IAAI,CAACI,IAAL,KAAc,YAAlB,EAAgCb,OAAO,IAAIU,GAAX;AAChC,gBAAID,IAAI,CAACI,IAAL,KAAc,QAAlB,EAA4BZ,MAAM,IAAIS,GAAV;AAC7B,WAJD;AAKD;AACF,OATD;AAUA,YAAM3D,GAAG,GAAG4D,UAAU,CAACZ,YAAY,CAACD,GAAD,CAAZ,CAAkB/C,GAAlB,IAAyB,CAA1B,CAAtB;AACA,YAAME,SAAS,GAAG0D,UAAU,CAACZ,YAAY,CAACD,GAAD,CAAZ,CAAkB7C,SAAlB,IAA+B,CAAhC,CAA5B;AACA,YAAME,MAAM,GAAGwD,UAAU,CAACZ,YAAY,CAACD,GAAD,CAAZ,CAAkB3C,MAAlB,IAA4B,CAA7B,CAAzB;AACA,YAAMH,WAAW,GAAG2D,UAAU,CAACZ,YAAY,CAACD,GAAD,CAAZ,CAAkB9C,WAAlB,IAAiC,CAAlC,CAA9B;AACH,YAAM8D,OAAO,GAAGH,UAAU,CAAC,KAAK3H,KAAL,CAAWgB,QAAX,CAAoB8G,OAApB,IAA+B,CAAhC,CAA1B;AACD,YAAMC,SAAS,GAAGhE,GAAG,GAAGC,WAAN,GAAoBC,SAApB,GAAgCE,MAAhC,GAAyC2D,OAA3D;AACA,YAAMzD,MAAM,GAAK0D,SAAS,GAAGf,OAAb,GAAwB,GAAxB,GAA8BC,MAA9C;AACAF,MAAAA,YAAY,CAACD,GAAD,CAAZ,CAAkBzC,MAAlB,GAA2BA,MAAM,CAAC2D,OAAP,CAAe,CAAf,CAA3B;AACAjB,MAAAA,YAAY,CAACD,GAAD,CAAZ,CAAkBxC,SAAlB,GAA8B,CAACyD,SAAS,GAAG1D,MAAb,EAAqB2D,OAArB,CAA6B,CAA7B,CAA9B;AAEI,WAAKhG,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EACR,GAAGmC,IAAI,CAACnC,QADA;AAERuD,UAAAA,SAAS,EAAEwC;AAFH;AADW,OAAL,CAAlB,EAKI,KAAKvC,yBALT;AAMD,KAzSqC;;AAAA,SA2StCyD,uBA3SsC,GA2SZ,CAACd,SAAD,EAAYe,OAAZ,EAAqBC,SAArB,KAAmC;AAC3D,YAAMnH,QAAQ,GAAG,EAAE,GAAG,KAAKhB,KAAL,CAAWgB;AAAhB,OAAjB;AACA,YAAMgF,IAAI,GAAGhF,QAAQ,CAACuD,SAAT,CAAmB2D,OAAnB,CAAb;AACA,UAAI,CAAClC,IAAI,CAAC5B,aAAV,EAAyB4B,IAAI,CAAC5B,aAAL,GAAqB,EAArB;;AACzB,UAAI+D,SAAJ,EAAe;AACb,YAAI,CAACnC,IAAI,CAAC5B,aAAL,CAAmBZ,QAAnB,CAA4B2D,SAA5B,CAAL,EAA6C;AAC3CnB,UAAAA,IAAI,CAAC5B,aAAL,CAAmBgE,IAAnB,CAAwBjB,SAAxB;AACD;AACF,OAJD,MAIO;AACLnB,QAAAA,IAAI,CAAC5B,aAAL,GAAqB4B,IAAI,CAAC5B,aAAL,CAAmBhB,MAAnB,CAA0BiF,CAAC,IAAIA,CAAC,KAAKlB,SAArC,CAArB;AACD,OAV0D,CAW3D;;;AACA,UAAIH,OAAO,GAAG,CAAd;AACA,UAAIC,MAAM,GAAG,CAAb;AACA,OAACjB,IAAI,CAAC5B,aAAL,IAAsB,EAAvB,EAA2B8C,OAA3B,CAAmCC,SAAS,IAAI;AAC9C,cAAMC,KAAK,GAAG,KAAKpH,KAAL,CAAWI,SAAX,CAAqBiH,IAArB,CAA0BC,CAAC,IAAIA,CAAC,CAACH,SAAF,KAAgBA,SAA/C,CAAd;;AACA,YAAIC,KAAK,IAAIG,KAAK,CAACC,OAAN,CAAcJ,KAAK,CAAC7C,SAApB,CAAb,EAA6C;AAC3C6C,UAAAA,KAAK,CAAC7C,SAAN,CAAgB2C,OAAhB,CAAwBO,IAAI,IAAI;AAC9B,kBAAMC,GAAG,GAAGC,UAAU,CAACF,IAAI,CAACG,YAAL,IAAqB,CAAtB,CAAtB;AACA,gBAAIH,IAAI,CAACI,IAAL,KAAc,YAAlB,EAAgCb,OAAO,IAAIU,GAAX;AAChC,gBAAID,IAAI,CAACI,IAAL,KAAc,QAAlB,EAA4BZ,MAAM,IAAIS,GAAV;AAC7B,WAJD;AAKD;AACF,OATD;AAUA,YAAM3D,GAAG,GAAG4D,UAAU,CAAC3B,IAAI,CAACjC,GAAL,IAAY,CAAb,CAAtB;AACA,YAAME,SAAS,GAAG0D,UAAU,CAAC3B,IAAI,CAAC/B,SAAL,IAAkB,CAAnB,CAA5B;AACA,YAAME,MAAM,GAAGwD,UAAU,CAAC3B,IAAI,CAAC7B,MAAL,IAAe,CAAhB,CAAzB;AACA,YAAMH,WAAW,GAAG2D,UAAU,CAAC3B,IAAI,CAAChC,WAAL,IAAoB,CAArB,CAA9B;AACA,YAAM8D,OAAO,GAAGH,UAAU,CAAC,KAAK3H,KAAL,CAAWgB,QAAX,CAAoB8G,OAApB,IAA+B,CAAhC,CAA1B;AACA,YAAMC,SAAS,GAAGhE,GAAG,GAAGC,WAAN,GAAoBC,SAApB,GAAgCE,MAAhC,GAAyC2D,OAA3D;AACA,YAAMzD,MAAM,GAAK0D,SAAS,GAAGf,OAAb,GAAwB,GAAxB,GAA8BC,MAA9C;AACAjB,MAAAA,IAAI,CAAC3B,MAAL,GAAcA,MAAM,CAAC2D,OAAP,CAAe,CAAf,CAAd;AACAhC,MAAAA,IAAI,CAAC1B,SAAL,GAAiB,CAACyD,SAAS,GAAG1D,MAAb,EAAqB2D,OAArB,CAA6B,CAA7B,CAAjB;AACA,WAAKhG,QAAL,CAAc;AAAEhB,QAAAA;AAAF,OAAd,EAA4B,KAAKwD,yBAAjC;AACD,KA7UqC;;AAAA,SA+UtCA,yBA/UsC,GA+UV,MAAM;AAEhC,YAAM;AAAED,QAAAA,SAAF;AAAa+D,QAAAA,cAAb;AAA6BC,QAAAA,iBAA7B;AAAgDC,QAAAA,cAAhD;AAAgEC,QAAAA;AAAhE,UAAmF,KAAKzI,KAAL,CAAWgB,QAApG;AACA,UAAI0H,SAAS,GAAG,CAAhB;AACD,OAACnE,SAAS,IAAI,EAAd,EAAkB2C,OAAlB,CAA0BlB,IAAI,IAAI;AAChC0C,QAAAA,SAAS,IAAIf,UAAU,CAAC3B,IAAI,CAAC1B,SAAL,IAAkB,CAAnB,CAAvB;AACD,OAFD,EAJiC,CAQjC;;AACD,YAAMqE,aAAa,GAAIhB,UAAU,CAACW,cAAc,IAAI,CAAnB,CAAV,GAAkCX,UAAU,CAACY,iBAAiB,IAAI,CAAtB,CAA7C,GAAyE,GAA/F;AACCG,MAAAA,SAAS,IAAIf,UAAU,CAACa,cAAc,IAAI,CAAnB,CAAV,GAAkCG,aAA/C,CAViC,CAYjC;;AACA,UAAIC,UAAU,GAAGF,SAAjB;;AACA,UAAID,cAAJ,EAAoB;AAClBG,QAAAA,UAAU,GAAGF,SAAS,GAAGf,UAAU,CAACc,cAAD,CAAnC;AACD;;AAED,WAAKzG,QAAL,CAAcmB,IAAI,KAAK;AACrBnC,QAAAA,QAAQ,EAAE,EACR,GAAGmC,IAAI,CAACnC,QADA;AAER0H,UAAAA,SAAS,EAAEE,UAAU,CAACZ,OAAX,CAAmB,CAAnB,CAFH;AAGRa,UAAAA,aAAa,EAAED,UAAU,CAACZ,OAAX,CAAmB,CAAnB,CAHP;AAIRW,UAAAA,aAAa,EAAEA,aAAa,CAACX,OAAd,CAAsB,CAAtB;AAJP;AADW,OAAL,CAAlB;AAQA,KAzWqC;;AAAA,SA2WtCc,eA3WsC,GA2WnBhC,GAAD,IAAS,KAAK9E,QAAL,CAAc;AAAEzB,MAAAA,SAAS,EAAEuG;AAAb,KAAd,CA3WW;;AAAA,SA6WtCiC,iBA7WsC,GA6WjBC,CAAD,IAAO,KAAKhH,QAAL,CAAc;AAAEd,MAAAA,KAAK,EAAE8H,CAAC,CAACC,MAAF,CAAStC;AAAlB,KAAd,CA7WW;;AAAA,SA+WtCuC,YA/WsC,GA+WvB,MAAOF,CAAP,IAAa;AAC5BA,MAAAA,CAAC,CAACG,cAAF;AACA,YAAM;AAAE1I,QAAAA,SAAF;AAAaO,QAAAA,QAAb;AAAuBf,QAAAA,SAAvB;AAAkCiB,QAAAA;AAAlC,UAA4C,KAAKlB,KAAvD;AACA,UAAI,CAACgB,QAAQ,CAACsE,QAAd,EAAwB,OAAO7C,KAAK,CAAC,sBAAD,CAAZ;AACxB,UAAIzB,QAAQ,CAACuD,SAAT,CAAmB6E,MAAnB,KAA8B,CAAlC,EAAqC,OAAO3G,KAAK,CAAC,oCAAD,CAAZ;AAErC,YAAM4G,QAAQ,GAAG,EACf,GAAGrI,QADY;AAEfE,QAAAA,KAFe;AAGfoI,QAAAA,MAAM,EAAE,SAHO;AAIfC,QAAAA,SAAS,EAAEzJ,eAAe;AAJX,OAAjB;;AAOA,UAAIW,SAAJ,EAAe;AACb,cAAMb,SAAS,CAACC,GAAG,CAACT,EAAD,EAAK,WAAL,EAAkBqB,SAAlB,CAAJ,EAAkC4I,QAAlC,CAAf;AACD,OAFD,MAEO;AACLA,QAAAA,QAAQ,CAACG,UAAT,GAAuB,KAAI,OAAOvJ,SAAS,CAACmJ,MAAO,EAAnD;AACA,cAAMzJ,MAAM,CAACJ,UAAU,CAACH,EAAD,EAAK,WAAL,CAAX,EAA8BiK,QAA9B,CAAZ;AACD;;AAED,WAAKrH,QAAL,CAAc;AACZxB,QAAAA,QAAQ,EAAE,KADE;AAEZC,QAAAA,SAAS,EAAE,IAFC;AAGZO,QAAAA,QAAQ,EAAE,KAAKC,oBAAL,EAHE;AAIZC,QAAAA,KAAK,EAAE;AAJK,OAAd;AAMA,WAAKQ,cAAL;AACD,KA1YuC;;AAAA,SA2YxC+H,WA3YwC,GA2Y1B,mBACV,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAE,KAAKzJ,KAAL,CAAWwB,SAAxB;AAAmC,MAAA,MAAM,EAAE,MAAM,KAAKQ,QAAL,CAAc;AAAER,QAAAA,SAAS,EAAE;AAAb,OAAd,CAAjD;AAAsF,MAAA,QAAQ,MAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8B,KAAKxB,KAAL,CAAWyB,QAAzC,CADF,CADF,eAIE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,SAAhB;AAA0B,MAAA,OAAO,EAAE,MAAM,KAAKO,QAAL,CAAc;AAAER,QAAAA,SAAS,EAAE;AAAb,OAAd,CAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAJF,CA5YoC;;AAAA,SAsZxCkI,gBAtZwC,GAsZrB,MAAM;AACvB,YAAM;AAAEtJ,QAAAA,SAAF;AAAauJ,QAAAA,iBAAb;AAAgC3I,QAAAA;AAAhC,UAA6C,KAAKhB,KAAxD;AACA,UAAI2J,iBAAiB,KAAK,IAA1B,EAAgC,OAAO,IAAP;AAEhC,YAAM3D,IAAI,GAAGhF,QAAQ,CAACuD,SAAT,CAAmBoF,iBAAnB,CAAb;AACA,YAAMC,QAAQ,GAAG,IAAIC,GAAJ,CAAQ7D,IAAI,CAAC5B,aAAL,IAAsB,EAA9B,CAAjB;AAEA,0BACE;AAAK,QAAA,KAAK,EAAE;AACV0F,UAAAA,QAAQ,EAAE,OADA;AAEVC,UAAAA,MAAM,EAAE,IAFE;AAGVC,UAAAA,GAAG,EAAE,KAHK;AAIVC,UAAAA,IAAI,EAAE,KAJI;AAKVC,UAAAA,UAAU,EAAE,MALF;AAMVC,UAAAA,MAAM,EAAE,mBANE;AAOVC,UAAAA,YAAY,EAAE,KAPJ;AAQVC,UAAAA,OAAO,EAAE,MARC;AASVC,UAAAA,SAAS,EAAE,kCATD;AAUVC,UAAAA,KAAK,EAAE,OAVG;AAWVC,UAAAA,SAAS,EAAE,MAXD;AAYVC,UAAAA,SAAS,EAAE;AAZD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAcE;AAAI,QAAA,KAAK,EAAE;AAAEC,UAAAA,KAAK,EAAE,SAAT;AAAoBC,UAAAA,YAAY,EAAE;AAAlC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAdF,eAeE;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,KAAK,EAAE;AAAET,UAAAA,UAAU,EAAE;AAAd,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,CADF,CADF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG9J,SAAS,CAAC0B,GAAV,CAAc8I,EAAE,iBACf;AAAI,QAAA,GAAG,EAAEA,EAAE,CAACzD,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,OAAO,EAAEyC,QAAQ,CAACiB,GAAT,CAAaD,EAAE,CAACzD,SAAhB,CAFX;AAGE,QAAA,QAAQ,EAAE6B,CAAC,IACT,KAAKf,uBAAL,CAA6B2C,EAAE,CAACzD,SAAhC,EAA2CwC,iBAA3C,EAA8DX,CAAC,CAACC,MAAF,CAAS/F,OAAvE,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,eAUE;AAAI,QAAA,KAAK,EAAE;AAAE4H,UAAAA,UAAU,EAAE,MAAd;AAAsBJ,UAAAA,KAAK,EAAE;AAA7B,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsDE,EAAE,CAACzD,SAAzD,CAVF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKyD,EAAE,CAACrG,SAAH,CAAazC,GAAb,CAAiBiJ,EAAE,IAAIA,EAAE,CAACC,SAA1B,EAAqC7F,IAArC,CAA0C,IAA1C,CAAL,CAXF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKyF,EAAE,CAACrG,SAAH,CAAazC,GAAb,CAAiBiJ,EAAE,IAAIA,EAAE,CAAClD,IAA1B,EAAgC1C,IAAhC,CAAqC,IAArC,CAAL,CAZF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKyF,EAAE,CAACrG,SAAH,CAAazC,GAAb,CAAiBiJ,EAAE,IAAIA,EAAE,CAACnD,YAA1B,EAAwCzC,IAAxC,CAA6C,IAA7C,CAAL,CAbF,CADD,CADH,CAVF,CAfF,eA6CE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,SAAS,EAAC,wBAAlB;AAA2C,QAAA,OAAO,EAAE,MAAM,KAAKnD,QAAL,CAAc;AAAE1B,UAAAA,cAAc,EAAE;AAAlB,SAAd,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CA7CF,CADF;AAqDD,KAlduC;;AAAA,SAodvC2K,qBApduC,GAodf,MAAM;AAC3B,YAAM;AAAEjK,QAAAA;AAAF,UAAe,KAAKhB,KAA1B;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,EAEGgB,QAAQ,CAACkK,YAAT,KAA0B,UAA1B,gBACC;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAElK,QAAQ,CAACwI,UAHlB;AAIE,QAAA,QAAQ,MAJV;AAKE,QAAA,WAAW,EAAC,MALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,gBASC;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAExI,QAAQ,CAACwI,UAHlB;AAIE,QAAA,QAAQ,EAAER,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,YAAvB,EAAqCuC,CAAC,CAACC,MAAF,CAAStC,KAA9C,CAJjB;AAKE,QAAA,WAAW,EAAC,mBALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAXJ,CADF;AAsBD,KA5eqC;;AAAA,SA6exCwE,0BA7ewC,GA6eX,MAAM;AAC/B,YAAM;AAAE7J,QAAAA,cAAF;AAAkBF,QAAAA;AAAlB,UAAiD,KAAKpB,KAA5D;AACA,YAAMoL,QAAQ,GAAG9J,cAAc,CAAC8B,MAAf,CAAsBiI,CAAC,IACtC,CAACA,CAAC,CAAClF,OAAF,IAAa,EAAd,EAAkBmF,WAAlB,GAAgC9H,QAAhC,CAAyCpC,0BAA0B,CAACkK,WAA3B,EAAzC,CADe,CAAjB;AAGA,0BACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,mBAFZ;AAGE,QAAA,WAAW,EAAC,uBAHd;AAIE,QAAA,KAAK,EAAElK,0BAJT;AAKE,QAAA,QAAQ,EAAE4H,CAAC,IAAI,KAAKhH,QAAL,CAAc;AAAEZ,UAAAA,0BAA0B,EAAE4H,CAAC,CAACC,MAAF,CAAStC;AAAvC,SAAd,CALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eASE;AAAK,QAAA,KAAK,EAAE;AAAE6D,UAAAA,SAAS,EAAE,GAAb;AAAkBC,UAAAA,SAAS,EAAE;AAA7B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,CADF,CADF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGW,QAAQ,CAACtJ,GAAT,CAAa,CAACuJ,CAAD,EAAIE,CAAJ,kBACZ;AAAI,QAAA,GAAG,EAAEF,CAAC,CAACtJ,EAAF,IAAQwJ,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKF,CAAC,CAAClF,OAAP,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKkF,CAAC,CAACG,SAAP,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKH,CAAC,CAACI,UAAP,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAC,wBADZ;AAEE,QAAA,OAAO,EAAE,MAAM,KAAK3F,mBAAL,CAAyBuF,CAAzB,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAJF,CADD,CADH,EAcGD,QAAQ,CAAChC,MAAT,KAAoB,CAApB,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,OAAO,EAAE,CAAb;AAAgB,QAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,CAfJ,CATF,CADF,CATF,eAyCE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,+BAAhC;AAAgE,QAAA,OAAO,EAAE,KAAKsC,wBAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAzCF,CADF,CADF;AA+CD,KAjiBqC;;AAAA,SAkiBxCC,qBAliBwC,GAkiBhB,MAAM;AAC5B,YAAM;AAAEzL,QAAAA,SAAF;AAAawE,QAAAA;AAAb,UAAuC,KAAK1E,KAAlD;AACA,YAAMoL,QAAQ,GAAGlL,SAAS,CAACkD,MAAV,CAAiBwI,CAAC,IACjC,CAACA,CAAC,CAACrG,QAAF,IAAc,EAAf,EAAmB+F,WAAnB,GAAiC9H,QAAjC,CAA0CkB,qBAAqB,CAAC4G,WAAtB,EAA1C,KACA,CAACM,CAAC,CAACC,QAAF,IAAc,EAAf,EAAmBP,WAAnB,GAAiC9H,QAAjC,CAA0CkB,qBAAqB,CAAC4G,WAAtB,EAA1C,CADA,IAEA,CAACM,CAAC,CAACE,aAAF,IAAmB,EAApB,EAAwBR,WAAxB,GAAsC9H,QAAtC,CAA+CkB,qBAAqB,CAAC4G,WAAtB,EAA/C,CAHe,CAAjB;AAKE,0BACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,mBAFZ;AAGE,QAAA,QAAQ,EAAEtC,CAAC,IAAI,KAAKhH,QAAL,CAAc;AAAEZ,UAAAA,0BAA0B,EAAE4H,CAAC,CAACC,MAAF,CAAStC;AAAvC,SAAd,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eAOE;AAAK,QAAA,KAAK,EAAE;AAAE6D,UAAAA,SAAS,EAAE,GAAb;AAAkBC,UAAAA,SAAS,EAAE;AAA7B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,CADF,CADF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGW,QAAQ,CAACtJ,GAAT,CAAa,CAACuJ,CAAD,EAAIE,CAAJ,kBACZ;AAAI,QAAA,GAAG,EAAEF,CAAC,CAACtJ,EAAF,IAAQwJ,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKF,CAAC,CAAClF,OAAP,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKkF,CAAC,CAACG,SAAP,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKH,CAAC,CAACI,UAAP,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAC,wBADZ;AAEE,QAAA,OAAO,EAAE,MAAM,KAAK3F,mBAAL,CAAyBuF,CAAzB,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAJF,CADD,CADH,EAcGD,QAAQ,CAAChC,MAAT,KAAoB,CAApB,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,OAAO,EAAE,CAAb;AAAgB,QAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADF,CAfJ,CATF,CADF,CAPF,eAuCE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,+BAAhC;AAAgE,QAAA,OAAO,EAAE,KAAKsC,wBAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCF,CADF,CADF;AA6CH,KAtlBuC;;AAAA,SAwlBvCK,oBAxlBuC,GAwlBhB,MAAM;AAC1B,YAAM;AAAE5L,QAAAA,QAAF;AAAYW,QAAAA,oBAAZ;AAAkCC,QAAAA;AAAlC,UAAyD,KAAKf,KAApE;AACA,YAAMoL,QAAQ,GAAGjL,QAAQ,CAACiD,MAAT,CAAgBG,CAAC,IAChC,CAACA,CAAC,CAACyI,WAAF,IAAiB,EAAlB,EAAsBV,WAAtB,GAAoC9H,QAApC,CAA6C1C,oBAAoB,CAACwK,WAArB,EAA7C,KACA,CAAC/H,CAAC,CAACM,aAAF,IAAmB,EAApB,EAAwByH,WAAxB,GAAsC9H,QAAtC,CAA+C1C,oBAAoB,CAACwK,WAArB,EAA/C,CADA,IAEA,CAAC/H,CAAC,CAACI,QAAF,IAAc,EAAf,EAAmB2H,WAAnB,GAAiC9H,QAAjC,CAA0C1C,oBAAoB,CAACwK,WAArB,EAA1C,CAHe,CAAjB;AAKA,0BACE;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,mBAFZ;AAGE,QAAA,WAAW,EAAC,2BAHd;AAIE,QAAA,KAAK,EAAExK,oBAJT;AAKE,QAAA,QAAQ,EAAEkI,CAAC,IAAI,KAAKhH,QAAL,CAAc;AAAElB,UAAAA,oBAAoB,EAAEkI,CAAC,CAACC,MAAF,CAAStC;AAAjC,SAAd,CALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,eASG;AAAK,QAAA,KAAK,EAAE;AAAE6D,UAAAA,SAAS,EAAE,GAAb;AAAkBC,UAAAA,SAAS,EAAE;AAA7B,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,SAAS,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,CADF,CADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGW,QAAQ,CAACtJ,GAAT,CAAa,CAACyB,CAAD,EAAIgI,CAAJ,kBACZ;AAAI,QAAA,GAAG,EAAEhI,CAAC,CAACxB,EAAF,IAAQwJ,CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKhI,CAAC,CAACN,SAAP,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKM,CAAC,CAACM,aAAP,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,SAAS,EAAC,wBADZ;AAEE,QAAA,OAAO,EAAE,MAAM,KAAKuC,wBAAL,CAA8B7C,CAA9B,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAHF,CADD,CADH,EAaZ6H,QAAQ,CAAChC,MAAT,KAAoB,CAApB,iBACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,OAAO,EAAE,CAAb;AAAgB,QAAA,SAAS,EAAC,aAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CAdJ,CARF,CADD,CATH,eAuCE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,+BAAhC;AAAgE,QAAA,OAAO,EAAE,KAAKrG,kBAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCF,CADF,CADF;AA6CD,KA5oBqC;;AAAA,SA+oBtCkJ,UA/oBsC,GA+oBzB,MAAM;AACjB,YAAM;AAAE1L,QAAAA;AAAF,UAAgB,KAAKP,KAA3B;AACA,YAAMkM,QAAQ,GAAG,CAAC,OAAD,EAAU,OAAV,EAAmB,OAAnB,CAAjB;AACA,0BACE;AAAI,QAAA,SAAS,EAAC,mBAAd;AAAkC,QAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGD,QAAQ,CAACpK,GAAT,CAAa,CAACsK,GAAD,EAAMtF,GAAN,kBACZ;AAAI,QAAA,SAAS,EAAC,UAAd;AAAyB,QAAA,GAAG,EAAEsF,GAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAG,WAAU7L,SAAS,KAAKuG,GAAd,GAAoB,SAApB,GAAgC,EAAG,EAF3D;AAGE,QAAA,OAAO,EAAE,MAAM,KAAKgC,eAAL,CAAqBhC,GAArB,CAHjB;AAIE,QAAA,KAAK,EAAE;AACL4D,UAAAA,KAAK,EAAE,SADF;AAELR,UAAAA,UAAU,EAAE3J,SAAS,KAAKuG,GAAd,GAAoB,SAApB,GAAgC,MAFvC;AAGLqD,UAAAA,MAAM,EAAE,mBAHH;AAILkC,UAAAA,YAAY,EAAE9L,SAAS,KAAKuG,GAAd,GAAoB,MAApB,GAA6BwF,SAJtC;AAKLxB,UAAAA,UAAU,EAAEvK,SAAS,KAAKuG,GAAd,GAAoB,MAApB,GAA6B;AALpC,SAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAYGsF,GAZH,CADF,CADD,CADH,CADF;AAsBD,KAxqBqC;;AAAA,SA0qBtCG,cA1qBsC,GA0qBrB,MAAM;AACrB,YAAM;AAAEvL,QAAAA,QAAF;AAAYH,QAAAA;AAAZ,UAAmC,KAAKb,KAA9C;AACA,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,6BAFZ;AAGE,QAAA,OAAO,EAAE,KAAK4G,mBAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADF,eAUE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAkC,QAAA,KAAK,EAAE;AAAE4F,UAAAA,SAAS,EAAE;AAAb,SAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAO,QAAA,SAAS,EAAC,sBAAjB;AAAwC,QAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAVF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAXF,CADF,CADF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,CAACzL,QAAQ,CAACuD,SAAT,IAAsB,EAAvB,EAA2BzC,GAA3B,CAA+B,CAACkE,IAAD,EAAOc,GAAP,kBAC9B;AAAI,QAAA,GAAG,EAAEA,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKd,IAAI,CAACrC,QAAV,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKqC,IAAI,CAACpC,QAAV,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKoC,IAAI,CAAClC,OAAV,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKkC,IAAI,CAACE,GAAV,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAEF,IAAI,CAACjC,GAHd;AAIE,QAAA,GAAG,EAAC,GAJN;AAKE,QAAA,KAAK,EAAE;AAAEwG,UAAAA,KAAK,EAAE;AAAT,SALT;AAME,QAAA,QAAQ,EAAEvB,CAAC,IAAI,KAAKnC,oBAAL,CAA0BC,GAA1B,EAA+B,KAA/B,EAAsCkC,CAAC,CAACC,MAAF,CAAStC,KAA/C,CANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CALF,eAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAEX,IAAI,CAAChC,WAHd;AAIE,QAAA,GAAG,EAAC,GAJN;AAKE,QAAA,KAAK,EAAE;AAAEuG,UAAAA,KAAK,EAAE;AAAT,SALT;AAME,QAAA,QAAQ,EAAEvB,CAAC,IAAI,KAAKnC,oBAAL,CAA0BC,GAA1B,EAA+B,aAA/B,EAA8CkC,CAAC,CAACC,MAAF,CAAStC,KAAvD,CANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAfF,eAyBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAEX,IAAI,CAAC/B,SAHd;AAIE,QAAA,GAAG,EAAC,GAJN;AAKE,QAAA,KAAK,EAAE;AAAEsG,UAAAA,KAAK,EAAE;AAAT,SALT;AAME,QAAA,QAAQ,EAAEvB,CAAC,IAAI,KAAKnC,oBAAL,CAA0BC,GAA1B,EAA+B,WAA/B,EAA4CkC,CAAC,CAACC,MAAF,CAAStC,KAArD,CANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAzBF,eAmCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAEX,IAAI,CAAC7B,MAHd;AAIE,QAAA,GAAG,EAAC,GAJN;AAKE,QAAA,KAAK,EAAE;AAAEoG,UAAAA,KAAK,EAAE;AAAT,SALT;AAME,QAAA,QAAQ,EAAEvB,CAAC,IAAI,KAAKnC,oBAAL,CAA0BC,GAA1B,EAA+B,QAA/B,EAAyCkC,CAAC,CAACC,MAAF,CAAStC,KAAlD,CANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAnCF,eA6CC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,qBAFZ;AAGE,QAAA,OAAO,EAAE,MAAM,KAAK3E,QAAL,CAAc;AAAE1B,UAAAA,cAAc,EAAE,IAAlB;AAAwBqJ,UAAAA,iBAAiB,EAAE7C;AAA3C,SAAd,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKGd,IAAI,CAAC5B,aAAL,IAAsB4B,IAAI,CAAC5B,aAAL,CAAmBgF,MAAnB,GAA4B,CAAlD,GACGpD,IAAI,CAAC5B,aAAL,CAAmBe,IAAnB,CAAwB,IAAxB,CADH,GAEG,YAPN,CADD,CA7CD,eAwDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKa,IAAI,CAAC3B,MAAV,CAxDF,eAyDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK2B,IAAI,CAAC1B,SAAV,CAzDF,CADD,CADH,EA8DG,CAAC,CAACtD,QAAQ,CAACuD,SAAV,IAAuBvD,QAAQ,CAACuD,SAAT,CAAmB6E,MAAnB,KAA8B,CAAtD,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,OAAO,EAAC,IAAZ;AAAiB,QAAA,SAAS,EAAC,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CA/DJ,CAhBF,CADF,CAVF,EAiGGvI,kBAAkB,IAAI,KAAKkL,oBAAL,EAjGzB,CADF;AAqGD,KAjxBqC;;AAAA,SAmxBtCW,cAnxBsC,GAmxBrB,MAAM;AACrB,YAAM;AAAE1L,QAAAA;AAAF,UAAe,KAAKhB,KAA1B;AACA,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAEgB,QAAQ,CAAC2E,YAA5E;AAA0F,QAAA,QAAQ,EAAEqD,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,cAAvB,EAAuCuC,CAAC,CAACC,MAAF,CAAStC,KAAhD,CAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAE3F,QAAQ,CAAC4E,YAA5E;AAA0F,QAAA,QAAQ,EAAEoD,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,cAAvB,EAAuCuC,CAAC,CAACC,MAAF,CAAStC,KAAhD,CAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,CADF,eAWE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAC,GAAxD;AAA4D,QAAA,KAAK,EAAE3F,QAAQ,CAACyE,MAA5E;AAAoF,QAAA,QAAQ,MAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAC,GAAxD;AAA4D,QAAA,KAAK,EAAEzE,QAAQ,CAAC0E,MAA5E;AAAoF,QAAA,QAAQ,MAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,CAXF,eAqBE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE1E,QAAQ,CAACsH,cAA9E;AAA8F,QAAA,QAAQ,EAAEU,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,gBAAvB,EAAyCuC,CAAC,CAACC,MAAF,CAAStC,KAAlD,CAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3F,QAAQ,CAACuH,iBAA9E;AAAiG,QAAA,QAAQ,EAAES,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,mBAAvB,EAA4CuC,CAAC,CAACC,MAAF,CAAStC,KAArD,CAAhH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,eASE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3F,QAAQ,CAAC2H,aAA9E;AAA6F,QAAA,QAAQ,MAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CATF,eAaE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3H,QAAQ,CAACwH,cAA9E;AAA8F,QAAA,QAAQ,EAAEQ,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,gBAAvB,EAAyCuC,CAAC,CAACC,MAAF,CAAStC,KAAlD,CAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAbF,CArBF,eAuCE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3F,QAAQ,CAAC2L,WAA9E;AAA2F,QAAA,QAAQ,EAAE3D,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,aAAvB,EAAsCuC,CAAC,CAACC,MAAF,CAAStC,KAA/C,CAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADF,eAKE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3F,QAAQ,CAAC4L,cAA9E;AAA8F,QAAA,QAAQ,EAAE5D,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,gBAAvB,EAAyCuC,CAAC,CAACC,MAAF,CAAStC,KAAlD,CAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CALF,CAvCF,CADF;AAoDD,KAz0BqC;;AAAA,SA20BtCkG,cA30BsC,GA20BrB,mBACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AAAU,MAAA,SAAS,EAAC,8BAApB;AAAmD,MAAA,IAAI,EAAC,GAAxD;AAA4D,MAAA,KAAK,EAAE,KAAK7M,KAAL,CAAWkB,KAA9E;AAAqF,MAAA,QAAQ,EAAE,KAAK6H,iBAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,CA50BoC;;AAAA,SAo1BtC+D,UAp1BsC,GAo1BzB,MAAM;AACjB,YAAM;AAAEvM,QAAAA,SAAF;AAAaS,QAAAA;AAAb,UAA0B,KAAKhB,KAArC;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAM,QAAA,SAAS,EAAC,aAAhB;AAA8B,QAAA,QAAQ,EAAE,KAAKkJ,YAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,KAAK,EAAE;AAAE6D,UAAAA,IAAI,EAAE,CAAR;AAAWtC,UAAAA,SAAS,EAAE,MAAtB;AAA8BJ,UAAAA,OAAO,EAAE;AAAvC,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADF,eAEE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE;AACE,QAAA,SAAS,EAAC,8BADZ;AAEE,QAAA,KAAK,EAAErJ,QAAQ,CAACkK,YAFlB;AAGE,QAAA,QAAQ,EAAElC,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,cAAvB,EAAuCuC,CAAC,CAACC,MAAF,CAAStC,KAAhD,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE;AAAQ,QAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBALF,eAME;AAAQ,QAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,CAFF,CADF,EAYK,KAAKsE,qBAAL,EAZL,eAaE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,8BAFZ;AAGE,QAAA,KAAK,EAAEjK,QAAQ,CAACgM,WAHlB;AAIE,QAAA,QAAQ,EAAEhE,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,aAAvB,EAAsCuC,CAAC,CAACC,MAAF,CAAStC,KAA/C,CAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAbF,eAsBE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAE3F,QAAQ,CAACsI,MAA5E;AAAoF,QAAA,QAAQ,MAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAtBF,eA0BE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAEtI,QAAQ,CAACiM,KAA5E;AAAmF,QAAA,QAAQ,EAAEjE,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,OAAvB,EAAgCuC,CAAC,CAACC,MAAF,CAAStC,KAAzC,CAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CA1BF,CAFF,eAmCE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,cAFZ;AAGE,QAAA,WAAW,EAAC,iBAHd;AAIE,QAAA,KAAK,EAAE3F,QAAQ,CAACsE,QAJlB;AAKE,QAAA,QAAQ,MALV;AAME,QAAA,OAAO,EAAE,KAAKb,mBANhB;AAOE,QAAA,KAAK,EAAE;AAAEyI,UAAAA,MAAM,EAAE;AAAV,SAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAUE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,SAAS,EAAC,kCAAlB;AAAqD,QAAA,IAAI,EAAC,QAA1D;AAAmE,QAAA,OAAO,EAAE,KAAKzI,mBAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAVF,CAFF,CADF,eAkBE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,SAAS,EAAC,cAFZ;AAGE,QAAA,WAAW,EAAC,cAHd;AAIE,QAAA,KAAK,EAAEzD,QAAQ,CAAC6E,eAAT,IAA4B,EAJrC;AAKE,QAAA,QAAQ,MALV;AAME,QAAA,OAAO,EAAE,KAAK1E,wBANhB;AAOE,QAAA,KAAK,EAAE;AAAE+L,UAAAA,MAAM,EAAE;AAAV,SAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAUE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,SAAS,EAAC,kCAAlB;AAAqD,QAAA,IAAI,EAAC,QAA1D;AAAmE,QAAA,OAAO,EAAE,KAAK/L,wBAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CAVF,CAFF,CAlBF,eAmCE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,8BAA7B;AAA4D,QAAA,KAAK,EAAEH,QAAQ,CAACwE,QAA5E;AAAsF,QAAA,QAAQ,MAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAnCF,eAuCE;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAExE,QAAQ,CAACyH,cAA9E;AAA8F,QAAA,QAAQ,EAAEO,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,gBAAvB,EAAyCuC,CAAC,CAACC,MAAF,CAAStC,KAAlD,CAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAvCF,CAnCF,eA+EI;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADA,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE,KAAK3G,KAAL,CAAWgB,QAAX,CAAoBN,YAApB,IAAoC,EAF7C;AAGE,QAAA,QAAQ,EAAEsI,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,cAAvB,EAAuCuC,CAAC,CAACC,MAAF,CAAStC,KAAhD,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CADA,eASA;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,KAAK,EAAE,KAAK3G,KAAL,CAAWgB,QAAX,CAAoBL,UAApB,IAAkC,EAF3C;AAGE,QAAA,QAAQ,EAAEqI,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,YAAvB,EAAqCuC,CAAC,CAACC,MAAF,CAAStC,KAA9C,CAHjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CATA,eAiBA;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3F,QAAQ,CAAC8G,OAA9E;AAAuF,QAAA,QAAQ,EAAEkB,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,SAAvB,EAAkCuC,CAAC,CAACC,MAAF,CAAStC,KAA3C,CAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CAjBA,eAqBA;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,8BAA/B;AAA8D,QAAA,KAAK,EAAE3F,QAAQ,CAAC0H,SAA9E;AAAyF,QAAA,QAAQ,EAAEM,CAAC,IAAI,KAAKvC,iBAAL,CAAuB,WAAvB,EAAoCuC,CAAC,CAACC,MAAF,CAAStC,KAA7C,CAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,CArBA,CA/EJ,EAyGG,KAAKsF,UAAL,EAzGH,EA0GG1L,SAAS,KAAK,CAAd,IAAmB,KAAKgM,cAAL,EA1GtB,EA2GGhM,SAAS,KAAK,CAAd,IAAmB,KAAKmM,cAAL,EA3GtB,EA4GGnM,SAAS,KAAK,CAAd,IAAmB,KAAKsM,cAAL,EA5GtB,eA6GE;AAAK,QAAA,SAAS,EAAC,sDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,sBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAK7M,KAAL,CAAWS,SAAX,GAAuB,QAAvB,GAAkC,QADrC,CADF,eAIE;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,mBAAhC;AAAoD,QAAA,OAAO,EAAE,MAAM,KAAKuB,QAAL,CAAc;AAAExB,UAAAA,QAAQ,EAAE,KAAZ;AAAmBC,UAAAA,SAAS,EAAE,IAA9B;AAAoCO,UAAAA,QAAQ,EAAE,KAAKC,oBAAL,EAA9C;AAA2EC,UAAAA,KAAK,EAAE;AAAlF,SAAd,CAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,CA7GF,CADF,CADF,EAuHI,KAAKlB,KAAL,CAAWwB,SAAX,IAAwB,KAAKiI,WAAL,EAvH5B,EAwHG,KAAKzJ,KAAL,CAAWmB,wBAAX,IAAuC,KAAKgK,0BAAL,EAxH1C,CADF;AA4HD,KAl9BqC;;AAAA,SAo9BtCgC,WAp9BsC,GAo9BxB,mBACZ;AAAK,MAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,wDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAoC,MAAA,OAAO,EAAE,MAAM,KAAKnL,QAAL,CAAc;AAAExB,QAAAA,QAAQ,EAAE;AAAZ,OAAd,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAFF,CADF,eAKE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAO,MAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eATF,CADF,CADF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACT,KAAKR,KAAL,CAAWC,SAAX,CAAqB6B,GAArB,CAAyB,CAAC8J,CAAD,EAAIL,CAAJ,kBACxB;AAAI,MAAA,GAAG,EAAEA,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,kBADZ;AAEE,MAAA,OAAO,EAAE,MAAM,KAAKvJ,QAAL,CAAc;AAC3BxB,QAAAA,QAAQ,EAAE,IADiB;AAE3BC,QAAAA,SAAS,EAAEmL,CAAC,CAAC7J,EAFc;AAG3Bf,QAAAA,QAAQ,EAAE,EAAE,GAAG4K;AAAL;AAHiB,OAAd,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQGA,CAAC,CAACpC,UARL,CADF,CADJ,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKoC,CAAC,CAACoB,WAAP,CAbF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKpB,CAAC,CAACqB,KAAP,CAdF,eAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKrB,CAAC,CAACtG,QAAP,CAfF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKsG,CAAC,CAACpG,QAAP,CAhBF,eAiBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKoG,CAAC,CAACwB,iBAAP,SAA6BxB,CAAC,CAACyB,eAA/B,CAjBF,eAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKzB,CAAC,CAAC9D,OAAP,CAlBF,eAmBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK8D,CAAC,CAACtC,MAAP,CAnBF,eAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKsC,CAAC,CAAC/C,aAAP,CApBF,CADD,CADS,CAdF,CADF,CALF,CADF,CAr9BoC;AAAA;;AA4BtC5H,EAAAA,oBAAoB,GAAG;AACrB,WAAO;AACLiK,MAAAA,YAAY,EAAE,UADT;AAEL1B,MAAAA,UAAU,EAAE,EAFP;AAGLwD,MAAAA,WAAW,EAAE,IAAIM,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CAHR;AAILlE,MAAAA,MAAM,EAAE,SAJH;AAKL2D,MAAAA,KAAK,EAAE,EALF;AAML3H,MAAAA,QAAQ,EAAE,EANL;AAOLE,MAAAA,QAAQ,EAAE,EAPL;AAQLiD,MAAAA,cAAc,EAAE,EARX;AASLX,MAAAA,OAAO,EAAE,EATJ;AAULY,MAAAA,SAAS,EAAE,EAVN;AAWL0E,MAAAA,iBAAiB,EAAE,EAXd;AAYLC,MAAAA,eAAe,EAAE,EAZZ;AAaL9I,MAAAA,SAAS,EAAE,EAbN;AAcLoB,MAAAA,YAAY,EAAE,EAdT;AAeLC,MAAAA,YAAY,EAAE,EAfT;AAgBLH,MAAAA,MAAM,EAAE,EAhBH;AAiBLC,MAAAA,MAAM,EAAE,EAjBH;AAkBL4C,MAAAA,cAAc,EAAE,EAlBX;AAmBLC,MAAAA,iBAAiB,EAAE,EAnBd;AAoBLI,MAAAA,aAAa,EAAE,EApBV;AAqBLH,MAAAA,cAAc,EAAE,EArBX;AAsBLmE,MAAAA,WAAW,EAAE,EAtBR;AAuBLC,MAAAA,cAAc,EAAE,EAvBX;AAwBL/D,MAAAA,aAAa,EAAE,EAxBV;AAyBL3H,MAAAA,KAAK,EAAE;AAzBF,KAAP;AA2BD;;AAEDuM,EAAAA,iBAAiB,GAAG;AAClB,SAAK/L,cAAL;AACA,SAAKQ,cAAL;AACA,SAAKS,aAAL;AACA,SAAKE,cAAL;AACA,SAAKD,UAAL;AACD;;AA48BD8K,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK1N,KAAL,CAAWyE,mBAAX,IAAkC,KAAKkH,qBAAL,EADrC,EAEG,KAAK3L,KAAL,CAAWa,kBAAX,IAAiC,KAAKkL,oBAAL,EAFpC,EAGG,KAAK/L,KAAL,CAAWQ,QAAX,GAAsB,KAAKsM,UAAL,EAAtB,GAA0C,KAAKK,WAAL,EAH7C,EAIG,KAAKnN,KAAL,CAAWM,cAAX,IAA6B,KAAKoJ,gBAAL,EAJhC,CADF;AAQD;;AArhCqC;;AAwhCxC,eAAe3J,eAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { Form } from 'react-bootstrap';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport { db } from '../../../../firebase';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { collection, query, where,getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\r\n\r\nclass ContractBilling extends Component {\r\n  state = {\r\n    contracts: [],\r\n    customers: [],\r\n    products: [],\r\n    taxGroups: [],\r\n    users: [],\r\n    showTaxOverlay: false,\r\n    activeTab: 0,\r\n    showForm: false,\r\n    editingId: null,\r\n    durationFrom: null,\r\n    durationTo: null,\r\n    canAddItems: false,\r\n    showProductOverlay: false,\r\n    productOverlaySearch: '',\r\n    selectedProductIds:[],\r\n    formData: this.getEmptyContractForm(),\r\n    notes: '',\r\n    showCustomerOrderOverlay: false,\r\n    customerOrderOverlaySearch: '',\r\n    selectedCustomerOrders: [],\r\n    customerOrders: [],\r\n    customerOrderLineItems: [],\r\n    showAlert: false,\r\n    alertMsg: '',\r\n  };\r\n\r\n  getEmptyContractForm() {\r\n    return {\r\n      contractType: 'Standard',\r\n      contractNo: '',\r\n      createdDate: new Date().toISOString().split('T')[0],\r\n      status: 'Entered',\r\n      refNo: '',\r\n      customer: '',\r\n      currency: '',\r\n      conversionRate: '',\r\n      stdDays: 30,\r\n      amtAgreed: '',\r\n      contrDurationFrom: '',\r\n      contrDurationTo: '',\r\n      lineItems: [],\r\n      despatchMode: '',\r\n      paymentTerms: '',\r\n      billTo: '',\r\n      shipTo: '',\r\n      freightCharges: '',\r\n      freightTaxPercent: '',\r\n      freightTaxAmt: '',\r\n      packingCharges: '',\r\n      amountLimit: '',\r\n      minimumRelease: '',\r\n      contractValue: '',\r\n      notes: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchContracts();\r\n    this.fetchCustomers();\r\n    this.fetchProducts();\r\n    this.fetchTaxGroups();\r\n    this.fetchUsers();\r\n  }\r\n\r\n  fetchContracts = async () => {\r\n    const snap = await getDocs(collection(db, 'contracts'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ contracts: data.reverse() });\r\n  };\r\n\r\n  fetchCustomers = async () => {\r\n    const snap = await getDocs(collection(db, 'customers'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ customers: data });\r\n  };\r\n// Fetch all orders for a given customer and store them in state\r\nfetchCustomerOrders = async (customerId) => {\r\n  try {\r\n    if (!customerId) return;\r\n\r\n    // Query the 'orders' collection for orders matching this customer\r\n    const q = query(\r\n      collection(db, 'orders'),\r\n      where('customerId', '==', customerId)\r\n    );\r\n\r\n    const snap = await getDocs(q);\r\n\r\n    const orders = snap.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data()\r\n    }));\r\n\r\n    // Save the orders so you can show them in a dropdown/overlay\r\n    this.setState({ customerOrders: orders });\r\n  } catch (error) {\r\n    console.error('Error fetching customer orders:', error);\r\n    alert('Failed to fetch customer orders: ' + error.message);\r\n  }\r\n};\r\n\r\n  fetchProducts = async () => {\r\n    const snap = await getDocs(collection(db, 'products'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ products: data });\r\n  };\r\nfetchUsers = async () => {\r\n  const snap = await getDocs(collection(db, 'users'));\r\n  const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  this.setState({ users: data });\r\n};\r\n  fetchTaxGroups = async () => {\r\n    const snap = await getDocs(collection(db, 'taxGroups'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ taxGroups: data });\r\n  };\r\n  checkDurationSelected = () => {\r\n  const { durationFrom, durationTo } = this.state;\r\n  this.setState({ canAddItems: !!(durationFrom && durationTo) });\r\n};\r\n\r\n  showProductOverlay = () => this.setState({ showProductOverlay: true, productOverlaySearch: '', selectedProductIds: [] });\r\n  hideProductOverlay = () => this.setState({ showProductOverlay: false, productOverlaySearch: '', selectedProductIds: [] });\r\n\r\ntoggleProductSelection = (productId, checked) => {\r\n  this.setState(prev => ({\r\n    selectedProductIds: checked\r\n      ? [...prev.selectedProductIds, productId]\r\n      : prev.selectedProductIds.filter(id => id !== productId)\r\n  }));\r\n};\r\naddSelectedProductsToLineItems = () => {\r\n  const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\r\n  const newItems = selectedProducts.map(product => ({\r\n    itemCode: product.productId || '',\r\n    itemDesc: product.ptdescription || '',\r\n    hsnCode: product.hsnCode || '',\r\n    qty: 1,\r\n    unitDayOrWk: 1,\r\n    unitPrice: product.price || 0,\r\n    months: 1,\r\n    taxGroupNames: [],\r\n    taxAmt: 0,\r\n    itemTotal: 0\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      lineItems: [...prev.formData.lineItems, ...newItems]\r\n    },\r\n    showProductOverlay: false,\r\n    selectedProductIds: []\r\n  }), this.recalculateContractTotals);\r\n};\r\n\r\n\r\n  \r\n  \r\nshowCustomerOverlay = () => this.setState({ showCustomerOverlay: true, customerOverlaySearch: '' });\r\nhideCustomerOverlay = () => this.setState({ showCustomerOverlay: false, customerOverlaySearch: '' });\r\nshowCustomerOrderOverlay = () => this.setState({ showCustomerOrderOverlay: true, customerOrderOverlaySearch: '' });\r\nideCustomerOrderOverlay = () => this.setState({ showCustomerOrderOverlay: false, customerOrderOverlaySearch: '' });\r\n\r\nformatAddress = (addr) => {\r\n  if (!addr) return '';\r\n  if (typeof addr === 'string') return addr;\r\n  return [\r\n    addr.address,\r\n    [addr.city, addr.state, addr.country].filter(Boolean).join(', '),\r\n    addr.zip\r\n  ].filter(Boolean).join('\\n');\r\n};\r\n\r\n  selectCustomer = (customer) => {\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        customer: customer.custname,\r\n        currency: customer.currency || '',\r\n        billTo: this.formatAddress(customer.billTo),\r\n        shipTo: this.formatAddress(customer.shipTo),\r\n        despatchMode: customer.despatchMode || '',\r\n        paymentTerms: customer.paymentTerms || '',\r\n        customerOrderId: '',\r\n      },\r\n      showCustomerOverlay: false,\r\n      customerOrderLineItems: [],\r\n    }), () => {\r\nthis.fetchCustomerOrders(customer.id);\r\n    });\r\n  };\r\n\r\n  selectCustomerOrder = (order) => {\r\n    const lineItems = (order.lineItems || []).map(item => ({\r\n      itemCode: item.itemCode || '',\r\n      itemDesc: item.itemDescription || '',\r\n      hsnCode: item.hsnCode || '',\r\n      uom: item.uom || '',\r\n      qty: item.qty || 1,\r\n      unitDayOrWk: 1,\r\n      unitPrice: item.unitPrice || 0,\r\n      months: 1,\r\n      taxGroupNames: [],\r\n      taxAmt: 0,\r\n      itemTotal: 0\r\n    }));\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        customerOrderId: order.orderNo,\r\n        lineItems,\r\n      },\r\n      showCustomerOrderOverlay: false,\r\n      customerOrderLineItems: lineItems,\r\n    }), this.recalculateContractTotals);\r\n  };\r\n\r\n  selectProductForLineItem = (product) => {\r\n    const newItem = {\r\n      itemCode: product.code || '',\r\n      itemDesc: product.name || '',\r\n      hsnCode: product.hsn || '',\r\n      uom: product.uom || '',\r\n      qty: 1,\r\n      unitDayOrWk: 1,\r\n      unitPrice: product.price || 0,\r\n      months: 1,\r\n      taxGroupNames: [],\r\n      taxAmt: 0,\r\n      itemTotal: 0\r\n    };\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: [...prev.formData.lineItems, newItem]\r\n      },\r\n      showProductOverlay: false\r\n    }), this.recalculateContractTotals);\r\n  };\r\n\r\n  handleInputChange = (field, value) => {\r\n    this.setState(prev => ({\r\n      formData: { ...prev.formData, [field]: value }\r\n    }), () => {\r\n      if (['freightCharges', 'freightTaxPercent', 'packingCharges', 'amtAgreed', 'conversionRate'].includes(field)) {\r\n        this.recalculateContractTotals();\r\n      }\r\n    });\r\n  };\r\n handleAddItemsClick = () => {\r\n    const { formData, durationFrom, durationTo } = this.state;\r\n    if (!formData.customer) {\r\n      this.setState({ showAlert: true, alertMsg: \"Select customer first!\" });\r\n      return;\r\n    }\r\n    if (!durationFrom || !durationTo) {\r\n      this.setState({ showAlert: true, alertMsg: \"Select contract duration first!\" });\r\n      return;\r\n    }\r\n    this.showProductOverlay();\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    const updatedItems = [...this.state.formData.lineItems];\r\n    updatedItems[idx] = { ...updatedItems[idx], [field]: value };\r\n\r\n    // Calculate taxAmt and itemTotal for this line\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (updatedItems[idx].taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const qty = parseFloat(updatedItems[idx].qty || 0);\r\n    const unitPrice = parseFloat(updatedItems[idx].unitPrice || 0);\r\n    const months = parseFloat(updatedItems[idx].months || 1);\r\n    const unitDayOrWk = parseFloat(updatedItems[idx].unitDayOrWk || 1);\r\n const stdDays = parseFloat(this.state.formData.stdDays || 0);\r\nconst baseTotal = qty * unitDayOrWk * unitPrice * months * stdDays;\r\nconst taxAmt = ((baseTotal * percent) / 100 + amount);\r\nupdatedItems[idx].taxAmt = taxAmt.toFixed(2);\r\nupdatedItems[idx].itemTotal = (baseTotal + taxAmt).toFixed(2);\r\n\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: updatedItems\r\n      }\r\n    }), this.recalculateContractTotals);\r\n  };\r\n\r\n  toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\r\n    const formData = { ...this.state.formData };\r\n    const item = formData.lineItems[lineIdx];\r\n    if (!item.taxGroupNames) item.taxGroupNames = [];\r\n    if (isChecked) {\r\n      if (!item.taxGroupNames.includes(groupName)) {\r\n        item.taxGroupNames.push(groupName);\r\n      }\r\n    } else {\r\n      item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\r\n    }\r\n    // recalculate taxAmt and total\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (item.taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const qty = parseFloat(item.qty || 0);\r\n    const unitPrice = parseFloat(item.unitPrice || 0);\r\n    const months = parseFloat(item.months || 1);\r\n    const unitDayOrWk = parseFloat(item.unitDayOrWk || 1);\r\n    const stdDays = parseFloat(this.state.formData.stdDays || 0);\r\n    const baseTotal = qty * unitDayOrWk * unitPrice * months * stdDays;\r\n    const taxAmt = ((baseTotal * percent) / 100 + amount);\r\n    item.taxAmt = taxAmt.toFixed(2);\r\n    item.itemTotal = (baseTotal + taxAmt).toFixed(2);\r\n    this.setState({ formData }, this.recalculateContractTotals);\r\n  };\r\n\r\n  recalculateContractTotals = () => {\r\n    \r\n    const { lineItems, freightCharges, freightTaxPercent, packingCharges, conversionRate } = this.state.formData;\r\n    let amtAgreed = 0;\r\n   (lineItems || []).forEach(item => {\r\n     amtAgreed += parseFloat(item.itemTotal || 0);\r\n   });\r\n\r\n   // Freight + packing\r\n  const freightTaxAmt = (parseFloat(freightCharges || 0) * parseFloat(freightTaxPercent || 0)) / 100;\r\n   amtAgreed += parseFloat(packingCharges || 0) + freightTaxAmt;\r\n\r\n   // Apply conversion rate if needed\r\n   let finalValue = amtAgreed;\r\n   if (conversionRate) {\r\n     finalValue = amtAgreed * parseFloat(conversionRate);\r\n   }\r\n\r\n   this.setState(prev => ({\r\n     formData: {\r\n       ...prev.formData,\r\n       amtAgreed: finalValue.toFixed(2),\r\n       contractValue: finalValue.toFixed(2),\r\n       freightTaxAmt: freightTaxAmt.toFixed(2)\r\n     }\r\n   }));\r\n  };\r\n\r\n  handleTabChange = (idx) => this.setState({ activeTab: idx });\r\n\r\n  handleNotesChange = (e) => this.setState({ notes: e.target.value });\r\n\r\n  handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  const { editingId, formData, contracts, notes } = this.state;\r\n  if (!formData.customer) return alert(\"Customer is required\");\r\n  if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\r\n\r\n  const saveData = {\r\n    ...formData,\r\n    notes,\r\n    status: \"Entered\",\r\n    createdAt: serverTimestamp()\r\n  };\r\n\r\n  if (editingId) {\r\n    await updateDoc(doc(db, \"contracts\", editingId), saveData);\r\n  } else {\r\n    saveData.contractNo = `SC${1000 + contracts.length}`;\r\n    await addDoc(collection(db, \"contracts\"), saveData);\r\n  }\r\n\r\n  this.setState({\r\n    showForm: false,\r\n    editingId: null,\r\n    formData: this.getEmptyContractForm(),\r\n    notes: ''\r\n  });\r\n  this.fetchContracts();\r\n};\r\nrenderAlert = () => (\r\n    <Modal show={this.state.showAlert} onHide={() => this.setState({ showAlert: false })} centered>\r\n      <Modal.Body>\r\n        <div className=\"text-center\">{this.state.alertMsg}</div>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"primary\" onClick={() => this.setState({ showAlert: false })}>OK</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\nrenderTaxOverlay = () => {\r\n  const { taxGroups, currentTaxLineIdx, formData } = this.state;\r\n  if (currentTaxLineIdx === null) return null;\r\n\r\n  const item = formData.lineItems[currentTaxLineIdx];\r\n  const selected = new Set(item.taxGroupNames || []);\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      zIndex: 1000,\r\n      top: '10%',\r\n      left: '15%',\r\n      background: '#fff',\r\n      border: '1px solid #2196F3',\r\n      borderRadius: '8px',\r\n      padding: '24px',\r\n      boxShadow: '0 4px 24px rgba(33,150,243,0.15)',\r\n      width: '700px',\r\n      maxHeight: '70vh',\r\n      overflowY: 'auto'\r\n    }}>\r\n      <h5 style={{ color: '#2196F3', marginBottom: '16px' }}>Select Tax Groups</h5>\r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead style={{ background: '#f4f6fa' }}>\r\n          <tr>\r\n            <th></th>\r\n            <th>Group</th>\r\n            <th>Components</th>\r\n            <th>Type</th>\r\n            <th>% / Amount</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {taxGroups.map(tg => (\r\n            <tr key={tg.groupName}>\r\n              <td>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selected.has(tg.groupName)}\r\n                  onChange={e =>\r\n                    this.toggleTaxGroupSelection(tg.groupName, currentTaxLineIdx, e.target.checked)\r\n                  }\r\n                />\r\n              </td>\r\n              <td style={{ fontWeight: 'bold', color: '#2196F3' }}>{tg.groupName}</td>\r\n              <td>{tg.lineItems.map(li => li.component).join(', ')}</td>\r\n              <td>{tg.lineItems.map(li => li.type).join(', ')}</td>\r\n              <td>{tg.lineItems.map(li => li.percentOrAmt).join(', ')}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"text-right mt-3\">\r\n        <button className=\"btn btn-sm btn-success\" onClick={() => this.setState({ showTaxOverlay: false })}>\r\n          Done\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n renderContractNoField = () => {\r\n    const { formData } = this.state;\r\n    return (\r\n      <div className=\"form-group col-md-2\">\r\n        <label>Contract No</label>\r\n        {formData.contractType === \"Standard\" ? (\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control form-control-sm\"\r\n            value={formData.contractNo}\r\n            readOnly\r\n            placeholder=\"Auto\"\r\n          />\r\n        ) : (\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control form-control-sm\"\r\n            value={formData.contractNo}\r\n            onChange={e => this.handleInputChange('contractNo', e.target.value)}\r\n            placeholder=\"Enter Contract No\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\nrenderCustomerOrderOverlay = () => {\r\n    const { customerOrders, customerOrderOverlaySearch } = this.state;\r\n    const filtered = customerOrders.filter(o =>\r\n      (o.orderNo || '').toLowerCase().includes(customerOrderOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Customer Order</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by order no...\"\r\n            value={customerOrderOverlaySearch}\r\n            onChange={e => this.setState({ customerOrderOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Order No</th>\r\n                  <th>Date</th>\r\n                  <th>Value</th>\r\n                  <th>Select</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((o, i) => (\r\n                  <tr key={o.id || i}>\r\n                    <td>{o.orderNo}</td>\r\n                    <td>{o.orderDate}</td>\r\n                    <td>{o.orderValue}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn btn-sm btn-success\"\r\n                        onClick={() => this.selectCustomerOrder(o)}\r\n                      >Select</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={4} className=\"text-center\">No approved orders found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n              </table>\r\n          </div>\r\n          <button type=\"button\" className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideCustomerOrderOverlay}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\nrenderCustomerOverlay = () => {\r\n  const { customers, customerOverlaySearch } = this.state;\r\n  const filtered = customers.filter(c =>\r\n    (c.custname || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) ||\r\n    (c.custcode || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) ||\r\n    (c.custshortName || '').toLowerCase().includes(customerOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Customer Order</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            onChange={e => this.setState({ customerOrderOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Order No</th>\r\n                  <th>Date</th>\r\n                  <th>Value</th>\r\n                  <th>Select</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((o, i) => (\r\n                  <tr key={o.id || i}>\r\n                    <td>{o.orderNo}</td>\r\n                    <td>{o.orderDate}</td>\r\n                    <td>{o.orderValue}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn btn-sm btn-success\"\r\n                        onClick={() => this.selectCustomerOrder(o)}\r\n                      >Select</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={4} className=\"text-center\">No approved orders found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button type=\"button\" className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideCustomerOrderOverlay}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );    \r\n};\r\n\r\n renderProductOverlay = () => {\r\n    const { products, productOverlaySearch, selectedProductIds } = this.state;\r\n    const filtered = products.filter(p =>\r\n      (p.ptshortName || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptdescription || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.itemCode || '').toLowerCase().includes(productOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Products</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by code or name...\"\r\n            value={productOverlaySearch}\r\n            onChange={e => this.setState({ productOverlaySearch: e.target.value })}\r\n          />\r\n           <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Code</th>\r\n                  <th>Item Desc</th>\r\n                  <th>Select</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((p, i) => (\r\n                  <tr key={p.id || i}>\r\n                    <td>{p.productId}</td>\r\n                    <td>{p.ptdescription}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn btn-sm btn-success\"\r\n                        onClick={() => this.selectProductForLineItem(p)}\r\n                      >Select</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={3} className=\"text-center\">No products found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button type=\"button\" className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideProductOverlay}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  \r\n  renderTabs = () => {\r\n    const { activeTab } = this.state;\r\n    const tabNames = ['Lines', 'Terms', 'Notes'];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\" style={{ fontSize: '16px' }}>\r\n        {tabNames.map((tab, idx) => (\r\n          <li className=\"nav-item\" key={tab}>\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link${activeTab === idx ? ' active' : ''}`}\r\n              onClick={() => this.handleTabChange(idx)}\r\n              style={{\r\n                color: '#007bff',\r\n                background: activeTab === idx ? '#e9ecef' : '#fff',\r\n                border: '1px solid #dee2e6',\r\n                borderBottom: activeTab === idx ? 'none' : undefined,\r\n                fontWeight: activeTab === idx ? 'bold' : 'normal'\r\n              }}\r\n            >\r\n              {tab}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  renderLinesTab = () => {\r\n    const { formData, showProductOverlay } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row mb-2\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary btn-sm mr-2\"\r\n            onClick={this.handleAddItemsClick}\r\n          >\r\n            Add Items\r\n          </button>\r\n           </div>\r\n        <div className=\"table-responsive\" style={{ overflowX: 'auto' }}>\r\n          <table className=\"table table-bordered\" style={{ minWidth: 1200 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Item Code</th>\r\n                <th>Item Desc</th>\r\n                <th>HSN No</th>\r\n                <th>UOM</th>\r\n                <th>Qty</th>\r\n                <th>Unit/Day or Wk</th>\r\n                <th>Unit Price</th>\r\n                <th>Months</th>\r\n                <th>Tax Group</th>\r\n                <th>Tax Amt</th>\r\n                <th>Item Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {(formData.lineItems || []).map((item, idx) => (\r\n                <tr key={idx}>\r\n                  <td>{item.itemCode}</td>\r\n                  <td>{item.itemDesc}</td>\r\n                  <td>{item.hsnCode}</td>\r\n                  <td>{item.uom}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.qty}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'qty', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.unitDayOrWk}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'unitDayOrWk', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.unitPrice}\r\n                      min=\"0\"\r\n                      style={{ width: 100 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'unitPrice', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.months}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'months', e.target.value)}\r\n                    />\r\n                  </td>\r\n                 <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-link btn-sm\"\r\n                    onClick={() => this.setState({ showTaxOverlay: true, currentTaxLineIdx: idx })}\r\n                  >\r\n                    {item.taxGroupNames && item.taxGroupNames.length > 0\r\n                      ? item.taxGroupNames.join(', ')\r\n                      : 'Select Tax'}\r\n                  </button>\r\n                </td>\r\n                  <td>{item.taxAmt}</td>\r\n                  <td>{item.itemTotal}</td>\r\n                </tr>\r\n              ))}\r\n              {(!formData.lineItems || formData.lineItems.length === 0) && (\r\n                <tr>\r\n                  <td colSpan=\"11\" className=\"text-center\">No items</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {showProductOverlay && this.renderProductOverlay()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTermsTab = () => {\r\n    const { formData } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Despatch Mode</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.despatchMode} onChange={e => this.handleInputChange('despatchMode', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Payment Terms</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.paymentTerms} onChange={e => this.handleInputChange('paymentTerms', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Bill To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.billTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Ship To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.shipTo} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightCharges} onChange={e => this.handleInputChange('freightCharges', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax %</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightTaxPercent} onChange={e => this.handleInputChange('freightTaxPercent', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax Amt</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightTaxAmt} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Packing Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.packingCharges} onChange={e => this.handleInputChange('packingCharges', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Amount Limit</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.amountLimit} onChange={e => this.handleInputChange('amountLimit', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Minimum Release</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.minimumRelease} onChange={e => this.handleInputChange('minimumRelease', e.target.value)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderNotesTab = () => (\r\n    <div>\r\n      <div className=\"form-group\">\r\n        <label>Notes / Remarks</label>\r\n        <textarea className=\"form-control form-control-sm\" rows=\"4\" value={this.state.notes} onChange={this.handleNotesChange} />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  renderForm = () => {\r\n    const { activeTab, formData } = this.state;\r\n    return (\r\n      <div className=\"card full-height\">\r\n        <form className=\"form-sample\" onSubmit={this.handleSubmit}>\r\n          <div style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>\r\n            <h4 className=\"mb-3\">Service Contract Creation/Update</h4>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Contract Type</label>\r\n                <select\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.contractType}\r\n                  onChange={e => this.handleInputChange('contractType', e.target.value)}\r\n                >\r\n                  <option value=\"Standard\">Standard</option>\r\n                  <option value=\"Manual\">Manual</option>\r\n                </select>\r\n              </div>\r\n                {this.renderContractNoField()}\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Created Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.createdDate}\r\n                  onChange={e => this.handleInputChange('createdDate', e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Status</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.status} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Ref No</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.refNo} onChange={e => this.handleInputChange('refNo', e.target.value)} />\r\n              </div>\r\n\r\n              \r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Customer</label>\r\n                <div className=\"input-group input-group-sm\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Choose Customer\"\r\n                    value={formData.customer}\r\n                    readOnly\r\n                    onClick={this.showCustomerOverlay}\r\n                    style={{ cursor: 'pointer' }}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <button className=\"btn btn-outline-secondary btn-sm\" type=\"button\" onClick={this.showCustomerOverlay}>Select</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Customer Order</label>\r\n                <div className=\"input-group input-group-sm\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Select Order\"\r\n                    value={formData.customerOrderId || ''}\r\n                    readOnly\r\n                    onClick={this.showCustomerOrderOverlay}\r\n                    style={{ cursor: 'pointer' }}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <button className=\"btn btn-outline-secondary btn-sm\" type=\"button\" onClick={this.showCustomerOrderOverlay}>Select</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Currency</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.currency} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Conversion Rate</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.conversionRate} onChange={e => this.handleInputChange('conversionRate', e.target.value)} />\r\n              </div>\r\n              </div>\r\n              <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n              <label>Contr.Duration From</label>\r\n                <Form.Control\r\n                  type=\"date\"\r\n                  value={this.state.formData.durationFrom || ''}\r\n                  onChange={e => this.handleInputChange('durationFrom', e.target.value)}\r\n                />       \r\n               </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Contr.Duration To</label>\r\n                <Form.Control\r\n                  type=\"date\"\r\n                  value={this.state.formData.durationTo || ''}\r\n                  onChange={e => this.handleInputChange('durationTo', e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Std.days</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.stdDays} onChange={e => this.handleInputChange('stdDays', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Amt.Agreed</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.amtAgreed} onChange={e => this.handleInputChange('amtAgreed', e.target.value)} />\r\n              </div>\r\n            </div>\r\n            {this.renderTabs()}\r\n            {activeTab === 0 && this.renderLinesTab()}\r\n            {activeTab === 1 && this.renderTermsTab()}\r\n            {activeTab === 2 && this.renderNotesTab()}\r\n            <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n              <button type=\"submit\" className=\"btn btn-success mr-2\">\r\n                {this.state.editingId ? \"Update\" : \"Create\"}\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={() => this.setState({ showForm: false, editingId: null, formData: this.getEmptyContractForm(), notes: '' })}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n         {this.state.showAlert && this.renderAlert()}\r\n        {this.state.showCustomerOrderOverlay && this.renderCustomerOrderOverlay()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Service Contracts</h4>\r\n          <button className=\"btn btn-primary\" onClick={() => this.setState({ showForm: true })}>+ Create Contract</button>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered table-hover\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Contract No</th>\r\n                <th>Date</th>\r\n                <th>Ref No</th>\r\n                <th>Customer</th>\r\n                <th>Currency</th>\r\n                <th>Duration</th>\r\n                <th>Std Days</th>\r\n                <th>Status</th>\r\n                <th>Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n  {this.state.contracts.map((c, i) => (\r\n    <tr key={i}>\r\n        <td>\r\n          <button\r\n            className=\"btn btn-link p-0\"\r\n            onClick={() => this.setState({\r\n              showForm: true,\r\n              editingId: c.id,\r\n              formData: { ...c }\r\n            })}\r\n          >\r\n            {c.contractNo}\r\n          </button>\r\n        </td>\r\n      <td>{c.createdDate}</td>\r\n      <td>{c.refNo}</td>\r\n      <td>{c.customer}</td>\r\n      <td>{c.currency}</td>\r\n      <td>{c.contrDurationFrom} - {c.contrDurationTo}</td>\r\n      <td>{c.stdDays}</td>\r\n      <td>{c.status}</td>\r\n      <td>{c.contractValue}</td>\r\n     \r\n    </tr>\r\n  ))}\r\n</tbody>\r\n\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showCustomerOverlay && this.renderCustomerOverlay()}\r\n        {this.state.showProductOverlay && this.renderProductOverlay()}\r\n        {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n        {this.state.showTaxOverlay && this.renderTaxOverlay()}\r\n      </div>\r\n         );\r\n  }\r\n}\r\n\r\nexport default ContractBilling;"]},"metadata":{},"sourceType":"module"}