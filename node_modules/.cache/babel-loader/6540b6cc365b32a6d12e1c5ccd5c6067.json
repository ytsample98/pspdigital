{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\servicecontract\\\\servicecontractbilling.js\";\nimport React, { Component } from 'react';\nimport { Form } from 'react-bootstrap';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { db } from '../../../../firebase';\nimport { Modal, Button } from 'react-bootstrap';\nimport { collection, query, where, getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\nimport { format } from 'date-fns';\n\nclass ContractBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      contracts: [],\n      customers: [],\n      products: [],\n      taxGroups: [],\n      users: [],\n      isOneYear: '',\n      showTaxOverlay: false,\n      activeTab: 0,\n      showForm: false,\n      editingId: null,\n      durationFrom: null,\n      durationTo: null,\n      billingTypes: [],\n      autobill: false,\n      paymentModes: [],\n      tillDate: '',\n      repeat: false,\n      canAddItems: false,\n      showProductOverlay: false,\n      productOverlaySearch: '',\n      selectedProductIds: [],\n      formData: this.getEmptyContractForm(),\n      notes: '',\n      searchTerm: '',\n      nameofwrk: '',\n      showCustomerOrderOverlay: false,\n      customerOrderOverlaySearch: '',\n      selectedCustomerOrders: [],\n      customerOrders: [],\n      customerOrderLineItems: [],\n      showAlert: false,\n      alertMsg: ''\n    };\n\n    this.fetchContracts = async () => {\n      const snap = await getDocs(collection(db, 'contracts'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        contracts: data.reverse()\n      });\n    };\n\n    this.fetchCustomers = async () => {\n      const snap = await getDocs(collection(db, 'customers'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        customers: data\n      });\n    };\n\n    this.fetchCustomerOrders = async customerName => {\n      if (!customerName) return this.setState({\n        customerOrders: []\n      });\n      const snap = await getDocs(collection(db, 'orders'));\n      const orders = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      const filtered = orders.filter(o => (o.customer === customerName || o.customerName === customerName) && o.status === \"Approved\");\n      this.setState({\n        customerOrders: filtered\n      });\n    };\n\n    this.fetchProducts = async () => {\n      const snap = await getDocs(collection(db, 'products'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        products: data\n      });\n    };\n\n    this.fetchUsers = async () => {\n      const snap = await getDocs(collection(db, 'users'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        users: data\n      });\n    };\n\n    this.fetchTaxGroups = async () => {\n      const snap = await getDocs(collection(db, 'taxGroups'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        taxGroups: data\n      });\n    };\n\n    this.checkDurationSelected = () => {\n      const {\n        durationFrom,\n        durationTo\n      } = this.state;\n      this.setState({\n        canAddItems: !!(durationFrom && durationTo)\n      });\n    };\n\n    this.showProductOverlay = () => this.setState({\n      showProductOverlay: true,\n      productOverlaySearch: '',\n      selectedProductIds: []\n    });\n\n    this.hideProductOverlay = () => this.setState({\n      showProductOverlay: false,\n      productOverlaySearch: '',\n      selectedProductIds: []\n    });\n\n    this.toggleProductSelection = (productId, checked) => {\n      this.setState(prev => ({\n        selectedProductIds: checked ? [...prev.selectedProductIds, productId] : prev.selectedProductIds.filter(id => id !== productId)\n      }));\n    };\n\n    this.addSelectedProductsToLineItems = () => {\n      const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\n      const newItems = selectedProducts.map(product => ({\n        itemCode: product.productId || '',\n        itemDesc: product.ptdescription || '',\n        hsnCode: product.hsnCode || '',\n        qty: 1,\n        unitPrice: product.price || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, ...newItems]\n        },\n        showProductOverlay: false,\n        selectedProductIds: []\n      }), this.recalculateContractTotals);\n    };\n\n    this.getDurationInfo = () => {\n      const {\n        durationFrom,\n        durationTo\n      } = this.state.formData;\n      if (!durationFrom || !durationTo) return {\n        months: 0,\n        days: 0,\n        billingType: ''\n      };\n      const from = new Date(durationFrom);\n      const to = new Date(durationTo); // Months difference\n\n      let months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth()) + 1; // Days difference\n\n      let days = (to - from) / (1000 * 60 * 60 * 24) + 1; // Billing type\n\n      let billingType = '';\n      if (months >= 12) billingType = 'yearly';else if (months === 6) billingType = 'half-yearly';else if (months <= 3) billingType = 'quarterly';\n      return {\n        months,\n        days,\n        billingType\n      };\n    };\n\n    this.formatAddress = addr => {\n      if (!addr) return '';\n      if (typeof addr === 'string') return addr;\n      return [addr.address, [addr.city, addr.state, addr.country].filter(Boolean).join(', '), addr.zip].filter(Boolean).join('\\n');\n    };\n\n    this.formatDate = d => {\n      if (!d) return '';\n\n      try {\n        return format(new Date(d), 'dd-MMM-yy');\n      } catch {\n        return d;\n      }\n    };\n\n    this.selectCustomer = customer => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          customer: customer.custname,\n          currency: customer.currency || '',\n          billTo: this.formatAddress(customer.billTo),\n          shipTo: this.formatAddress(customer.shipTo),\n          despatchMode: customer.despatchMode || '',\n          paymentTerms: customer.paymentTerms || '',\n          customerOrderId: '',\n          lineItems: []\n        },\n        showCustomerOverlay: false,\n        customerOrderLineItems: [],\n        customerOrders: []\n      }), () => {\n        this.fetchCustomerOrders(customer.custname);\n      });\n    };\n\n    this.selectCustomerOrder = order => {\n      const lineItems = (order.lineItems || []).map(item => ({\n        itemCode: item.itemCode || '',\n        itemDesc: item.itemDescription || '',\n        hsnCode: item.hsnCode || '',\n        uom: item.uom || '',\n        qty: item.qty || 1,\n        unitPrice: item.unitPrice || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          customerOrderId: order.orderNo,\n          lineItems\n        },\n        showCustomerOrderOverlay: false,\n        customerOrderLineItems: lineItems\n      }), this.recalculateContractTotals);\n    };\n\n    this.selectProductForLineItem = product => {\n      const newItem = {\n        itemCode: product.code || '',\n        itemDesc: product.name || '',\n        hsnCode: product.hsn || '',\n        uom: product.uom || '',\n        qty: 1,\n        unitPrice: product.price || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      };\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, newItem]\n        },\n        showProductOverlay: false\n      }), this.recalculateContractTotals);\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }), () => {\n        if (field === 'durationFrom' || field === 'durationTo') {\n          const {\n            billingType\n          } = this.getDurationInfo();\n          this.setState({\n            billingType\n          });\n        }\n\n        if (['freightCharges', 'freightTaxPercent', 'packingCharges', 'amtAgreed', 'conversionRate'].includes(field)) {\n          this.recalculateContractTotals();\n        }\n      });\n    };\n\n    this.handleAddItemsClick = () => {\n      const {\n        formData\n      } = this.state;\n\n      if (!formData.customer) {\n        this.setState({\n          showAlert: true,\n          alertMsg: \"Select customer first!\"\n        });\n        return;\n      }\n\n      if (!formData.durationFrom || !formData.durationTo) {\n        this.setState({\n          showAlert: true,\n          alertMsg: \"Select contract duration first!\"\n        });\n        return;\n      }\n\n      if (!formData.customerOrderId) {\n        // Filter products for Bundle category\n        const bundleProducts = this.state.products.filter(p => p.category === \"Bundle\");\n        this.setState({\n          filteredProducts: bundleProducts,\n          showProductOverlay: true\n        });\n      } else {\n        this.setState({\n          showAlert: true,\n          alertMsg: \"Line items are already filled from selected order.\"\n        });\n      }\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const updatedItems = [...this.state.formData.lineItems];\n      updatedItems[idx] = { ...updatedItems[idx],\n        [field]: value\n      }; // Calculation\n\n      const qty = parseFloat(updatedItems[idx].qty || 0);\n      const unitPrice = parseFloat(updatedItems[idx].unitPrice || 0);\n      const months = parseFloat(updatedItems[idx].months || 1);\n      const days = parseFloat(updatedItems[idx].days || 0);\n      let totalMonths = months;\n\n      if (this.state.paymentModes.includes('prorate') && days > 0) {\n        // Use correct proration formula\n        let daysInMonth = 30;\n        const {\n          durationFrom\n        } = this.state.formData;\n\n        if (durationFrom) {\n          const d = new Date(durationFrom);\n          daysInMonth = new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n        }\n\n        totalMonths = months + days / daysInMonth;\n      }\n\n      const baseTotal = qty * unitPrice * totalMonths;\n      updatedItems[idx].itemTotal = baseTotal.toFixed(2);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateContractTotals);\n    };\n\n    this.toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\n      const formData = { ...this.state.formData\n      };\n      const item = formData.lineItems[lineIdx];\n      if (!item.taxGroupNames) item.taxGroupNames = [];\n\n      if (isChecked) {\n        if (!item.taxGroupNames.includes(groupName)) {\n          item.taxGroupNames.push(groupName);\n        }\n      } else {\n        item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\n      } // recalculate taxAmt and total\n\n\n      let percent = 0;\n      let amount = 0;\n      (item.taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const qty = parseFloat(item.qty || 0);\n      const unitPrice = parseFloat(item.unitPrice || 0);\n      const months = parseFloat(item.months || 1);\n      const baseTotal = qty * unitPrice * months;\n      const taxAmt = baseTotal * percent / 100 + amount;\n      item.taxAmt = taxAmt.toFixed(2);\n      item.itemTotal = (baseTotal + taxAmt).toFixed(2);\n      item.baseTotal = baseTotal.toFixed(2);\n      this.setState({\n        formData\n      }, this.recalculateContractTotals);\n    };\n\n    this.recalculateContractTotals = () => {\n      const {\n        lineItems,\n        freightCharges,\n        freightTaxPercent,\n        packingCharges,\n        conversionRate\n      } = this.state.formData;\n      let amtAgreed = 0;\n      (lineItems || []).forEach(item => {\n        amtAgreed += parseFloat(item.itemTotal || 0);\n      }); // Freight + packing\n\n      const freightTaxAmt = parseFloat(freightCharges || 0) * parseFloat(freightTaxPercent || 0) / 100;\n      amtAgreed += parseFloat(packingCharges || 0) + freightTaxAmt; // Apply conversion rate if needed\n\n      let finalValue = amtAgreed;\n\n      if (conversionRate) {\n        finalValue = amtAgreed * parseFloat(conversionRate);\n      }\n\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          amtAgreed: finalValue.toFixed(2),\n          contractValue: finalValue.toFixed(2),\n          freightTaxAmt: freightTaxAmt.toFixed(2)\n        }\n      }));\n    };\n\n    this.handleTabChange = idx => this.setState({\n      activeTab: idx\n    });\n\n    this.handleNotesChange = e => this.setState({\n      notes: e.target.value\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        contracts,\n        notes\n      } = this.state;\n      if (!formData.customer) return alert(\"Customer is required\");\n      if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\n      const saveData = { ...formData,\n        notes,\n        status: \"Awaiting Approval\",\n        createdAt: serverTimestamp()\n      };\n\n      if (editingId) {\n        await updateDoc(doc(db, \"contracts\", editingId), saveData);\n      } else {\n        saveData.contractNo = `SC${1000 + contracts.length}`;\n        await addDoc(collection(db, \"contracts\"), saveData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null,\n        formData: this.getEmptyContractForm(),\n        notes: ''\n      });\n      this.fetchContracts();\n    };\n\n    this.renderAlert = () => /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showAlert,\n      onHide: () => this.setState({\n        showAlert: false\n      }),\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }\n    }, this.state.alertMsg)), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.setState({\n        showAlert: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }\n    }, \"OK\")));\n\n    this.renderTaxOverlay = () => {\n      const {\n        taxGroups,\n        currentTaxLineIdx,\n        formData\n      } = this.state;\n      if (currentTaxLineIdx === null) return null;\n      const item = formData.lineItems[currentTaxLineIdx];\n      const selected = new Set(item.taxGroupNames || []);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }\n      }, \"Select Tax Groups\"), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm mr-2\",\n        onClick: () => this.setState({\n          showTaxOverlay: false\n        }),\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }\n      }, \"Submit\"), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"mdi mdi-close-box-outline\",\n        style: {\n          fontSize: \"24px\",\n          color: \"#2196F3\",\n          cursor: \"pointer\"\n        },\n        onClick: this.handleOverlayClose,\n        \"aria-label\": \"Close\",\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-sm table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        style: {\n          background: '#f4f6fa'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 13\n        }\n      }, \"Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }\n      }, \"Components\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 13\n        }\n      }, \"Type\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }\n      }, \"% / Amount\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 9\n        }\n      }, taxGroups.map(tg => /*#__PURE__*/React.createElement(\"tr\", {\n        key: tg.groupName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selected.has(tg.groupName),\n        onChange: e => this.toggleTaxGroupSelection(tg.groupName, currentTaxLineIdx, e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 15\n        }\n      }, tg.groupName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 15\n        }\n      }, tg.lineItems.map(li => li.component).join(', ')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 15\n        }\n      }, tg.lineItems.map(li => li.type).join(', ')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 15\n        }\n      }, tg.lineItems.map(li => li.percentOrAmt).join(', '))))))));\n    };\n\n    this.renderContractNoField = () => {\n      const {\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 9\n        }\n      }, \"Contract No\"), formData.contractType === \"Standard\" ? /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.contractNo,\n        readOnly: true,\n        placeholder: \"Auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 11\n        }\n      }) : /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.contractNo,\n        onChange: e => this.handleInputChange('contractNo', e.target.value),\n        placeholder: \"Enter Contract No\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 11\n        }\n      }));\n    };\n\n    this.showCustomerOverlay = () => this.setState({\n      showCustomerOverlay: true,\n      customerOverlaySearch: ''\n    });\n\n    this.hideCustomerOverlay = () => this.setState({\n      showCustomerOverlay: false,\n      customerOverlaySearch: ''\n    });\n\n    this.renderCustomerOverlay = () => {\n      const {\n        customers,\n        customerOverlaySearch\n      } = this.state;\n      const filtered = customers.filter(c => (c.custname || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) || (c.custcode || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) || (c.custshortName || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 9\n        }\n      }, \"Select Customer\"), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"mdi mdi-close-box-outline\",\n        style: {\n          fontSize: \"24px\",\n          color: \"#2196F3\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.setState({\n          showCustomerOverlay: false,\n          customerOverlaySearch: ''\n        }),\n        \"aria-label\": \"Close\",\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: `Search customer`,\n        value: customerOverlaySearch,\n        onChange: e => this.setState({\n          customerOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 17\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 17\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 17\n        }\n      }, \"Short Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 17\n        }\n      }, \"Select\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }\n      }, filtered.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: c.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 19\n        }\n      }, c.custname), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 19\n        }\n      }, c.custcode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 19\n        }\n      }, c.custshortName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.selectCustomer(c),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 21\n        }\n      }, \"Select\")))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 4,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 19\n        }\n      }, \"No customers found\")))))));\n    };\n\n    this.showCustomerOrderOverlay = () => this.setState({\n      showCustomerOrderOverlay: true,\n      customerOrderOverlaySearch: ''\n    });\n\n    this.hideCustomerOrderOverlay = () => this.setState({\n      showCustomerOrderOverlay: false,\n      customerOrderOverlaySearch: ''\n    });\n\n    this.renderCustomerOrderOverlay = () => {\n      const {\n        customerOrders,\n        customerOrderOverlaySearch\n      } = this.state;\n      const filtered = customerOrders.filter(o => (o.orderNo || '').toLowerCase().includes(customerOrderOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606,\n          columnNumber: 9\n        }\n      }, \"Select Customer Order\"), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"mdi mdi-close-box-outline\",\n        style: {\n          fontSize: \"24px\",\n          color: \"#2196F3\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.setState({\n          showCustomerOrderOverlay: false,\n          customerOrderOverlaySearch: ''\n        }),\n        \"aria-label\": \"Close\",\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: `Search Customer Orders`,\n        value: customerOrderOverlaySearch,\n        onChange: e => this.setState({\n          customerOrderOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 17\n        }\n      }, \"Order No\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 17\n        }\n      }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 17\n        }\n      }, \"Value\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 17\n        }\n      }, \"Select\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 13\n        }\n      }, filtered.map((o, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: o.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 19\n        }\n      }, o.orderNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 19\n        }\n      }, o.orderDate), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 19\n        }\n      }, o.orderValue), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.selectCustomerOrder(o),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 21\n        }\n      }, \"Select\")))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 4,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 19\n        }\n      }, \"No approved orders found\")))))));\n    };\n\n    this.renderProductOverlay = () => {\n      const {\n        products,\n        productOverlaySearch,\n        selectedProductIds,\n        currentPage = 1\n      } = this.state;\n      const filtered = products.filter(p => (p.ptshortName || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptdescription || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.itemCode || '').toLowerCase().includes(productOverlaySearch.toLowerCase()));\n      const itemsPerPage = 10;\n      const totalPages = Math.ceil(filtered.length / itemsPerPage);\n      const paginated = filtered.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 673,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 11\n        }\n      }, \"Select Products\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"mdi mdi-close-box-outline\",\n        style: {\n          fontSize: \"24px\",\n          color: \"#2196F3\",\n          cursor: \"pointer\"\n        },\n        onClick: this.hideProductOverlay,\n        \"aria-label\": \"Close\",\n        type: \"button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code or name...\",\n        value: productOverlaySearch,\n        onChange: e => this.setState({\n          productOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 687,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 19\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 700,\n          columnNumber: 19\n        }\n      }, \"Select\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 15\n        }\n      }, paginated.map((p, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: p.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 706,\n          columnNumber: 21\n        }\n      }, p.productId), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 21\n        }\n      }, p.ptdescription), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 708,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-sm btn-success\",\n        onClick: () => this.selectProductForLineItem(p),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 23\n        }\n      }, \"Select\")))), paginated.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 3,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 21\n        }\n      }, \"No products found\"))))), /*#__PURE__*/React.createElement(\"nav\", {\n        \"aria-label\": \"Product pagination example\",\n        style: {\n          marginTop: 12\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"pagination justify-content-end mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: `page-item ${currentPage === 1 ? \"disabled\" : \"\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 726,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"page-link\",\n        \"aria-label\": \"Previous\",\n        onClick: () => this.setState({\n          currentPage: Math.max(currentPage - 1, 1)\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 732,\n          columnNumber: 17\n        }\n      }, \"\\xAB\"))), [...Array(totalPages)].map((_, idx) => /*#__PURE__*/React.createElement(\"li\", {\n        key: idx,\n        className: `page-item ${currentPage === idx + 1 ? \"active\" : \"\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"page-link\",\n        onClick: () => this.setState({\n          currentPage: idx + 1\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 17\n        }\n      }, idx + 1))), /*#__PURE__*/React.createElement(\"li\", {\n        className: `page-item ${currentPage === totalPages ? \"disabled\" : \"\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"page-link\",\n        \"aria-label\": \"Next\",\n        onClick: () => this.setState({\n          currentPage: Math.min(currentPage + 1, totalPages)\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 751,\n          columnNumber: 17\n        }\n      }, \"\\xBB\"))))), \"  \")));\n    };\n\n    this.renderTabs = () => {\n      const {\n        activeTab\n      } = this.state;\n      const tabNames = ['Lines', 'Terms', 'Notes'];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        style: {\n          fontSize: '16px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 7\n        }\n      }, tabNames.map((tab, idx) => /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        key: tab,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 768,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link${activeTab === idx ? ' active' : ''}`,\n        onClick: () => this.handleTabChange(idx),\n        style: {\n          color: '#007bff',\n          background: activeTab === idx ? '#e9ecef' : '#fff',\n          border: '1px solid #dee2e6',\n          borderBottom: activeTab === idx ? 'none' : undefined,\n          fontWeight: activeTab === idx ? 'bold' : 'normal'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 13\n        }\n      }, tab))));\n    };\n\n    this.isOneYear = (from, to) => {\n      if (!from || !to) return false;\n      const d1 = new Date(from);\n      const d2 = new Date(to);\n      return d2.getFullYear() - d1.getFullYear() === 1 && d2.getMonth() === d1.getMonth() && d2.getDate() === d1.getDate();\n    };\n\n    this.updateLineItemsForAutoBill = () => {\n      const {\n        paymentModes,\n        formData\n      } = this.state;\n      const {\n        durationFrom,\n        durationTo\n      } = formData;\n      const from = new Date(durationFrom);\n      const to = new Date(durationTo);\n      let days = 0,\n          months = 1;\n\n      if (paymentModes.includes('prorate')) {\n        days = new Date(from.getFullYear(), from.getMonth() + 1, 0).getDate() - from.getDate() + 1;\n      }\n\n      if (paymentModes.includes('monthly')) {\n        months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth()) + 1;\n      }\n\n      const updatedItems = (formData.lineItems || []).map(item => ({ ...item,\n        days,\n        months\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateContractTotals);\n    };\n\n    this.updateLineItemsForBillingTypes = () => {\n      const {\n        billingTypes,\n        formData\n      } = this.state;\n      let months = 1;\n      if (billingTypes.includes('yearly')) months = 12;else if (billingTypes.includes('half-yearly')) months = 6;else if (billingTypes.includes('quarterly')) months = 3;\n      const updatedItems = (formData.lineItems || []).map(item => ({ ...item,\n        months\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateContractTotals);\n    };\n\n    this.updateLineItemsForPaymentModes = () => {\n      const {\n        paymentModes,\n        formData\n      } = this.state;\n      const {\n        durationFrom,\n        durationTo\n      } = formData;\n      const from = new Date(durationFrom);\n      const to = new Date(durationTo);\n      let days = 0,\n          months = 1;\n      let totalFullMonths = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth());\n\n      if (paymentModes.includes('prorate') && paymentModes.includes('monthly')) {\n        days = new Date(from.getFullYear(), from.getMonth() + 1, 0).getDate() - from.getDate() + 1;\n        months = totalFullMonths - 1;\n      } else if (paymentModes.includes('prorate')) {\n        months = 0;\n        days = new Date(from.getFullYear(), from.getMonth() + 1, 0).getDate() - from.getDate() + 1;\n      } else if (paymentModes.includes('monthly')) {\n        days = 0;\n        months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth()) + 1;\n      } else {\n        days = 0;\n        months = 1;\n      }\n\n      const updatedItems = (formData.lineItems || []).map(item => ({ ...item,\n        days,\n        months\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateContractTotals);\n    };\n\n    this.renderBillingTypeSection = () => {\n      const {\n        billingTypes\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row mb-2 d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"mr-2 mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 7\n        }\n      }, \"Billing Type:\"), ['quarterly', 'half-yearly', 'yearly'].map(type => /*#__PURE__*/React.createElement(\"div\", {\n        key: type,\n        className: \"form-check form-check-inline d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input mt-0\",\n        type: \"checkbox\",\n        checked: billingTypes.includes(type),\n        onChange: e => {\n          let updated = billingTypes.includes(type) ? billingTypes.filter(t => t !== type) : [...billingTypes, type];\n          this.setState({\n            billingTypes: updated\n          }, () => this.updateLineItemsForBillingTypes());\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 872,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label ml-1 mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 883,\n          columnNumber: 11\n        }\n      }, type.replace('-', ' ').replace('yearly', 'Yearly').replace('half', 'Half').replace('quarterly', 'Quarterly')))));\n    };\n\n    this.renderPaymentModeSection = () => {\n      const {\n        paymentModes\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 895,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 896,\n          columnNumber: 7\n        }\n      }, \"Payment Mode:\"), ['prorate', 'monthly', 'one-time'].map(mode => /*#__PURE__*/React.createElement(\"div\", {\n        key: mode,\n        className: \"form-check form-check-inline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-check-input\",\n        type: \"checkbox\",\n        checked: paymentModes.includes(mode),\n        onChange: e => {\n          let updated = paymentModes.includes(mode) ? paymentModes.filter(m => m !== mode) : [...paymentModes, mode];\n          this.setState({\n            paymentModes: updated\n          }, () => this.updateLineItemsForPaymentModes());\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 899,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"form-check-label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 910,\n          columnNumber: 11\n        }\n      }, mode.charAt(0).toUpperCase() + mode.slice(1)))));\n    };\n\n    this.renderLinesTab = () => {\n      const months = this.state.formData.repeat && this.isOneYear(this.state.formData.durationFrom, this.state.formData.durationTo) ? 12 : 1;\n      const {\n        formData,\n        showProductOverlay\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 922,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mr-2\",\n        onClick: this.handleAddItemsClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 9\n        }\n      }, \"Add Items\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive\",\n        style: {\n          overflowX: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        style: {\n          minWidth: 1200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 932,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 933,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 935,\n          columnNumber: 15\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 936,\n          columnNumber: 15\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 937,\n          columnNumber: 15\n        }\n      }, \"HSN\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 938,\n          columnNumber: 15\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 939,\n          columnNumber: 15\n        }\n      }, \"Duration\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 940,\n          columnNumber: 15\n        }\n      }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 15\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 15\n        }\n      }, \"Days\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 15\n        }\n      }, \"Months\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 944,\n          columnNumber: 15\n        }\n      }, \"Tax\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 945,\n          columnNumber: 15\n        }\n      }, \"Tax Amt\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 946,\n          columnNumber: 15\n        }\n      }, \"Item Total\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 949,\n          columnNumber: 11\n        }\n      }, (formData.lineItems || []).map((item, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 951,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 17\n        }\n      }, item.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 953,\n          columnNumber: 17\n        }\n      }, item.itemDesc), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 954,\n          columnNumber: 17\n        }\n      }, item.hsnCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 17\n        }\n      }, item.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 956,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: item.duration || `${formData.durationFrom} to ${formData.durationTo}`,\n        onChange: e => this.handleLineItemChange(idx, 'duration', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 957,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 964,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.qty,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'qty', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 965,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 974,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.unitPrice,\n        min: \"0\",\n        style: {\n          width: 100\n        },\n        onChange: e => this.handleLineItemChange(idx, 'unitPrice', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 984,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.days || '',\n        min: \"0\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'days', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 985,\n          columnNumber: 3\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 994,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.months,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'months', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 995,\n          columnNumber: 3\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1004,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-link btn-sm\",\n        onClick: () => this.setState({\n          showTaxOverlay: true,\n          currentTaxLineIdx: idx\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1005,\n          columnNumber: 19\n        }\n      }, item.taxGroupNames && item.taxGroupNames.length > 0 ? item.taxGroupNames.join(', ') : 'Select Tax')), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1015,\n          columnNumber: 17\n        }\n      }, item.taxAmt), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1016,\n          columnNumber: 17\n        }\n      }, item.itemTotal))), (!formData.lineItems || formData.lineItems.length === 0) && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1020,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"12\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1021,\n          columnNumber: 17\n        }\n      }, \"No items\"))))), showProductOverlay && this.renderProductOverlay());\n    };\n\n    this.renderTermsTab = () => {\n      const {\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1036,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1037,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1038,\n          columnNumber: 13\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.despatchMode,\n        onChange: e => this.handleInputChange('despatchMode', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1039,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1041,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1042,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.paymentTerms,\n        onChange: e => this.handleInputChange('paymentTerms', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1043,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1046,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1047,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1048,\n          columnNumber: 13\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.billTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1049,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1051,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1052,\n          columnNumber: 13\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.shipTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1053,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1056,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1057,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1058,\n          columnNumber: 13\n        }\n      }, \"Freight Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightCharges,\n        onChange: e => this.handleInputChange('freightCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1059,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1061,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1062,\n          columnNumber: 13\n        }\n      }, \"Freight Tax %\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightTaxPercent,\n        onChange: e => this.handleInputChange('freightTaxPercent', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1063,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1065,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1066,\n          columnNumber: 13\n        }\n      }, \"Freight Tax Amt\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightTaxAmt,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1067,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1069,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1070,\n          columnNumber: 13\n        }\n      }, \"Packing Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.packingCharges,\n        onChange: e => this.handleInputChange('packingCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1071,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1074,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1075,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1076,\n          columnNumber: 13\n        }\n      }, \"Amount Limit\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.amountLimit,\n        onChange: e => this.handleInputChange('amountLimit', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1077,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1079,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1080,\n          columnNumber: 13\n        }\n      }, \"Minimum Release\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.minimumRelease,\n        onChange: e => this.handleInputChange('minimumRelease', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1081,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1089,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1090,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1091,\n        columnNumber: 9\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: \"4\",\n      value: this.state.notes,\n      onChange: this.handleNotesChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1092,\n        columnNumber: 9\n      }\n    })));\n\n    this.renderForm = () => {\n      const {\n        activeTab,\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1100,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1101,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: '24px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1102,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1103,\n          columnNumber: 13\n        }\n      }, \"Service Contract Creation/Update\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1104,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1105,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1106,\n          columnNumber: 17\n        }\n      }, \"Contract Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.contractType,\n        onChange: e => this.handleInputChange('contractType', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1112,\n          columnNumber: 19\n        }\n      }, \"Standard\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1113,\n          columnNumber: 19\n        }\n      }, \"Manual\"))), this.renderContractNoField(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1117,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1118,\n          columnNumber: 17\n        }\n      }, \"Created Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control form-control-sm\",\n        value: formData.createdDate,\n        onChange: e => this.handleInputChange('createdDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1119,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1126,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1127,\n          columnNumber: 17\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.status,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1128,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1130,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1131,\n          columnNumber: 17\n        }\n      }, \"Name of Work\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.nameofwrk,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1132,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1138,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1139,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1140,\n          columnNumber: 17\n        }\n      }, \"Customer\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1141,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Choose Customer\",\n        value: formData.customer,\n        readOnly: true,\n        onClick: this.showCustomerOverlay,\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1151,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        type: \"button\",\n        onClick: this.showCustomerOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1152,\n          columnNumber: 21\n        }\n      }, \"Select\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1156,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1157,\n          columnNumber: 17\n        }\n      }, \"Customer Order\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1158,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Select Order\",\n        value: formData.customerOrderId || '',\n        readOnly: true,\n        onClick: this.showCustomerOrderOverlay,\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1159,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1168,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        type: \"button\",\n        onClick: this.showCustomerOrderOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1169,\n          columnNumber: 21\n        }\n      }, \"Select\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1173,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1174,\n          columnNumber: 17\n        }\n      }, \"Ref No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.refNo,\n        onChange: e => this.handleInputChange('refNo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1175,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1177,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1178,\n          columnNumber: 17\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1179,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1181,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1182,\n          columnNumber: 17\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.conversionRate,\n        onChange: e => this.handleInputChange('conversionRate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1183,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1186,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1187,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1188,\n          columnNumber: 5\n        }\n      }, \"Contr.Duration From\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        value: this.state.formData.durationFrom || '',\n        onChange: e => this.handleInputChange('durationFrom', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1189,\n          columnNumber: 5\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1195,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1196,\n          columnNumber: 5\n        }\n      }, \"Contr.Duration To\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        value: this.state.formData.durationTo || '',\n        onChange: e => this.handleInputChange('durationTo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1197,\n          columnNumber: 5\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1203,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1204,\n          columnNumber: 17\n        }\n      }, \"Amt.Agreed\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.amtAgreed,\n        onChange: e => this.handleInputChange('amtAgreed', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1207,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1208,\n          columnNumber: 5\n        }\n      }, \"Till Date\"), /*#__PURE__*/React.createElement(Form.Control, {\n        type: \"date\",\n        value: this.state.formData.tillDate || '',\n        onChange: e => this.handleInputChange('tillDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1209,\n          columnNumber: 5\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-1 d-flex align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1215,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1216,\n          columnNumber: 5\n        }\n      }, \"Repeat\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: this.state.formData.repeat || false,\n        onChange: e => this.handleInputChange('repeat', e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1217,\n          columnNumber: 5\n        }\n      })), this.renderBillingTypeSection(), this.renderPaymentModeSection()), this.renderTabs(), activeTab === 0 && this.renderLinesTab(), activeTab === 1 && this.renderTermsTab(), activeTab === 2 && this.renderNotesTab(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1230,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1231,\n          columnNumber: 15\n        }\n      }, this.state.editingId ? \"Update\" : \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyContractForm(),\n          notes: ''\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1234,\n          columnNumber: 15\n        }\n      }, \"Cancel\")))), this.state.showAlert && this.renderAlert(), this.state.showCustomerOrderOverlay && this.renderCustomerOrderOverlay());\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1247,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1248,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1249,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1250,\n        columnNumber: 9\n      }\n    }, \"Service Contracts\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1251,\n        columnNumber: 9\n      }\n    }, \"+ Create Contract\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1253,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1254,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1255,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1256,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1257,\n        columnNumber: 15\n      }\n    }, \"Contract No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1258,\n        columnNumber: 15\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1259,\n        columnNumber: 15\n      }\n    }, \"Ref No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1260,\n        columnNumber: 15\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1261,\n        columnNumber: 15\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1262,\n        columnNumber: 15\n      }\n    }, \"Duration\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1263,\n        columnNumber: 15\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1264,\n        columnNumber: 15\n      }\n    }, \"Value\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1267,\n        columnNumber: 11\n      }\n    }, this.state.contracts.map((c, i) => {\n      let statusClass = \"badge-secondary\";\n      if (c.status === \"Awaiting Approval\") statusClass = \"badge-warning\";else if (c.status === \"Approved\") statusClass = \"badge-success\";else if (c.status === \"Partial\") statusClass = \"badge-secondary\"; // you need to define css .badge-purple { background:#6f42c1; }\n      else if (c.status === \"Completed\") statusClass = \"badge-info\";\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1276,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1277,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-link p-0\",\n        onClick: () => this.setState({\n          showForm: true,\n          editingId: c.id,\n          formData: { ...c\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1278,\n          columnNumber: 21\n        }\n      }, c.contractNo)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1289,\n          columnNumber: 19\n        }\n      }, this.formatDate(c.createdDate)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1290,\n          columnNumber: 19\n        }\n      }, c.refNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1291,\n          columnNumber: 19\n        }\n      }, c.customer), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1292,\n          columnNumber: 19\n        }\n      }, c.currency), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1293,\n          columnNumber: 19\n        }\n      }, this.formatDate(c.contrDurationFrom), \" - \", this.formatDate(c.contrDurationTo)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1296,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: `badge ${statusClass}`,\n        style: {\n          fontSize: '14px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1297,\n          columnNumber: 21\n        }\n      }, c.status)), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1299,\n          columnNumber: 19\n        }\n      }, c.contractValue));\n    }))))));\n  }\n\n  getEmptyContractForm() {\n    return {\n      contractType: 'Standard',\n      contractNo: '',\n      createdDate: new Date().toISOString().split('T')[0],\n      status: 'Entered',\n      refNo: '',\n      customer: '',\n      currency: '',\n      conversionRate: '',\n      amtAgreed: '',\n      nameofwrk: '',\n      durationFrom: '',\n      durationTo: '',\n      lineItems: [],\n      despatchMode: '',\n      paymentTerms: '',\n      billTo: '',\n      shipTo: '',\n      freightCharges: '',\n      freightTaxPercent: '',\n      freightTaxAmt: '',\n      packingCharges: '',\n      amountLimit: '',\n      minimumRelease: '',\n      contractValue: '',\n      notes: ''\n    };\n  }\n\n  componentDidMount() {\n    this.fetchContracts();\n    this.fetchCustomers();\n    this.fetchProducts();\n    this.fetchTaxGroups();\n    this.fetchUsers();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.paymentMode !== this.state.paymentMode || prevState.autoBill !== this.state.autoBill) {\n      if (this.state.autoBill) {\n        this.updateLineItemsForAutoBill();\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1313,\n        columnNumber: 7\n      }\n    }, this.state.showCustomerOverlay && this.renderCustomerOverlay(), this.state.showProductOverlay && this.renderProductOverlay(), this.state.showForm ? this.renderForm() : this.renderTable(), this.state.showTaxOverlay && this.renderTaxOverlay());\n  }\n\n}\n\nexport default ContractBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/servicecontract/servicecontractbilling.js"],"names":["React","Component","Form","DatePicker","db","Modal","Button","collection","query","where","getDocs","addDoc","updateDoc","doc","serverTimestamp","format","ContractBilling","state","contracts","customers","products","taxGroups","users","isOneYear","showTaxOverlay","activeTab","showForm","editingId","durationFrom","durationTo","billingTypes","autobill","paymentModes","tillDate","repeat","canAddItems","showProductOverlay","productOverlaySearch","selectedProductIds","formData","getEmptyContractForm","notes","searchTerm","nameofwrk","showCustomerOrderOverlay","customerOrderOverlaySearch","selectedCustomerOrders","customerOrders","customerOrderLineItems","showAlert","alertMsg","fetchContracts","snap","data","docs","map","id","setState","reverse","fetchCustomers","fetchCustomerOrders","customerName","orders","filtered","filter","o","customer","status","fetchProducts","fetchUsers","fetchTaxGroups","checkDurationSelected","hideProductOverlay","toggleProductSelection","productId","checked","prev","addSelectedProductsToLineItems","selectedProducts","p","includes","newItems","product","itemCode","itemDesc","ptdescription","hsnCode","qty","unitPrice","price","months","taxGroupNames","taxAmt","itemTotal","lineItems","recalculateContractTotals","getDurationInfo","days","billingType","from","Date","to","getFullYear","getMonth","formatAddress","addr","address","city","country","Boolean","join","zip","formatDate","d","selectCustomer","custname","currency","billTo","shipTo","despatchMode","paymentTerms","customerOrderId","showCustomerOverlay","selectCustomerOrder","order","item","itemDescription","uom","orderNo","selectProductForLineItem","newItem","code","name","hsn","handleInputChange","field","value","handleAddItemsClick","bundleProducts","category","filteredProducts","handleLineItemChange","idx","updatedItems","parseFloat","totalMonths","daysInMonth","getDate","baseTotal","toFixed","toggleTaxGroupSelection","groupName","lineIdx","isChecked","push","g","percent","amount","forEach","group","find","t","Array","isArray","comp","val","percentOrAmt","type","freightCharges","freightTaxPercent","packingCharges","conversionRate","amtAgreed","freightTaxAmt","finalValue","contractValue","handleTabChange","handleNotesChange","e","target","handleSubmit","preventDefault","alert","length","saveData","createdAt","contractNo","renderAlert","renderTaxOverlay","currentTaxLineIdx","selected","Set","fontSize","color","cursor","handleOverlayClose","background","tg","has","li","component","renderContractNoField","contractType","customerOverlaySearch","hideCustomerOverlay","renderCustomerOverlay","c","toLowerCase","custcode","custshortName","maxHeight","overflowY","i","hideCustomerOrderOverlay","renderCustomerOrderOverlay","orderDate","orderValue","renderProductOverlay","currentPage","ptshortName","itemsPerPage","totalPages","Math","ceil","paginated","slice","display","alignItems","justifyContent","marginTop","max","_","min","renderTabs","tabNames","tab","border","borderBottom","undefined","fontWeight","d1","d2","updateLineItemsForAutoBill","updateLineItemsForBillingTypes","updateLineItemsForPaymentModes","totalFullMonths","renderBillingTypeSection","updated","replace","renderPaymentModeSection","mode","m","charAt","toUpperCase","renderLinesTab","overflowX","minWidth","duration","width","renderTermsTab","amountLimit","minimumRelease","renderNotesTab","renderForm","flex","padding","createdDate","refNo","renderTable","statusClass","contrDurationFrom","contrDurationTo","toISOString","split","componentDidMount","componentDidUpdate","prevProps","prevState","paymentMode","autoBill","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Form } from 'react-bootstrap';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport { db } from '../../../../firebase';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { collection, query, where,getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\r\nimport { format } from 'date-fns';  \r\nclass ContractBilling extends Component {\r\n  \r\n  state = {\r\n    contracts: [],\r\n    customers: [],\r\n    products: [],\r\n    taxGroups: [],\r\n    users: [],\r\n    isOneYear: '',\r\n    showTaxOverlay: false,\r\n    activeTab: 0,\r\n    showForm: false,\r\n    editingId: null,\r\n    durationFrom: null,\r\n    durationTo: null,\r\n    billingTypes: [],\r\n    autobill: false,\r\n    paymentModes:[],\r\n    tillDate: '', \r\n    repeat: false, \r\n    canAddItems: false,\r\n    showProductOverlay: false,\r\n    productOverlaySearch: '',\r\n    selectedProductIds:[],\r\n    formData: this.getEmptyContractForm(),\r\n    notes: '',\r\n    searchTerm:'',\r\n    nameofwrk:'',\r\n    showCustomerOrderOverlay: false,\r\n    customerOrderOverlaySearch: '',\r\n    selectedCustomerOrders: [],\r\n    customerOrders: [],\r\n    customerOrderLineItems: [],\r\n    showAlert: false,\r\n    alertMsg: '',\r\n  };\r\n\r\n  getEmptyContractForm() {\r\n    return {\r\n      contractType: 'Standard',\r\n      contractNo: '',\r\n      createdDate: new Date().toISOString().split('T')[0],\r\n      status: 'Entered',\r\n      refNo: '',\r\n      customer: '',\r\n      currency: '',\r\n      conversionRate: '',\r\n      amtAgreed: '',\r\n      nameofwrk:'',\r\n      durationFrom: '',\r\n      durationTo: '',\r\n      lineItems: [],\r\n      despatchMode: '',\r\n      paymentTerms: '',\r\n      billTo: '',\r\n      shipTo: '',\r\n      freightCharges: '',\r\n      freightTaxPercent: '',\r\n      freightTaxAmt: '',\r\n      packingCharges: '',\r\n      amountLimit: '',\r\n      minimumRelease: '',\r\n      contractValue: '',\r\n      notes: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchContracts();\r\n    this.fetchCustomers();\r\n    this.fetchProducts();\r\n    this.fetchTaxGroups();\r\n    this.fetchUsers();\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n  if (\r\n    prevState.paymentMode !== this.state.paymentMode ||\r\n    prevState.autoBill !== this.state.autoBill\r\n  ) {\r\n    if (this.state.autoBill) {\r\n      this.updateLineItemsForAutoBill();\r\n    }\r\n  }\r\n}\r\n\r\n  fetchContracts = async () => {\r\n    const snap = await getDocs(collection(db, 'contracts'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ contracts: data.reverse() });\r\n  };\r\n\r\n  fetchCustomers = async () => {\r\n    const snap = await getDocs(collection(db, 'customers'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ customers: data });\r\n  };\r\nfetchCustomerOrders = async (customerName) => {\r\n  if (!customerName) return this.setState({ customerOrders: [] });\r\n  const snap = await getDocs(collection(db, 'orders'));\r\n  const orders = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  const filtered = orders.filter(\r\n    o => (o.customer === customerName || o.customerName === customerName) && o.status === \"Approved\"\r\n  );\r\n  this.setState({ customerOrders: filtered });\r\n};\r\n\r\n  fetchProducts = async () => {\r\n    const snap = await getDocs(collection(db, 'products'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ products: data });\r\n  };\r\nfetchUsers = async () => {\r\n  const snap = await getDocs(collection(db, 'users'));\r\n  const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  this.setState({ users: data });\r\n};\r\n  fetchTaxGroups = async () => {\r\n    const snap = await getDocs(collection(db, 'taxGroups'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ taxGroups: data });\r\n  };\r\n  \r\n  checkDurationSelected = () => {\r\n  const { durationFrom, durationTo } = this.state;\r\n  this.setState({ canAddItems: !!(durationFrom && durationTo) });\r\n};\r\n\r\n\r\n  showProductOverlay = () => this.setState({ showProductOverlay: true, productOverlaySearch: '', selectedProductIds: [] });\r\n  hideProductOverlay = () => this.setState({ showProductOverlay: false, productOverlaySearch: '', selectedProductIds: [] });\r\n\r\ntoggleProductSelection = (productId, checked) => {\r\n  this.setState(prev => ({\r\n    selectedProductIds: checked\r\n      ? [...prev.selectedProductIds, productId]\r\n      : prev.selectedProductIds.filter(id => id !== productId)\r\n  }));\r\n};\r\naddSelectedProductsToLineItems = () => {\r\n  const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\r\n  const newItems = selectedProducts.map(product => ({\r\n    itemCode: product.productId || '',\r\n    itemDesc: product.ptdescription || '',\r\n    hsnCode: product.hsnCode || '',\r\n    qty: 1,\r\n    unitPrice: product.price || 0,\r\n    months: 1,\r\n    taxGroupNames: [],\r\n    taxAmt: 0,\r\n    itemTotal: 0\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      lineItems: [...prev.formData.lineItems, ...newItems]\r\n    },\r\n    showProductOverlay: false,\r\n    selectedProductIds: []\r\n  }), this.recalculateContractTotals);\r\n};\r\n\r\ngetDurationInfo = () => {\r\n  const { durationFrom, durationTo } = this.state.formData;\r\n  if (!durationFrom || !durationTo) return { months: 0, days: 0, billingType: '' };\r\n  const from = new Date(durationFrom);\r\n  const to = new Date(durationTo);\r\n  // Months difference\r\n  let months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth()) + 1;\r\n  // Days difference\r\n  let days = (to - from) / (1000 * 60 * 60 * 24) + 1;\r\n  // Billing type\r\n  let billingType = '';\r\n  if (months >= 12) billingType = 'yearly';\r\n  else if (months === 6) billingType = 'half-yearly';\r\n  else if (months <= 3) billingType = 'quarterly';\r\n  return { months, days, billingType };\r\n};\r\n\r\nformatAddress = (addr) => {\r\n  if (!addr) return '';\r\n  if (typeof addr === 'string') return addr;\r\n  return [\r\n    addr.address,\r\n    [addr.city, addr.state, addr.country].filter(Boolean).join(', '),\r\n    addr.zip\r\n  ].filter(Boolean).join('\\n');\r\n};\r\n\r\nformatDate = (d) => {\r\n  if (!d) return '';\r\n  try {\r\n    return format(new Date(d), 'dd-MMM-yy');\r\n  } catch {\r\n    return d;\r\n  }\r\n};\r\n\r\n  selectCustomer = (customer) => {\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      customer: customer.custname,\r\n      currency: customer.currency || '',\r\n      billTo: this.formatAddress(customer.billTo),\r\n      shipTo: this.formatAddress(customer.shipTo),\r\n      despatchMode: customer.despatchMode || '',\r\n      paymentTerms: customer.paymentTerms || '',\r\n      customerOrderId: '',\r\n      lineItems: [] \r\n    },\r\n    showCustomerOverlay: false,\r\n    customerOrderLineItems: [],\r\n    customerOrders: []\r\n  }), () => {\r\n    this.fetchCustomerOrders(customer.custname); \r\n  });\r\n};\r\n\r\nselectCustomerOrder = (order) => {\r\n  const lineItems = (order.lineItems || []).map(item => ({\r\n    itemCode: item.itemCode || '',\r\n    itemDesc: item.itemDescription || '',\r\n    hsnCode: item.hsnCode || '',\r\n    uom: item.uom || '',\r\n    qty: item.qty || 1,\r\n    unitPrice: item.unitPrice || 0,\r\n    months: 1,\r\n    taxGroupNames: [],\r\n    taxAmt: 0,\r\n    itemTotal: 0\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      customerOrderId: order.orderNo,\r\n      lineItems,\r\n    },\r\n    showCustomerOrderOverlay: false,\r\n    customerOrderLineItems: lineItems,\r\n  }), this.recalculateContractTotals);\r\n};\r\n\r\n  selectProductForLineItem = (product) => {\r\n    const newItem = {\r\n      itemCode: product.code || '',\r\n      itemDesc: product.name || '',\r\n      hsnCode: product.hsn || '',\r\n      uom: product.uom || '',\r\n      qty: 1,\r\n      unitPrice: product.price || 0,\r\n      months: 1,\r\n      taxGroupNames: [],\r\n      taxAmt: 0,\r\n      itemTotal: 0\r\n    };\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: [...prev.formData.lineItems, newItem]\r\n      },\r\n      showProductOverlay: false\r\n    }), this.recalculateContractTotals);\r\n  };\r\n\r\nhandleInputChange = (field, value) => {\r\n  this.setState(prev => ({\r\n    formData: { ...prev.formData, [field]: value }\r\n  }), () => {\r\n    if (field === 'durationFrom' || field === 'durationTo') {\r\n      const { billingType } = this.getDurationInfo();\r\n      this.setState({ billingType });\r\n    }\r\n    if (['freightCharges', 'freightTaxPercent', 'packingCharges', 'amtAgreed', 'conversionRate'].includes(field)) {\r\n      this.recalculateContractTotals();\r\n    }\r\n  });\r\n};\r\n\r\nhandleAddItemsClick = () => {\r\n  const { formData } = this.state;\r\n  if (!formData.customer) {\r\n    this.setState({ showAlert: true, alertMsg: \"Select customer first!\" });\r\n    return;\r\n  }\r\n  if (!formData.durationFrom || !formData.durationTo) {\r\n    this.setState({ showAlert: true, alertMsg: \"Select contract duration first!\" });\r\n    return;\r\n  }\r\n  if (!formData.customerOrderId) {\r\n    // Filter products for Bundle category\r\n    const bundleProducts = this.state.products.filter(p => p.category === \"Bundle\");\r\n    this.setState({ filteredProducts: bundleProducts, showProductOverlay: true });\r\n  } else {\r\n    this.setState({ showAlert: true, alertMsg: \"Line items are already filled from selected order.\" });\r\n  }\r\n};\r\n\r\nhandleLineItemChange = (idx, field, value) => {\r\n  const updatedItems = [...this.state.formData.lineItems];\r\n  updatedItems[idx] = { ...updatedItems[idx], [field]: value };\r\n  // Calculation\r\n  const qty = parseFloat(updatedItems[idx].qty || 0);\r\n  const unitPrice = parseFloat(updatedItems[idx].unitPrice || 0);\r\n  const months = parseFloat(updatedItems[idx].months || 1);\r\n  const days = parseFloat(updatedItems[idx].days || 0);\r\n  let totalMonths = months;\r\n  if (this.state.paymentModes.includes('prorate') && days > 0) {\r\n    // Use correct proration formula\r\n    let daysInMonth = 30;\r\n    const { durationFrom } = this.state.formData;\r\n    if (durationFrom) {\r\n      const d = new Date(durationFrom);\r\n      daysInMonth = new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\r\n    }\r\n    totalMonths = (months) + (days / daysInMonth);\r\n  }\r\n  const baseTotal = qty * unitPrice * totalMonths;\r\n  updatedItems[idx].itemTotal = baseTotal.toFixed(2);\r\n  this.setState(prev => ({\r\n    formData: { ...prev.formData, lineItems: updatedItems }\r\n  }), this.recalculateContractTotals);\r\n};\r\n\r\n toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\r\n    const formData = { ...this.state.formData };\r\n    const item = formData.lineItems[lineIdx];\r\n    if (!item.taxGroupNames) item.taxGroupNames = [];\r\n    if (isChecked) {\r\n      if (!item.taxGroupNames.includes(groupName)) {\r\n        item.taxGroupNames.push(groupName);\r\n      }\r\n    } else {\r\n      item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\r\n    }\r\n    // recalculate taxAmt and total\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (item.taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const qty = parseFloat(item.qty || 0);\r\n    const unitPrice = parseFloat(item.unitPrice || 0);\r\n    const months = parseFloat(item.months || 1);\r\n    const baseTotal = qty * unitPrice * months;\r\n    const taxAmt = ((baseTotal * percent) / 100 + amount);\r\n    item.taxAmt = taxAmt.toFixed(2);\r\n    item.itemTotal = (baseTotal + taxAmt).toFixed(2);\r\n    item.baseTotal = baseTotal.toFixed(2);\r\n    this.setState({ formData }, this.recalculateContractTotals);\r\n  };\r\n\r\nrecalculateContractTotals = () => {\r\n    const { lineItems, freightCharges, freightTaxPercent, packingCharges, conversionRate } = this.state.formData;\r\n    let amtAgreed = 0;\r\n    (lineItems || []).forEach(item => {\r\n      amtAgreed += parseFloat(item.itemTotal || 0);\r\n    });\r\n\r\n    // Freight + packing\r\n    const freightTaxAmt = (parseFloat(freightCharges || 0) * parseFloat(freightTaxPercent || 0)) / 100;\r\n    amtAgreed += parseFloat(packingCharges || 0) + freightTaxAmt;\r\n\r\n    // Apply conversion rate if needed\r\n    let finalValue = amtAgreed;\r\n    if (conversionRate) {\r\n      finalValue = amtAgreed * parseFloat(conversionRate);\r\n    }\r\n\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        amtAgreed: finalValue.toFixed(2),\r\n        contractValue: finalValue.toFixed(2),\r\n        freightTaxAmt: freightTaxAmt.toFixed(2)\r\n      }\r\n    }));\r\n  };\r\n\r\n  handleTabChange = (idx) => this.setState({ activeTab: idx });\r\n\r\n  handleNotesChange = (e) => this.setState({ notes: e.target.value });\r\n\r\n  handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  const { editingId, formData, contracts, notes } = this.state;\r\n  if (!formData.customer) return alert(\"Customer is required\");\r\n  if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\r\n\r\n  const saveData = {\r\n    ...formData,\r\n    notes,\r\n    status: \"Awaiting Approval\",\r\n    createdAt: serverTimestamp()\r\n  };\r\n\r\n  if (editingId) {\r\n    await updateDoc(doc(db, \"contracts\", editingId), saveData);\r\n  } else {\r\n    saveData.contractNo = `SC${1000 + contracts.length}`;\r\n    await addDoc(collection(db, \"contracts\"), saveData);\r\n  }\r\n\r\n  this.setState({\r\n    showForm: false,\r\n    editingId: null,\r\n    formData: this.getEmptyContractForm(),\r\n    notes: ''\r\n  });\r\n  this.fetchContracts();\r\n};\r\nrenderAlert = () => (\r\n    <Modal show={this.state.showAlert} onHide={() => this.setState({ showAlert: false })} centered>\r\n      <Modal.Body>\r\n        <div className=\"text-center\">{this.state.alertMsg}</div>\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"primary\" onClick={() => this.setState({ showAlert: false })}>OK</Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n\r\nrenderTaxOverlay = () => {\r\n  const { taxGroups, currentTaxLineIdx, formData } = this.state;\r\n  if (currentTaxLineIdx === null) return null;\r\n\r\n  const item = formData.lineItems[currentTaxLineIdx];\r\n  const selected = new Set(item.taxGroupNames || []);\r\n\r\n  return ( \r\n  <div className=\"custom-overlay\">\r\n      <div className=\"custom-overlay-content\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n          <div className=\"custom-overlay-title\">Select Tax Groups</div>\r\n          <div>\r\n            <button\r\n              className=\"btn btn-primary btn-sm mr-2\"\r\n              onClick={() => this.setState({ showTaxOverlay: false })}\r\n              type=\"button\"\r\n            >\r\n              Submit\r\n            </button>\r\n            <i className=\"mdi mdi-close-box-outline\"\r\n              style={{ fontSize: \"24px\", color: \"#2196F3\", cursor: \"pointer\" }} \r\n              onClick={this.handleOverlayClose}\r\n              aria-label=\"Close\"\r\n              type=\"button\"\r\n            >\r\n            </i>\r\n          </div>\r\n          </div>\r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead style={{ background: '#f4f6fa' }}>\r\n          <tr>\r\n            <th></th>\r\n            <th>Group</th>\r\n            <th>Components</th>\r\n            <th>Type</th>\r\n            <th>% / Amount</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {taxGroups.map(tg => (\r\n            <tr key={tg.groupName}>\r\n              <td>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selected.has(tg.groupName)}\r\n                  onChange={e =>\r\n                    this.toggleTaxGroupSelection(tg.groupName, currentTaxLineIdx, e.target.checked)\r\n                  }\r\n                />\r\n              </td>\r\n              <td >{tg.groupName}</td>\r\n              <td>{tg.lineItems.map(li => li.component).join(', ')}</td>\r\n              <td>{tg.lineItems.map(li => li.type).join(', ')}</td>\r\n              <td>{tg.lineItems.map(li => li.percentOrAmt).join(', ')}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n renderContractNoField = () => {\r\n    const { formData } = this.state;\r\n    return (\r\n      <div className=\"form-group col-md-2\">\r\n        <label>Contract No</label>\r\n        {formData.contractType === \"Standard\" ? (\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control form-control-sm\"\r\n            value={formData.contractNo}\r\n            readOnly\r\n            placeholder=\"Auto\"\r\n          />\r\n        ) : (\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control form-control-sm\"\r\n            value={formData.contractNo}\r\n            onChange={e => this.handleInputChange('contractNo', e.target.value)}\r\n            placeholder=\"Enter Contract No\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\nshowCustomerOverlay = () => this.setState({ showCustomerOverlay: true, customerOverlaySearch: '' });\r\nhideCustomerOverlay = () => this.setState({ showCustomerOverlay: false, customerOverlaySearch: '' });\r\n\r\nrenderCustomerOverlay = () => {\r\n  const { customers, customerOverlaySearch } = this.state;\r\n  const filtered = customers.filter(c =>\r\n    (c.custname || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) ||\r\n    (c.custcode || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) ||\r\n    (c.custshortName || '').toLowerCase().includes(customerOverlaySearch.toLowerCase())\r\n  );\r\n  return (\r\n     <div className=\"custom-overlay\">\r\n      <div className=\"custom-overlay-content\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n        <div className=\"custom-overlay-title\">Select Customer</div>\r\n        <i className='mdi mdi-close-box-outline'\r\n        style={{ fontSize: \"24px\", color: \"#2196F3\", cursor: \"pointer\" }} \r\n            onClick={()=> this.setState({ showCustomerOverlay: false, customerOverlaySearch: '' })}\r\n            aria-label=\"Close\"\r\n            type=\"button\"\r\n          >\r\n          </i>\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control mb-2\"\r\n          placeholder={`Search customer`}\r\n          value={customerOverlaySearch}\r\n          onChange={e => this.setState({ customerOverlaySearch: e.target.value })}\r\n        />\r\n        <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n          <table className=\"table table-bordered table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Code</th>\r\n                <th>Short Name</th>\r\n                <th>Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filtered.map((c, i) => (\r\n                <tr key={c.id || i}>\r\n                  <td>{c.custname}</td>\r\n                  <td>{c.custcode}</td>\r\n                  <td>{c.custshortName}</td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-sm btn-success\"\r\n                      onClick={() => this.selectCustomer(c)}\r\n                    >Select</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {filtered.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={4} className=\"text-center\">No customers found</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nshowCustomerOrderOverlay = () => this.setState({ showCustomerOrderOverlay: true, customerOrderOverlaySearch: '' });\r\nhideCustomerOrderOverlay = () => this.setState({ showCustomerOrderOverlay: false, customerOrderOverlaySearch: '' });\r\n\r\nrenderCustomerOrderOverlay = () => {\r\n  const { customerOrders, customerOrderOverlaySearch } = this.state;\r\n  const filtered = customerOrders.filter(o =>\r\n    (o.orderNo || '').toLowerCase().includes(customerOrderOverlaySearch.toLowerCase())\r\n  );\r\n  return (\r\n     <div className=\"custom-overlay\">\r\n      <div className=\"custom-overlay-content\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n        <div className=\"custom-overlay-title\">Select Customer Order</div>\r\n        <i className='mdi mdi-close-box-outline'\r\n        style={{ fontSize: \"24px\", color: \"#2196F3\", cursor: \"pointer\" }} \r\n            onClick={()=> this.setState({ showCustomerOrderOverlay: false, customerOrderOverlaySearch: '' })}\r\n            aria-label=\"Close\"\r\n            type=\"button\"\r\n          >\r\n          </i>\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control mb-2\"\r\n          placeholder={`Search Customer Orders`}\r\n          value={customerOrderOverlaySearch}\r\n          onChange={e => this.setState({ customerOrderOverlaySearch: e.target.value })}\r\n        />\r\n        <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n          <table className=\"table table-bordered table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Order No</th>\r\n                <th>Date</th>\r\n                <th>Value</th>\r\n                <th>Select</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filtered.map((o, i) => (\r\n                <tr key={o.id || i}>\r\n                  <td>{o.orderNo}</td>\r\n                  <td>{o.orderDate}</td>\r\n                  <td>{o.orderValue}</td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-sm btn-success\"\r\n                      onClick={() => this.selectCustomerOrder(o)}\r\n                    >Select</button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {filtered.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={4} className=\"text-center\">No approved orders found</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n renderProductOverlay = () => {\r\n    const { products, productOverlaySearch, selectedProductIds,currentPage=1 } = this.state;\r\n    const filtered = products.filter(p =>\r\n      (p.ptshortName || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptdescription || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.itemCode || '').toLowerCase().includes(productOverlaySearch.toLowerCase())\r\n    );\r\n    const itemsPerPage=10;\r\n    const totalPages = Math.ceil(filtered.length / itemsPerPage);\r\n  const paginated = filtered.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);\r\n\r\n    return (\r\n      <div className=\"custom-overlay\" \r\n    style={{ display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n      <div\r\n        className=\"custom-overlay-content\"\r\n      >\r\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n          <div className=\"custom-overlay-title\">Select Products</div>\r\n           <div className=\"d-flex align-items-center\">\r\n            <i\r\n              className=\"mdi mdi-close-box-outline\"\r\n              style={{ fontSize: \"24px\", color: \"#2196F3\", cursor: \"pointer\" }}\r\n              onClick={this.hideProductOverlay}\r\n              aria-label=\"Close\"\r\n              type=\"button\"\r\n            ></i>\r\n           </div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by code or name...\"\r\n            value={productOverlaySearch}\r\n            onChange={e => this.setState({ productOverlaySearch: e.target.value })}\r\n          />\r\n           <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Code</th>\r\n                  <th>Item Desc</th>\r\n                  <th>Select</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {paginated.map((p, i) => (\r\n                  <tr key={p.id || i}>\r\n                    <td>{p.productId}</td>\r\n                    <td>{p.ptdescription}</td>\r\n                    <td>\r\n                      <button\r\n                        className=\"btn btn-sm btn-success\"\r\n                        onClick={() => this.selectProductForLineItem(p)}\r\n                      >Select</button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n {paginated.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={3} className=\"text-center\">No products found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n               <nav aria-label=\"Product pagination example\" style={{ marginTop: 12 }}>\r\n          <ul className=\"pagination justify-content-end mb-0\">\r\n            <li className={`page-item ${currentPage === 1 ? \"disabled\" : \"\"}`}>\r\n              <button\r\n                className=\"page-link\"\r\n                aria-label=\"Previous\"\r\n                onClick={() => this.setState({ currentPage: Math.max(currentPage - 1, 1) })}\r\n              >\r\n                <span aria-hidden=\"true\">&laquo;</span>\r\n              </button>\r\n            </li>\r\n            {[...Array(totalPages)].map((_, idx) => (\r\n              <li key={idx} className={`page-item ${currentPage === idx + 1 ? \"active\" : \"\"}`}>\r\n                <button\r\n                  className=\"page-link\"\r\n                  onClick={() => this.setState({ currentPage: idx + 1 })}\r\n                >\r\n                  {idx + 1}\r\n                </button>\r\n              </li>\r\n            ))}\r\n            <li className={`page-item ${currentPage === totalPages ? \"disabled\" : \"\"}`}>\r\n              <button\r\n                className=\"page-link\"\r\n                aria-label=\"Next\"\r\n                onClick={() => this.setState({ currentPage: Math.min(currentPage + 1, totalPages) })}\r\n              >\r\n                <span aria-hidden=\"true\">&raquo;</span>\r\n              </button>\r\n            </li>\r\n          </ul>\r\n        </nav>  </div>\r\n      </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  \r\n  renderTabs = () => {\r\n    const { activeTab } = this.state;\r\n    const tabNames = ['Lines', 'Terms', 'Notes'];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\" style={{ fontSize: '16px' }}>\r\n        {tabNames.map((tab, idx) => (\r\n          <li className=\"nav-item\" key={tab}>\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link${activeTab === idx ? ' active' : ''}`}\r\n              onClick={() => this.handleTabChange(idx)}\r\n              style={{\r\n                color: '#007bff',\r\n                background: activeTab === idx ? '#e9ecef' : '#fff',\r\n                border: '1px solid #dee2e6',\r\n                borderBottom: activeTab === idx ? 'none' : undefined,\r\n                fontWeight: activeTab === idx ? 'bold' : 'normal'\r\n              }}\r\n            >\r\n              {tab}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\nisOneYear = (from, to) => {\r\n  if (!from || !to) return false;\r\n  const d1 = new Date(from);\r\n  const d2 = new Date(to);\r\n  return d2.getFullYear() - d1.getFullYear() === 1 &&\r\n         d2.getMonth() === d1.getMonth() &&\r\n         d2.getDate() === d1.getDate();\r\n};\r\n\r\nupdateLineItemsForAutoBill = () => {\r\n  const { paymentModes, formData } = this.state;\r\n  const { durationFrom, durationTo } = formData;\r\n  const from = new Date(durationFrom);\r\n  const to = new Date(durationTo);\r\n  let days = 0, months = 1;\r\n  if (paymentModes.includes('prorate')) {\r\n    days = new Date(from.getFullYear(), from.getMonth() + 1, 0).getDate() - from.getDate() + 1;\r\n  }\r\n  if (paymentModes.includes('monthly')) {\r\n    months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth()) + 1;\r\n  }\r\n  const updatedItems = (formData.lineItems || []).map(item => ({\r\n    ...item,\r\n    days,\r\n    months\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: { ...prev.formData, lineItems: updatedItems }\r\n  }), this.recalculateContractTotals);\r\n};\r\nupdateLineItemsForBillingTypes = () => {\r\n  const { billingTypes, formData } = this.state;\r\n  let months = 1;\r\n  if (billingTypes.includes('yearly')) months = 12;\r\n  else if (billingTypes.includes('half-yearly')) months = 6;\r\n  else if (billingTypes.includes('quarterly')) months = 3;\r\n  const updatedItems = (formData.lineItems || []).map(item => ({\r\n    ...item,\r\n    months\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: { ...prev.formData, lineItems: updatedItems }\r\n  }), this.recalculateContractTotals);\r\n};\r\n\r\nupdateLineItemsForPaymentModes = () => {\r\n  const { paymentModes, formData } = this.state;\r\n  const { durationFrom, durationTo } = formData;\r\n  const from = new Date(durationFrom);\r\n  const to = new Date(durationTo);\r\n  let days = 0, months = 1;\r\n  let totalFullMonths = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth());\r\n\r\nif (paymentModes.includes('prorate') && paymentModes.includes('monthly')) {\r\n    days = new Date(from.getFullYear(), from.getMonth() + 1, 0).getDate() - from.getDate() + 1;\r\n    months = totalFullMonths - 1; \r\n} else if (paymentModes.includes('prorate')) {\r\n    months = 0;\r\n    days = new Date(from.getFullYear(), from.getMonth() + 1, 0).getDate() - from.getDate() + 1; \r\n\r\n} else if (paymentModes.includes('monthly')) {\r\n  days=0;\r\n    months = (to.getFullYear() - from.getFullYear()) * 12 + (to.getMonth() - from.getMonth()) + 1; \r\n\r\n} else {\r\n    days = 0;\r\n    months = 1; \r\n}\r\n  const updatedItems = (formData.lineItems || []).map(item => ({\r\n    ...item,\r\n    days,\r\n    months\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: { ...prev.formData, lineItems: updatedItems }\r\n  }), this.recalculateContractTotals);\r\n};\r\nrenderBillingTypeSection = () => {\r\n  const { billingTypes } = this.state;\r\n  return (\r\n    <div className=\"form-row mb-2 d-flex align-items-center\">\r\n      <label className=\"mr-2 mb-0\">Billing Type:</label>\r\n      {['quarterly', 'half-yearly', 'yearly'].map(type => (\r\n        <div key={type} className=\"form-check form-check-inline d-flex align-items-center\">\r\n          <input\r\n            className=\"form-check-input mt-0\"\r\n            type=\"checkbox\"\r\n            checked={billingTypes.includes(type)}\r\n            onChange={e => {\r\n              let updated = billingTypes.includes(type)\r\n                ? billingTypes.filter(t => t !== type)\r\n                : [...billingTypes, type];\r\n              this.setState({ billingTypes: updated }, () => this.updateLineItemsForBillingTypes());\r\n            }}\r\n          />\r\n          <label className=\"form-check-label ml-1 mb-0\">\r\n            {type.replace('-', ' ').replace('yearly', 'Yearly').replace('half', 'Half').replace('quarterly', 'Quarterly')}\r\n          </label>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nrenderPaymentModeSection = () => {\r\n  const { paymentModes } = this.state;\r\n  return (\r\n    <div className=\"form-row mb-2\">\r\n      <label className=\"mr-2\">Payment Mode:</label>\r\n      {['prorate', 'monthly', 'one-time'].map(mode => (\r\n        <div key={mode} className=\"form-check form-check-inline\">\r\n          <input\r\n            className=\"form-check-input\"\r\n            type=\"checkbox\"\r\n            checked={paymentModes.includes(mode)}\r\n            onChange={e => {\r\n              let updated = paymentModes.includes(mode)\r\n                ? paymentModes.filter(m => m !== mode)\r\n                : [...paymentModes, mode];\r\n              this.setState({ paymentModes: updated }, () => this.updateLineItemsForPaymentModes());\r\n            }}\r\n          />\r\n          <label className=\"form-check-label\">{mode.charAt(0).toUpperCase() + mode.slice(1)}</label>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nrenderLinesTab = () => {\r\n  const months = this.state.formData.repeat && this.isOneYear(this.state.formData.durationFrom, this.state.formData.durationTo) ? 12 : 1;\r\n  const { formData, showProductOverlay } = this.state;\r\n  return (\r\n    <div>\r\n      <div className=\"form-row mb-2\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-primary btn-sm mr-2\"\r\n          onClick={this.handleAddItemsClick}\r\n        >\r\n          Add Items\r\n        </button>\r\n      </div>\r\n      <div className=\"table-responsive\" style={{ overflowX: 'auto' }}>\r\n        <table className=\"table table-bordered\" style={{ minWidth: 1200 }}>\r\n          <thead>\r\n            <tr>\r\n              <th>Item Code</th>\r\n              <th>Item Desc</th>\r\n              <th>HSN</th>\r\n              <th>UOM</th>\r\n              <th>Duration</th>\r\n              <th>Qty</th>\r\n              <th>Unit Price</th>\r\n              <th>Days</th>\r\n              <th>Months</th>\r\n              <th>Tax</th>\r\n              <th>Tax Amt</th>\r\n              <th>Item Total</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {(formData.lineItems || []).map((item, idx) => (\r\n              <tr key={idx}>\r\n                <td>{item.itemCode}</td>\r\n                <td>{item.itemDesc}</td>\r\n                <td>{item.hsnCode}</td>\r\n                <td>{item.uom}</td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control form-control-sm\"\r\n                    value={item.duration || `${formData.durationFrom} to ${formData.durationTo}`}\r\n                    onChange={e => this.handleLineItemChange(idx, 'duration', e.target.value)}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control form-control-sm\"\r\n                    value={item.qty}\r\n                    min=\"1\"\r\n                    style={{ width: 80 }}\r\n                    onChange={e => this.handleLineItemChange(idx, 'qty', e.target.value)}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control form-control-sm\"\r\n                    value={item.unitPrice}\r\n                    min=\"0\"\r\n                    style={{ width: 100 }}\r\n                    onChange={e => this.handleLineItemChange(idx, 'unitPrice', e.target.value)}\r\n                  />\r\n                </td>\r\n                <td>\r\n  <input\r\n    type=\"number\"\r\n    className=\"form-control form-control-sm\"\r\n    value={item.days || ''}\r\n    min=\"0\"\r\n    style={{ width: 80 }}\r\n    onChange={e => this.handleLineItemChange(idx, 'days', e.target.value)}\r\n  />\r\n</td>\r\n<td>\r\n  <input\r\n    type=\"number\"\r\n    className=\"form-control form-control-sm\"\r\n    value={item.months}\r\n    min=\"1\"\r\n    style={{ width: 80 }}\r\n    onChange={e => this.handleLineItemChange(idx, 'months', e.target.value)}\r\n  />\r\n</td>\r\n                <td>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-link btn-sm\"\r\n                    onClick={() => this.setState({ showTaxOverlay: true, currentTaxLineIdx: idx })}\r\n                  >\r\n                    {item.taxGroupNames && item.taxGroupNames.length > 0\r\n                      ? item.taxGroupNames.join(', ')\r\n                      : 'Select Tax'}\r\n                  </button>\r\n                </td>\r\n                <td>{item.taxAmt}</td>\r\n                <td>{item.itemTotal}</td>\r\n              </tr>\r\n            ))}\r\n            {(!formData.lineItems || formData.lineItems.length === 0) && (\r\n              <tr>\r\n                <td colSpan=\"12\" className=\"text-center\">No items</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      {showProductOverlay && this.renderProductOverlay()}\r\n    </div>\r\n  );\r\n};\r\n\r\n  renderTermsTab = () => {\r\n    const { formData } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Despatch Mode</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.despatchMode} onChange={e => this.handleInputChange('despatchMode', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Payment Terms</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.paymentTerms} onChange={e => this.handleInputChange('paymentTerms', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Bill To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.billTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Ship To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.shipTo} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightCharges} onChange={e => this.handleInputChange('freightCharges', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax %</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightTaxPercent} onChange={e => this.handleInputChange('freightTaxPercent', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax Amt</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightTaxAmt} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Packing Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.packingCharges} onChange={e => this.handleInputChange('packingCharges', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Amount Limit</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.amountLimit} onChange={e => this.handleInputChange('amountLimit', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Minimum Release</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.minimumRelease} onChange={e => this.handleInputChange('minimumRelease', e.target.value)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderNotesTab = () => (\r\n    <div>\r\n      <div className=\"form-group\">\r\n        <label>Notes / Remarks</label>\r\n        <textarea className=\"form-control form-control-sm\" rows=\"4\" value={this.state.notes} onChange={this.handleNotesChange} />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  renderForm = () => {\r\n    const { activeTab, formData } = this.state;\r\n    return (\r\n      <div className=\"card full-height\">\r\n        <form className=\"form-sample\" onSubmit={this.handleSubmit}>\r\n          <div style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>\r\n            <h4 className=\"mb-3\">Service Contract Creation/Update</h4>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Contract Type</label>\r\n                <select\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.contractType}\r\n                  onChange={e => this.handleInputChange('contractType', e.target.value)}\r\n                >\r\n                  <option value=\"Standard\">Standard</option>\r\n                  <option value=\"Manual\">Manual</option>\r\n                </select>\r\n              </div>\r\n                {this.renderContractNoField()}\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Created Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.createdDate}\r\n                  onChange={e => this.handleInputChange('createdDate', e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Status</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.status} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Name of Work</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.nameofwrk}/>\r\n              </div>\r\n             \r\n\r\n              \r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Customer</label>\r\n                <div className=\"input-group input-group-sm\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Choose Customer\"\r\n                    value={formData.customer}\r\n                    readOnly\r\n                    onClick={this.showCustomerOverlay}\r\n                    style={{ cursor: 'pointer' }}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <button className=\"btn btn-outline-secondary btn-sm\" type=\"button\" onClick={this.showCustomerOverlay}>Select</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Customer Order</label>\r\n                <div className=\"input-group input-group-sm\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"form-control\"\r\n                    placeholder=\"Select Order\"\r\n                    value={formData.customerOrderId || ''}\r\n                    readOnly\r\n                    onClick={this.showCustomerOrderOverlay}\r\n                    style={{ cursor: 'pointer' }}\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <button className=\"btn btn-outline-secondary btn-sm\" type=\"button\" onClick={this.showCustomerOrderOverlay}>Select</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n               <div className=\"form-group col-md-2\">\r\n                <label>Ref No</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.refNo} onChange={e => this.handleInputChange('refNo', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Currency</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.currency} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Conversion Rate</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.conversionRate} onChange={e => this.handleInputChange('conversionRate', e.target.value)} />\r\n              </div>\r\n              </div>\r\n              <div className=\"form-row\">\r\n  <div className=\"form-group col-md-3\">\r\n    <label>Contr.Duration From</label>\r\n    <Form.Control\r\n      type=\"date\"\r\n      value={this.state.formData.durationFrom || ''}\r\n      onChange={e => this.handleInputChange('durationFrom', e.target.value)}\r\n    />\r\n  </div>\r\n  <div className=\"form-group col-md-3\">\r\n    <label>Contr.Duration To</label>\r\n    <Form.Control\r\n      type=\"date\"\r\n      value={this.state.formData.durationTo || ''}\r\n      onChange={e => this.handleInputChange('durationTo', e.target.value)}\r\n    />\r\n  </div>\r\n  <div className=\"form-group col-md-2\">\r\n                <label>Amt.Agreed</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.amtAgreed} onChange={e => this.handleInputChange('amtAgreed', e.target.value)} />\r\n              </div>\r\n  <div className=\"form-group col-md-2\">\r\n    <label>Till Date</label>\r\n    <Form.Control\r\n      type=\"date\"\r\n      value={this.state.formData.tillDate || ''}\r\n      onChange={e => this.handleInputChange('tillDate', e.target.value)}\r\n    />\r\n  </div>\r\n  <div className=\"form-group col-md-1 d-flex align-items-center\">\r\n    <label className=\"mr-2\">Repeat</label>\r\n    <input\r\n      type=\"checkbox\"\r\n      checked={this.state.formData.repeat || false}\r\n      onChange={e => this.handleInputChange('repeat', e.target.checked)}\r\n    />\r\n  </div>\r\n  {this.renderBillingTypeSection()}\r\n  {this.renderPaymentModeSection()}\r\n            </div>\r\n            {this.renderTabs()}\r\n            {activeTab === 0 && this.renderLinesTab()}\r\n            {activeTab === 1 && this.renderTermsTab()}\r\n            {activeTab === 2 && this.renderNotesTab()}\r\n            <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n              <button type=\"submit\" className=\"btn btn-success mr-2\">\r\n                {this.state.editingId ? \"Update\" : \"Create\"}\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={() => this.setState({ showForm: false, editingId: null, formData: this.getEmptyContractForm(), notes: '' })}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n         {this.state.showAlert && this.renderAlert()}\r\n        {this.state.showCustomerOrderOverlay && this.renderCustomerOrderOverlay()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n\r\nrenderTable = () => (\r\n  <div className=\"card mt-4 full-height\">\r\n    <div className=\"card-body\">\r\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n        <h4 className=\"card-title\">Service Contracts</h4>\r\n        <button className=\"btn btn-primary\" onClick={() => this.setState({ showForm: true })}>+ Create Contract</button>\r\n      </div>\r\n      <div className=\"table-responsive\">\r\n        <table className=\"table table-bordered table-hover\">\r\n          <thead className=\"thead-light\">\r\n            <tr>\r\n              <th>Contract No</th>\r\n              <th>Date</th>\r\n              <th>Ref No</th>\r\n              <th>Customer</th>\r\n              <th>Currency</th>\r\n              <th>Duration</th>\r\n              <th>Status</th>\r\n              <th>Value</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.contracts.map((c, i) => {\r\n              let statusClass = \"badge-secondary\";\r\n              if (c.status === \"Awaiting Approval\") statusClass = \"badge-warning\";\r\n              else if (c.status === \"Approved\") statusClass = \"badge-success\";\r\n              else if (c.status === \"Partial\") statusClass = \"badge-secondary\"; // you need to define css .badge-purple { background:#6f42c1; }\r\n              else if (c.status === \"Completed\") statusClass = \"badge-info\";\r\n\r\n              return (\r\n                <tr key={i}>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-link p-0\"\r\n                      onClick={() => this.setState({\r\n                        showForm: true,\r\n                        editingId: c.id,\r\n                        formData: { ...c }\r\n                      })}\r\n                    >\r\n                      {c.contractNo}\r\n                    </button>\r\n                  </td>\r\n                  <td>{this.formatDate(c.createdDate)}</td>\r\n                  <td>{c.refNo}</td>\r\n                  <td>{c.customer}</td>\r\n                  <td>{c.currency}</td>\r\n                  <td>\r\n                    {this.formatDate(c.contrDurationFrom)} - {this.formatDate(c.contrDurationTo)}\r\n                  </td>\r\n                  <td>\r\n                    <label className={`badge ${statusClass}`} style={{ fontSize: '14px' }}>{c.status}</label>\r\n                  </td>\r\n                  <td>{c.contractValue}</td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showCustomerOverlay && this.renderCustomerOverlay()}\r\n        {this.state.showProductOverlay && this.renderProductOverlay()}\r\n        {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n        {this.state.showTaxOverlay && this.renderTaxOverlay()}\r\n      </div>\r\n         );\r\n  }\r\n}\r\n\r\nexport default ContractBilling;"]},"metadata":{},"sourceType":"module"}