{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\crm\\\\Activity.js\";\nimport React, { Component } from \"react\";\nimport { Table, Button, Card, Offcanvas, Form } from \"react-bootstrap\";\nimport { db } from \"../../firebase\";\nimport { collection, getDocs, addDoc, deleteDoc, doc } from \"firebase/firestore\";\n\nclass Activity extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      activities: [],\n      accounts: [],\n      showDrawer: false,\n      editingId: null,\n      formData: {\n        date: new Date().toISOString().split(\"T\")[0],\n        acname: \"\",\n        contact: \"\",\n        phone: \"\",\n        email: \"\",\n        source: \"\",\n        remarks: \"\"\n      },\n      contactOptions: []\n    };\n\n    this.fetchActivities = async () => {\n      const snap = await getDocs(collection(db, \"activities\"));\n      const activities = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        activities\n      });\n    };\n\n    this.fetchAccounts = async () => {\n      const snap = await getDocs(collection(db, \"accounts\"));\n      const accounts = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        accounts\n      });\n    };\n\n    this.openDrawer = (activity = null) => {\n      if (activity) {\n        // editing existing row\n        this.setState({\n          showDrawer: true,\n          editingId: activity.id,\n          formData: { ...activity\n          }\n        });\n      } else {\n        // new row\n        this.setState({\n          showDrawer: true,\n          editingId: null,\n          formData: {\n            date: new Date().toISOString().split(\"T\")[0],\n            acname: \"\",\n            contact: \"\",\n            phone: \"\",\n            email: \"\",\n            source: \"\",\n            remarks: \"\"\n          }\n        });\n      }\n    };\n\n    this.closeDrawer = () => {\n      this.setState({\n        showDrawer: false,\n        editingId: null\n      });\n    };\n\n    this.handleChange = (field, value) => {\n      let updated = { ...this.state.formData,\n        [field]: value\n      };\n\n      if (field === \"acname\") {\n        const acc = this.state.accounts.find(a => a.acname === value);\n        let contactOptions = [];\n\n        if (acc) {\n          if (acc.contact) {\n            contactOptions.push({\n              name: acc.contact,\n              phone: acc.phone || \"\",\n              email: acc.email || \"\"\n            });\n          }\n\n          if (acc.contactPersons && acc.contactPersons.length > 0) {\n            contactOptions = contactOptions.concat(acc.contactPersons);\n          }\n        }\n\n        updated.contact = \"\";\n        updated.phone = \"\";\n        updated.email = \"\";\n        this.setState({\n          contactOptions\n        });\n      }\n\n      if (field === \"contact\") {\n        const cp = this.state.contactOptions.find(c => c.name === value);\n\n        if (cp) {\n          updated.phone = cp.phone || \"\";\n          updated.email = cp.email || \"\";\n        }\n      }\n\n      if (field === \"remarks\" && value.length > 500) return;\n      this.setState({\n        formData: updated\n      });\n    };\n\n    this.saveActivity = async () => {\n      const {\n        formData,\n        editingId\n      } = this.state;\n\n      if (editingId) {// update existing → replace with updateDoc\n        // await updateDoc(doc(db, \"activities\", editingId), formData);\n      } else {\n        await addDoc(collection(db, \"activities\"), formData);\n      }\n\n      this.closeDrawer();\n      this.fetchActivities();\n    };\n\n    this.deleteRow = async id => {\n      await deleteDoc(doc(db, \"activities\", id));\n      this.fetchActivities();\n    };\n  }\n\n  componentDidMount() {\n    this.fetchActivities();\n    this.fetchAccounts();\n  }\n\n  render() {\n    const {\n      activities,\n      accounts,\n      showDrawer,\n      formData,\n      contactOptions\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"p-3 shadow-sm bg-white border-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"mb-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, \"Activities\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: () => this.openDrawer(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 13\n      }\n    }, \"+ Add Activity\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      bordered: true,\n      hover: true,\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 19\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, \"Account\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    }, \"Contact\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 19\n      }\n    }, \"Phone\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }, \"Source\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 19\n      }\n    }, \"Remarks\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 19\n      }\n    }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 15\n      }\n    }, activities.map(act => /*#__PURE__*/React.createElement(\"tr\", {\n      key: act.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, act.date), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, act.acname), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, act.contact), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, act.phone), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, act.email), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, act.source), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        maxWidth: \"300px\",\n        whiteSpace: \"pre-wrap\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, act.remarks), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"secondary\",\n      onClick: () => this.openDrawer(act),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 23\n      }\n    }, \"Edit\"), \" \", /*#__PURE__*/React.createElement(Button, {\n      size: \"sm\",\n      variant: \"danger\",\n      onClick: () => this.deleteRow(act.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 23\n      }\n    }, \"Delete\")))))))), /*#__PURE__*/React.createElement(Offcanvas, {\n      show: showDrawer,\n      onHide: this.closeDrawer,\n      placement: \"end\",\n      style: {\n        width: \"500px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Offcanvas.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Offcanvas.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, this.state.editingId ? \"Edit Activity\" : \"Add Activity\")), /*#__PURE__*/React.createElement(Offcanvas.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"date\",\n      value: formData.date,\n      onChange: e => this.handleChange(\"date\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }, \"Account\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: formData.acname,\n      onChange: e => this.handleChange(\"acname\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    }, \"Select Account\"), accounts.map(acc => /*#__PURE__*/React.createElement(\"option\", {\n      key: acc.id,\n      value: acc.acname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }, acc.acname)))), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }, \"Contact\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: formData.contact,\n      onChange: e => this.handleChange(\"contact\", e.target.value),\n      disabled: !formData.acname,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 19\n      }\n    }, \"Select Contact\"), contactOptions.map((cp, i) => /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: cp.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 21\n      }\n    }, cp.name)))), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, \"Phone\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      value: formData.phone,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      value: formData.email,\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, \"Source\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"select\",\n      value: formData.source,\n      onChange: e => this.handleChange(\"source\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 19\n      }\n    }, \"Select Source\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Call\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 19\n      }\n    }, \"Call\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Meeting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 19\n      }\n    }, \"Meeting\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Demo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 19\n      }\n    }, \"Demo\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Mail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 19\n      }\n    }, \"Mail\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Whatsapp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 19\n      }\n    }, \"Whatsapp\"))), /*#__PURE__*/React.createElement(Form.Group, {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }\n    }, \"Remarks (max 500)\"), /*#__PURE__*/React.createElement(Form.Control, {\n      as: \"textarea\",\n      rows: 4,\n      value: formData.remarks,\n      onChange: e => this.handleChange(\"remarks\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }\n    }, formData.remarks.length, \"/500\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.closeDrawer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }\n    }, \"Cancel\"), \" \", /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.saveActivity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }\n    }, \"Save\"))))));\n  }\n\n}\n\nexport default Activity;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/crm/Activity.js"],"names":["React","Component","Table","Button","Card","Offcanvas","Form","db","collection","getDocs","addDoc","deleteDoc","doc","Activity","state","activities","accounts","showDrawer","editingId","formData","date","Date","toISOString","split","acname","contact","phone","email","source","remarks","contactOptions","fetchActivities","snap","docs","map","id","data","setState","fetchAccounts","openDrawer","activity","closeDrawer","handleChange","field","value","updated","acc","find","a","push","name","contactPersons","length","concat","cp","c","saveActivity","deleteRow","componentDidMount","render","act","maxWidth","whiteSpace","width","e","target","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Table, Button, Card, Offcanvas, Form } from \"react-bootstrap\";\r\nimport { db } from \"../../firebase\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  deleteDoc,\r\n  doc,\r\n} from \"firebase/firestore\";\r\n\r\nclass Activity extends Component {\r\n  state = {\r\n    activities: [],\r\n    accounts: [],\r\n    showDrawer: false,\r\n    editingId: null,\r\n    formData: {\r\n      date: new Date().toISOString().split(\"T\")[0],\r\n      acname: \"\",\r\n      contact: \"\",\r\n      phone: \"\",\r\n      email: \"\",\r\n      source: \"\",\r\n      remarks: \"\",\r\n    },\r\n    contactOptions: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.fetchActivities();\r\n    this.fetchAccounts();\r\n  }\r\n\r\n  fetchActivities = async () => {\r\n    const snap = await getDocs(collection(db, \"activities\"));\r\n    const activities = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ activities });\r\n  };\r\n\r\n  fetchAccounts = async () => {\r\n    const snap = await getDocs(collection(db, \"accounts\"));\r\n    const accounts = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ accounts });\r\n  };\r\n\r\n  openDrawer = (activity = null) => {\r\n    if (activity) {\r\n      // editing existing row\r\n      this.setState({\r\n        showDrawer: true,\r\n        editingId: activity.id,\r\n        formData: { ...activity },\r\n      });\r\n    } else {\r\n      // new row\r\n      this.setState({\r\n        showDrawer: true,\r\n        editingId: null,\r\n        formData: {\r\n          date: new Date().toISOString().split(\"T\")[0],\r\n          acname: \"\",\r\n          contact: \"\",\r\n          phone: \"\",\r\n          email: \"\",\r\n          source: \"\",\r\n          remarks: \"\",\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  closeDrawer = () => {\r\n    this.setState({ showDrawer: false, editingId: null });\r\n  };\r\n\r\n  handleChange = (field, value) => {\r\n    let updated = { ...this.state.formData, [field]: value };\r\n\r\n    if (field === \"acname\") {\r\n      const acc = this.state.accounts.find((a) => a.acname === value);\r\n      let contactOptions = [];\r\n      if (acc) {\r\n        if (acc.contact) {\r\n          contactOptions.push({\r\n            name: acc.contact,\r\n            phone: acc.phone || \"\",\r\n            email: acc.email || \"\",\r\n          });\r\n        }\r\n        if (acc.contactPersons && acc.contactPersons.length > 0) {\r\n          contactOptions = contactOptions.concat(acc.contactPersons);\r\n        }\r\n      }\r\n      updated.contact = \"\";\r\n      updated.phone = \"\";\r\n      updated.email = \"\";\r\n      this.setState({ contactOptions });\r\n    }\r\n\r\n    if (field === \"contact\") {\r\n      const cp = this.state.contactOptions.find((c) => c.name === value);\r\n      if (cp) {\r\n        updated.phone = cp.phone || \"\";\r\n        updated.email = cp.email || \"\";\r\n      }\r\n    }\r\n\r\n    if (field === \"remarks\" && value.length > 500) return;\r\n\r\n    this.setState({ formData: updated });\r\n  };\r\n\r\n  saveActivity = async () => {\r\n    const { formData, editingId } = this.state;\r\n\r\n    if (editingId) {\r\n      // update existing → replace with updateDoc\r\n      // await updateDoc(doc(db, \"activities\", editingId), formData);\r\n    } else {\r\n      await addDoc(collection(db, \"activities\"), formData);\r\n    }\r\n\r\n    this.closeDrawer();\r\n    this.fetchActivities();\r\n  };\r\n\r\n  deleteRow = async (id) => {\r\n    await deleteDoc(doc(db, \"activities\", id));\r\n    this.fetchActivities();\r\n  };\r\n\r\n  render() {\r\n    const { activities, accounts, showDrawer, formData, contactOptions } =\r\n      this.state;\r\n\r\n    return (\r\n      <div className=\"container-fluid mt-4\">\r\n        <Card className=\"p-3 shadow-sm bg-white border-0\">\r\n          <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n            <h3 className=\"mb-0\">Activities</h3>\r\n            <Button variant=\"primary\" onClick={() => this.openDrawer()}>\r\n              + Add Activity\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"table-responsive\">\r\n            <Table bordered hover className=\"w-100\">\r\n              <thead className=\"thead-light\">\r\n                <tr>\r\n                  <th>Date</th>\r\n                  <th>Account</th>\r\n                  <th>Contact</th>\r\n                  <th>Phone</th>\r\n                  <th>Email</th>\r\n                  <th>Source</th>\r\n                  <th>Remarks</th>\r\n                  <th>Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {activities.map((act) => (\r\n                  <tr key={act.id}>\r\n                    <td>{act.date}</td>\r\n                    <td>{act.acname}</td>\r\n                    <td>{act.contact}</td>\r\n                    <td>{act.phone}</td>\r\n                    <td>{act.email}</td>\r\n                    <td>{act.source}</td>\r\n                    <td style={{ maxWidth: \"300px\", whiteSpace: \"pre-wrap\" }}>\r\n                      {act.remarks}\r\n                    </td>\r\n                    <td>\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"secondary\"\r\n                        onClick={() => this.openDrawer(act)}\r\n                      >\r\n                        Edit\r\n                      </Button>{\" \"}\r\n                      <Button\r\n                        size=\"sm\"\r\n                        variant=\"danger\"\r\n                        onClick={() => this.deleteRow(act.id)}\r\n                      >\r\n                        Delete\r\n                      </Button>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </Table>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Side Drawer */}\r\n        <Offcanvas\r\n          show={showDrawer}\r\n          onHide={this.closeDrawer}\r\n          placement=\"end\"\r\n          style={{ width: \"500px\" }}\r\n        >\r\n          <Offcanvas.Header closeButton>\r\n            <Offcanvas.Title>\r\n              {this.state.editingId ? \"Edit Activity\" : \"Add Activity\"}\r\n            </Offcanvas.Title>\r\n          </Offcanvas.Header>\r\n          <Offcanvas.Body>\r\n            <Form>\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Date</Form.Label>\r\n                <Form.Control\r\n                  type=\"date\"\r\n                  value={formData.date}\r\n                  onChange={(e) => this.handleChange(\"date\", e.target.value)}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Account</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  value={formData.acname}\r\n                  onChange={(e) => this.handleChange(\"acname\", e.target.value)}\r\n                >\r\n                  <option value=\"\">Select Account</option>\r\n                  {accounts.map((acc) => (\r\n                    <option key={acc.id} value={acc.acname}>\r\n                      {acc.acname}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Contact</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  value={formData.contact}\r\n                  onChange={(e) => this.handleChange(\"contact\", e.target.value)}\r\n                  disabled={!formData.acname}\r\n                >\r\n                  <option value=\"\">Select Contact</option>\r\n                  {contactOptions.map((cp, i) => (\r\n                    <option key={i} value={cp.name}>\r\n                      {cp.name}\r\n                    </option>\r\n                  ))}\r\n                </Form.Control>\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Phone</Form.Label>\r\n                <Form.Control type=\"text\" value={formData.phone} disabled />\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Email</Form.Label>\r\n                <Form.Control type=\"text\" value={formData.email} disabled />\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Source</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  value={formData.source}\r\n                  onChange={(e) => this.handleChange(\"source\", e.target.value)}\r\n                >\r\n                  <option value=\"\">Select Source</option>\r\n                  <option value=\"Call\">Call</option>\r\n                  <option value=\"Meeting\">Meeting</option>\r\n                  <option value=\"Demo\">Demo</option>\r\n                  <option value=\"Mail\">Mail</option>\r\n                  <option value=\"Whatsapp\">Whatsapp</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Label>Remarks (max 500)</Form.Label>\r\n                <Form.Control\r\n                  as=\"textarea\"\r\n                  rows={4}\r\n                  value={formData.remarks}\r\n                  onChange={(e) => this.handleChange(\"remarks\", e.target.value)}\r\n                />\r\n                <small>{formData.remarks.length}/500</small>\r\n              </Form.Group>\r\n\r\n              <div className=\"d-flex justify-content-end\">\r\n                <Button variant=\"secondary\" onClick={this.closeDrawer}>\r\n                  Cancel\r\n                </Button>{\" \"}\r\n                <Button variant=\"primary\" onClick={this.saveActivity}>\r\n                  Save\r\n                </Button>\r\n              </div>\r\n            </Form>\r\n          </Offcanvas.Body>\r\n        </Offcanvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Activity;\r\n"]},"metadata":{},"sourceType":"module"}