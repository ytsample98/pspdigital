{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\panelone\\\\Quote.js\";\nimport React, { Component } from 'react';\nimport { Dropdown } from 'react-bootstrap';\nimport bsCustomFileInput from 'bs-custom-file-input';\nimport { db } from '../../firebase';\nimport { collection, getDocs, addDoc, doc, updateDoc } from 'firebase/firestore';\n\nclass Quote extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      activeTab: 'co',\n      quotes: [],\n      customers: [],\n      products: [],\n      showForm: false,\n      editingId: null,\n      overlayType: '',\n      overlaySearch: '',\n      productOverlayVisible: false,\n      productOverlaySearch: '',\n      selectedProductIds: [],\n      formData: {\n        quoteNo: '',\n        quoteDate: new Date().toISOString().split('T')[0],\n        quoteType: 'Standard',\n        customer: '',\n        status: 'Entered',\n        choose: 'Service',\n        refNo: '',\n        impExp: 'None',\n        currency: '',\n        conversionRate: '',\n        taxAmount: '',\n        quoteValue: '',\n        billTo: '',\n        shipTo: '',\n        despatchMode: 'By Air',\n        paymentTerms: '',\n        freightCharges: '',\n        taxPercent: '',\n        packingCharges: '',\n        lineItems: []\n      }\n    };\n    this.customerInputRef = React.createRef();\n\n    this.fetchQuotes = async () => {\n      const snap = await getDocs(collection(db, 'quotes'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        quotes: data\n      });\n    };\n\n    this.fetchCustomers = async () => {\n      const snap = await getDocs(collection(db, 'customers'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        customers: data\n      });\n    };\n\n    this.fetchProducts = async () => {\n      const snap = await getDocs(collection(db, 'products'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        products: data\n      });\n    };\n\n    this.handleChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }));\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      this.setState(prev => {\n        const lineItems = [...prev.formData.lineItems];\n        lineItems[idx][field] = value;\n\n        if (field === 'qty' || field === 'unitPrice') {\n          const qty = parseFloat(lineItems[idx].qty) || 1;\n          const unitPrice = parseFloat(lineItems[idx].unitPrice) || 0;\n          lineItems[idx].amount = qty * unitPrice;\n        }\n\n        return {\n          formData: { ...prev.formData,\n            lineItems\n          }\n        };\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        quotes\n      } = this.state;\n      if (!formData.customer) return alert(\"Customer is required\");\n      if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\n\n      if (editingId) {\n        await updateDoc(doc(db, 'quotes', editingId), formData);\n      } else {\n        formData.quoteNo = `QT${1000 + quotes.length}`;\n        await addDoc(collection(db, 'quotes'), formData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null\n      });\n      this.fetchQuotes();\n    };\n\n    this.handleEdit = quote => {\n      this.setState({\n        showForm: true,\n        editingId: quote.id,\n        formData: { ...quote\n        }\n      });\n    };\n\n    this.handleDelete = async id => {\n      await updateDoc(doc(db, 'quotes', id), {\n        deleted: true\n      });\n      this.fetchQuotes();\n    };\n\n    this.showOverlay = type => this.setState({\n      overlayType: type,\n      overlaySearch: ''\n    });\n\n    this.hideOverlay = () => this.setState({\n      overlayType: '',\n      overlaySearch: ''\n    });\n\n    this.selectOverlayValue = value => {\n      if (this.state.overlayType === 'customer') {\n        this.setState(prev => ({\n          formData: { ...prev.formData,\n            customer: value.name\n          },\n          overlayType: '',\n          overlaySearch: ''\n        }));\n      }\n    };\n\n    this.renderCustomerOverlay = () => {\n      const {\n        overlaySearch,\n        customers\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }\n      }, \"Select Customer\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search customer...\",\n        value: overlaySearch,\n        onChange: e => this.setState({\n          overlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 19\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, \"Short Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }\n      }, customers.filter(c => (c.name || '').toLowerCase().includes((overlaySearch || '').toLowerCase())).map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: c.id || i,\n        onClick: () => this.selectOverlayValue(c),\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 23\n        }\n      }, c.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 23\n        }\n      }, c.code), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 23\n        }\n      }, c.shortName))), customers.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"3\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }\n      }, \"No records found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderProductOverlay = () => {\n      const {\n        products,\n        productOverlaySearch,\n        selectedProductIds\n      } = this.state;\n      const filtered = products.filter(p => (p.name || '').toLowerCase().includes(productOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, \"Select Products\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search products...\",\n        value: productOverlaySearch,\n        onChange: e => this.setState({\n          productOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 19\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 19\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 19\n        }\n      }, \"Unit Price\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }\n      }, filtered.map(p => /*#__PURE__*/React.createElement(\"tr\", {\n        key: p.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selectedProductIds.includes(p.id),\n        onChange: e => {\n          const checked = e.target.checked;\n          this.setState(prev => ({\n            selectedProductIds: checked ? [...prev.selectedProductIds, p.id] : prev.selectedProductIds.filter(id => id !== p.id)\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }\n      }, p.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, p.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }\n      }, p.unitPrice)))))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success btn-sm mt-2\",\n        onClick: () => {\n          const selectedProducts = products.filter(p => this.state.selectedProductIds.includes(p.id));\n          this.setState(prev => ({\n            formData: { ...prev.formData,\n              lineItems: [...prev.formData.lineItems, ...selectedProducts.filter(p => !prev.formData.lineItems.some(item => item.id === p.id)).map(p => ({\n                id: p.id,\n                name: p.name,\n                uom: p.uom,\n                qty: 1,\n                unitPrice: p.unitPrice,\n                taxPercent: 0,\n                amount: p.unitPrice\n              }))]\n            },\n            productOverlayVisible: false,\n            selectedProductIds: []\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }\n      }, \"Add Selected\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary btn-sm mt-2 ml-2\",\n        onClick: () => this.setState({\n          productOverlayVisible: false,\n          selectedProductIds: []\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.showQuotePDF = quote => {\n      // For demo: open a new window with a printable HTML version\n      const win = window.open('', '_blank');\n      win.document.write(`\n      <html>\n      <head>\n        <title>Quote Preview</title>\n        <style>\n          body { font-family: Arial; padding: 24px; }\n          table { border-collapse: collapse; width: 100%; margin-top: 16px; }\n          th, td { border: 1px solid #ccc; padding: 8px; }\n        </style>\n      </head>\n      <body>\n        <h2>Quote No: ${quote.quoteNo}</h2>\n        <div><b>Customer:</b> ${quote.customer}</div>\n        <div><b>Date:</b> ${quote.quoteDate}</div>\n        <div><b>Reference:</b> ${quote.refNo}</div>\n        <h3>Line Items</h3>\n        <table>\n          <thead>\n            <tr>\n              <th>Name</th>\n              <th>UOM</th>\n              <th>Qty</th>\n              <th>Unit Price</th>\n              <th>Tax%</th>\n              <th>Amount</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${(quote.lineItems || []).map(item => `\n              <tr>\n                <td>${item.name}</td>\n                <td>${item.uom}</td>\n                <td>${item.qty}</td>\n                <td>${item.unitPrice}</td>\n                <td>${item.taxPercent}</td>\n                <td>${item.amount}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n      </body>\n      </html>\n    `);\n      win.document.close();\n    };\n\n    this.renderQuoteForm = () => {\n      const {\n        formData,\n        overlayType,\n        productOverlayVisible\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card mt-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }\n      }, \"Quote Form\"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        autoComplete: \"off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 17\n        }\n      }, \"Quote No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.quoteNo || 'Auto',\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 17\n        }\n      }, \"Quote Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        type: \"date\",\n        value: formData.quoteDate,\n        onChange: e => this.handleChange('quoteDate', e.target.value),\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 17\n        }\n      }, \"Quote Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.quoteType,\n        onChange: e => this.handleChange('quoteType', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 19\n        }\n      }, \"Standard\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 19\n        }\n      }, \"Custom\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 17\n        }\n      }, \"Customer\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group input-group-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: formData.customer,\n        readOnly: true,\n        ref: this.customerInputRef,\n        onClick: () => this.showOverlay('customer'),\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-outline-secondary btn-sm\",\n        type: \"button\",\n        tabIndex: -1,\n        style: {\n          borderColor: '#ced4da',\n          background: '#f8f9fa'\n        },\n        onClick: () => this.showOverlay('customer'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"mdi mdi-magnify\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 23\n        }\n      })))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 17\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.status,\n        onChange: e => this.handleChange('status', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 19\n        }\n      }, \"Entered\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 19\n        }\n      }, \"Approved\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 19\n        }\n      }, \"Rejected\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 17\n        }\n      }, \"Choose\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.choose,\n        onChange: e => this.handleChange('choose', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 19\n        }\n      }, \"Service\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 19\n        }\n      }, \"Product\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 17\n        }\n      }, \"Reference No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.refNo,\n        onChange: e => this.handleChange('refNo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 17\n        }\n      }, \"Import/Export\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.impExp,\n        onChange: e => this.handleChange('impExp', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 19\n        }\n      }, \"None\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 19\n        }\n      }, \"Import\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 19\n        }\n      }, \"Export\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 17\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.currency,\n        onChange: e => this.handleChange('currency', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 17\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.conversionRate,\n        onChange: e => this.handleChange('conversionRate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 17\n        }\n      }, \"Tax Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.taxAmount,\n        onChange: e => this.handleChange('taxAmount', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 17\n        }\n      }, \"Quote Value\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.quoteValue,\n        onChange: e => this.handleChange('quoteValue', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 17\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.billTo,\n        onChange: e => this.handleChange('billTo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 17\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.shipTo,\n        onChange: e => this.handleChange('shipTo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 17\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.despatchMode,\n        onChange: e => this.handleChange('despatchMode', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 19\n        }\n      }, \"By Air\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 19\n        }\n      }, \"By Sea\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 19\n        }\n      }, \"By Road\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 17\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.paymentTerms,\n        onChange: e => this.handleChange('paymentTerms', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 17\n        }\n      }, \"Freight Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.freightCharges,\n        onChange: e => this.handleChange('freightCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 17\n        }\n      }, \"Tax Percent\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.taxPercent,\n        onChange: e => this.handleChange('taxPercent', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 17\n        }\n      }, \"Packing Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control form-control-sm\",\n        value: formData.packingCharges,\n        onChange: e => this.handleChange('packingCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card shadow mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"card-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 17\n        }\n      }, \"Line Items\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm mb-2\",\n        onClick: () => this.setState({\n          productOverlayVisible: true\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 17\n        }\n      }, \"+ Add Product\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 25\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 25\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 25\n        }\n      }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 25\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 25\n        }\n      }, \"Tax%\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 25\n        }\n      }, \"Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 25\n        }\n      }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 486,\n          columnNumber: 21\n        }\n      }, formData.lineItems.map((item, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 27\n        }\n      }, item.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 27\n        }\n      }, item.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        min: \"1\",\n        value: item.qty,\n        onChange: e => this.handleLineItemChange(idx, 'qty', e.target.value),\n        style: {\n          width: 60\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        value: item.unitPrice,\n        onChange: e => this.handleLineItemChange(idx, 'unitPrice', e.target.value),\n        style: {\n          width: 80\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        value: item.taxPercent,\n        onChange: e => this.handleLineItemChange(idx, 'taxPercent', e.target.value),\n        style: {\n          width: 60\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 27\n        }\n      }, item.amount), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger btn-sm\",\n        onClick: () => {\n          this.setState(prev => ({\n            formData: { ...prev.formData,\n              lineItems: prev.formData.lineItems.filter((_, i) => i !== idx)\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 29\n        }\n      }, \"Remove\")))), formData.lineItems.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"7\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 27\n        }\n      }, \"No items\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success btn-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 15\n        }\n      }, \"Save\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 15\n        }\n      }, \"Cancel\")), overlayType === 'customer' && this.renderCustomerOverlay(), productOverlayVisible && this.renderProductOverlay())));\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 11\n      }\n    }, \"Quotes\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary btn-sm\",\n      onClick: () => this.setState({\n        showForm: true,\n        editingId: null,\n        formData: { ...this.state.formData,\n          quoteNo: '',\n          lineItems: []\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 11\n      }\n    }, \"+ Add Quote\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"custom-table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 17\n      }\n    }, \"Quote No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 17\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 17\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 17\n      }\n    }, \"Quote Value\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 17\n      }\n    }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 13\n      }\n    }, this.state.quotes.filter(q => !q.deleted).map((q, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: q.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 19\n      }\n    }, q.quoteNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 19\n      }\n    }, q.customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 19\n      }\n    }, q.quoteDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 19\n      }\n    }, q.status), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 19\n      }\n    }, q.quoteValue), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      variant: \"outline-primary\",\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 23\n      }\n    }, \"Action\"), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.handleEdit(q),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 25\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.handleDelete(q.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 25\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(Dropdown.Item, {\n      onClick: () => this.showQuotePDF(q),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 25\n      }\n    }, \"Show PDF\")))))), this.state.quotes.filter(q => !q.deleted).length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"6\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 21\n      }\n    }, \"No quotes found.\")))))));\n  }\n\n  componentDidMount() {\n    bsCustomFileInput.init();\n    this.fetchQuotes();\n    this.fetchCustomers();\n    this.fetchProducts(); // Prefill from prospect if navigated\n\n    const params = new URLSearchParams(window.location.search);\n    const org = params.get('org');\n    const client = params.get('client');\n    const prospect = params.get('prospect');\n\n    if (org || client || prospect) {\n      this.setState(prev => ({\n        showForm: true,\n        formData: { ...prev.formData,\n          customer: org || '',\n          refNo: prospect || ''\n        }\n      }), () => {\n        if (this.customerInputRef.current) {\n          this.customerInputRef.current.value = org || '';\n        }\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 7\n      }\n    }, this.state.showForm ? this.renderQuoteForm() : this.renderTable());\n  }\n\n}\n\nexport default Quote;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/panelone/Quote.js"],"names":["React","Component","Dropdown","bsCustomFileInput","db","collection","getDocs","addDoc","doc","updateDoc","Quote","state","activeTab","quotes","customers","products","showForm","editingId","overlayType","overlaySearch","productOverlayVisible","productOverlaySearch","selectedProductIds","formData","quoteNo","quoteDate","Date","toISOString","split","quoteType","customer","status","choose","refNo","impExp","currency","conversionRate","taxAmount","quoteValue","billTo","shipTo","despatchMode","paymentTerms","freightCharges","taxPercent","packingCharges","lineItems","customerInputRef","createRef","fetchQuotes","snap","data","docs","map","id","setState","fetchCustomers","fetchProducts","handleChange","field","value","prev","handleLineItemChange","idx","qty","parseFloat","unitPrice","amount","handleSubmit","e","preventDefault","alert","length","handleEdit","quote","handleDelete","deleted","showOverlay","type","hideOverlay","selectOverlayValue","name","renderCustomerOverlay","target","maxHeight","overflowY","filter","c","toLowerCase","includes","i","cursor","code","shortName","renderProductOverlay","filtered","p","checked","uom","selectedProducts","some","item","showQuotePDF","win","window","open","document","write","join","close","renderQuoteForm","borderColor","background","width","_","renderTable","q","componentDidMount","init","params","URLSearchParams","location","search","org","get","client","prospect","current","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Dropdown } from 'react-bootstrap';\r\nimport bsCustomFileInput from 'bs-custom-file-input';\r\nimport { db } from '../../firebase';\r\nimport { collection, getDocs, addDoc, doc, updateDoc } from 'firebase/firestore';\r\n\r\nclass Quote extends Component {\r\n  state = {\r\n    activeTab: 'co',\r\n    quotes: [],\r\n    customers: [],\r\n    products: [],\r\n    showForm: false,\r\n    editingId: null,\r\n    overlayType: '',\r\n    overlaySearch: '',\r\n    productOverlayVisible: false,\r\n    productOverlaySearch: '',\r\n    selectedProductIds: [],\r\n    formData: {\r\n      quoteNo: '',\r\n      quoteDate: new Date().toISOString().split('T')[0],\r\n      quoteType: 'Standard',\r\n      customer: '',\r\n      status: 'Entered',\r\n      choose: 'Service',\r\n      refNo: '',\r\n      impExp: 'None',\r\n      currency: '',\r\n      conversionRate: '',\r\n      taxAmount: '',\r\n      quoteValue: '',\r\n      billTo: '',\r\n      shipTo: '',\r\n      despatchMode: 'By Air',\r\n      paymentTerms: '',\r\n      freightCharges: '',\r\n      taxPercent: '',\r\n      packingCharges: '',\r\n      lineItems: [],\r\n    }\r\n  };\r\n  customerInputRef = React.createRef();\r\n\r\n  componentDidMount() {\r\n    bsCustomFileInput.init();\r\n    this.fetchQuotes();\r\n    this.fetchCustomers();\r\n    this.fetchProducts();\r\n\r\n    // Prefill from prospect if navigated\r\n    const params = new URLSearchParams(window.location.search);\r\n    const org = params.get('org');\r\n    const client = params.get('client');\r\n    const prospect = params.get('prospect');\r\n    if (org || client || prospect) {\r\n      this.setState(prev => ({\r\n        showForm: true,\r\n        formData: {\r\n          ...prev.formData,\r\n          customer: org || '',\r\n          refNo: prospect || '',\r\n        }\r\n      }), () => {\r\n        if (this.customerInputRef.current) {\r\n          this.customerInputRef.current.value = org || '';\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  fetchQuotes = async () => {\r\n    const snap = await getDocs(collection(db, 'quotes'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ quotes: data });\r\n  };\r\n\r\n  fetchCustomers = async () => {\r\n    const snap = await getDocs(collection(db, 'customers'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ customers: data });\r\n  };\r\n\r\n  fetchProducts = async () => {\r\n    const snap = await getDocs(collection(db, 'products'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ products: data });\r\n  };\r\n\r\n  handleChange = (field, value) => {\r\n    this.setState(prev => ({\r\n      formData: { ...prev.formData, [field]: value }\r\n    }));\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    this.setState(prev => {\r\n      const lineItems = [...prev.formData.lineItems];\r\n      lineItems[idx][field] = value;\r\n      if (field === 'qty' || field === 'unitPrice') {\r\n        const qty = parseFloat(lineItems[idx].qty) || 1;\r\n        const unitPrice = parseFloat(lineItems[idx].unitPrice) || 0;\r\n        lineItems[idx].amount = qty * unitPrice;\r\n      }\r\n      return { formData: { ...prev.formData, lineItems } };\r\n    });\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { editingId, formData, quotes } = this.state;\r\n    if (!formData.customer) return alert(\"Customer is required\");\r\n    if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\r\n\r\n    if (editingId) {\r\n      await updateDoc(doc(db, 'quotes', editingId), formData);\r\n    } else {\r\n      formData.quoteNo = `QT${1000 + quotes.length}`;\r\n      await addDoc(collection(db, 'quotes'), formData);\r\n    }\r\n    this.setState({ showForm: false, editingId: null });\r\n    this.fetchQuotes();\r\n  };\r\n\r\n  handleEdit = (quote) => {\r\n    this.setState({\r\n      showForm: true,\r\n      editingId: quote.id,\r\n      formData: { ...quote }\r\n    });\r\n  };\r\n\r\n  handleDelete = async (id) => {\r\n    await updateDoc(doc(db, 'quotes', id), { deleted: true });\r\n    this.fetchQuotes();\r\n  };\r\n\r\n  showOverlay = (type) => this.setState({ overlayType: type, overlaySearch: '' });\r\n  hideOverlay = () => this.setState({ overlayType: '', overlaySearch: '' });\r\n\r\n  selectOverlayValue = (value) => {\r\n    if (this.state.overlayType === 'customer') {\r\n      this.setState(prev => ({\r\n        formData: {\r\n          ...prev.formData,\r\n          customer: value.name\r\n        },\r\n        overlayType: '',\r\n        overlaySearch: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  renderCustomerOverlay = () => {\r\n    const { overlaySearch, customers } = this.state;\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Customer</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search customer...\"\r\n            value={overlaySearch}\r\n            onChange={e => this.setState({ overlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Name</th>\r\n                  <th>Code</th>\r\n                  <th>Short Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {customers\r\n                  .filter(c =>\r\n                    (c.name || '').toLowerCase().includes((overlaySearch || '').toLowerCase())\r\n                  )\r\n                  .map((c, i) => (\r\n                    <tr key={c.id || i} onClick={() => this.selectOverlayValue(c)} style={{ cursor: 'pointer' }}>\r\n                      <td>{c.name}</td>\r\n                      <td>{c.code}</td>\r\n                      <td>{c.shortName}</td>\r\n                    </tr>\r\n                  ))}\r\n                {customers.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan=\"3\" className=\"text-center\">No records found</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideOverlay}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderProductOverlay = () => {\r\n    const { products, productOverlaySearch, selectedProductIds } = this.state;\r\n    const filtered = products.filter(p =>\r\n      (p.name || '').toLowerCase().includes(productOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Products</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search products...\"\r\n            value={productOverlaySearch}\r\n            onChange={e => this.setState({ productOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th></th>\r\n                  <th>Name</th>\r\n                  <th>UOM</th>\r\n                  <th>Unit Price</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map(p => (\r\n                  <tr key={p.id}>\r\n                    <td>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedProductIds.includes(p.id)}\r\n                        onChange={e => {\r\n                          const checked = e.target.checked;\r\n                          this.setState(prev => ({\r\n                            selectedProductIds: checked\r\n                              ? [...prev.selectedProductIds, p.id]\r\n                              : prev.selectedProductIds.filter(id => id !== p.id)\r\n                          }));\r\n                        }}\r\n                      />\r\n                    </td>\r\n                    <td>{p.name}</td>\r\n                    <td>{p.uom}</td>\r\n                    <td>{p.unitPrice}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button\r\n            className=\"btn btn-success btn-sm mt-2\"\r\n            onClick={() => {\r\n              const selectedProducts = products.filter(p => this.state.selectedProductIds.includes(p.id));\r\n              this.setState(prev => ({\r\n                formData: {\r\n                  ...prev.formData,\r\n                  lineItems: [\r\n                    ...prev.formData.lineItems,\r\n                    ...selectedProducts\r\n                      .filter(p => !prev.formData.lineItems.some(item => item.id === p.id))\r\n                      .map(p => ({\r\n                        id: p.id,\r\n                        name: p.name,\r\n                        uom: p.uom,\r\n                        qty: 1,\r\n                        unitPrice: p.unitPrice,\r\n                        taxPercent: 0,\r\n                        amount: p.unitPrice\r\n                      }))\r\n                  ]\r\n                },\r\n                productOverlayVisible: false,\r\n                selectedProductIds: []\r\n              }));\r\n            }}\r\n          >Add Selected</button>\r\n          <button className=\"btn btn-secondary btn-sm mt-2 ml-2\" onClick={() => this.setState({ productOverlayVisible: false, selectedProductIds: [] })}>Cancel</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  showQuotePDF = (quote) => {\r\n    // For demo: open a new window with a printable HTML version\r\n    const win = window.open('', '_blank');\r\n    win.document.write(`\r\n      <html>\r\n      <head>\r\n        <title>Quote Preview</title>\r\n        <style>\r\n          body { font-family: Arial; padding: 24px; }\r\n          table { border-collapse: collapse; width: 100%; margin-top: 16px; }\r\n          th, td { border: 1px solid #ccc; padding: 8px; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <h2>Quote No: ${quote.quoteNo}</h2>\r\n        <div><b>Customer:</b> ${quote.customer}</div>\r\n        <div><b>Date:</b> ${quote.quoteDate}</div>\r\n        <div><b>Reference:</b> ${quote.refNo}</div>\r\n        <h3>Line Items</h3>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>UOM</th>\r\n              <th>Qty</th>\r\n              <th>Unit Price</th>\r\n              <th>Tax%</th>\r\n              <th>Amount</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            ${(quote.lineItems || []).map(item => `\r\n              <tr>\r\n                <td>${item.name}</td>\r\n                <td>${item.uom}</td>\r\n                <td>${item.qty}</td>\r\n                <td>${item.unitPrice}</td>\r\n                <td>${item.taxPercent}</td>\r\n                <td>${item.amount}</td>\r\n              </tr>\r\n            `).join('')}\r\n          </tbody>\r\n        </table>\r\n      </body>\r\n      </html>\r\n    `);\r\n    win.document.close();\r\n  };\r\n\r\n  renderQuoteForm = () => {\r\n    const { formData, overlayType, productOverlayVisible } = this.state;\r\n    return (\r\n      <div className=\"card mt-4\">\r\n        <div className=\"card-body\">\r\n          <h4 className=\"card-title\">Quote Form</h4>\r\n          <form onSubmit={this.handleSubmit} autoComplete=\"off\">\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Quote No</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.quoteNo || 'Auto'} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Quote Date</label>\r\n                <input className=\"form-control form-control-sm\" type=\"date\" value={formData.quoteDate} onChange={e => this.handleChange('quoteDate', e.target.value)} required />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Quote Type</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.quoteType} onChange={e => this.handleChange('quoteType', e.target.value)}>\r\n                  <option>Standard</option>\r\n                  <option>Custom</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Customer</label>\r\n                <div className=\"input-group input-group-sm\">\r\n                  <input\r\n                    className=\"form-control\"\r\n                    value={formData.customer}\r\n                    readOnly\r\n                    ref={this.customerInputRef}\r\n                    onClick={() => this.showOverlay('customer')}\r\n                    required\r\n                  />\r\n                  <div className=\"input-group-append\">\r\n                    <button\r\n                      className=\"btn btn-outline-secondary btn-sm\"\r\n                      type=\"button\"\r\n                      tabIndex={-1}\r\n                      style={{ borderColor: '#ced4da', background: '#f8f9fa' }}\r\n                      onClick={() => this.showOverlay('customer')}\r\n                    >\r\n                      <i className=\"mdi mdi-magnify\"></i>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Status</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.status} onChange={e => this.handleChange('status', e.target.value)}>\r\n                  <option>Entered</option>\r\n                  <option>Approved</option>\r\n                  <option>Rejected</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Choose</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.choose} onChange={e => this.handleChange('choose', e.target.value)}>\r\n                  <option>Service</option>\r\n                  <option>Product</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Reference No</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.refNo} onChange={e => this.handleChange('refNo', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Import/Export</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.impExp} onChange={e => this.handleChange('impExp', e.target.value)}>\r\n                  <option>None</option>\r\n                  <option>Import</option>\r\n                  <option>Export</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Currency</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.currency} onChange={e => this.handleChange('currency', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Conversion Rate</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.conversionRate} onChange={e => this.handleChange('conversionRate', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Tax Amount</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.taxAmount} onChange={e => this.handleChange('taxAmount', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Quote Value</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.quoteValue} onChange={e => this.handleChange('quoteValue', e.target.value)} />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Bill To</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.billTo} onChange={e => this.handleChange('billTo', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Ship To</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.shipTo} onChange={e => this.handleChange('shipTo', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Despatch Mode</label>\r\n                <select className=\"form-control form-control-sm\" value={formData.despatchMode} onChange={e => this.handleChange('despatchMode', e.target.value)}>\r\n                  <option>By Air</option>\r\n                  <option>By Sea</option>\r\n                  <option>By Road</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Payment Terms</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.paymentTerms} onChange={e => this.handleChange('paymentTerms', e.target.value)} />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Freight Charges</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.freightCharges} onChange={e => this.handleChange('freightCharges', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Tax Percent</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.taxPercent} onChange={e => this.handleChange('taxPercent', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-3\">\r\n                <label>Packing Charges</label>\r\n                <input className=\"form-control form-control-sm\" value={formData.packingCharges} onChange={e => this.handleChange('packingCharges', e.target.value)} />\r\n              </div>\r\n            </div>\r\n            {/* Line Items */}\r\n            <div className=\"card shadow mt-3\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title\">Line Items</h4>\r\n                <button type=\"button\" className=\"btn btn-primary btn-sm mb-2\" onClick={() => this.setState({ productOverlayVisible: true })}>\r\n                  + Add Product\r\n                </button>\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-bordered\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Name</th>\r\n                        <th>UOM</th>\r\n                        <th>Qty</th>\r\n                        <th>Unit Price</th>\r\n                        <th>Tax%</th>\r\n                        <th>Amount</th>\r\n                        <th>Actions</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {formData.lineItems.map((item, idx) => (\r\n                        <tr key={item.id}>\r\n                          <td>{item.name}</td>\r\n                          <td>{item.uom}</td>\r\n                          <td>\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              value={item.qty}\r\n                              onChange={e => this.handleLineItemChange(idx, 'qty', e.target.value)}\r\n                              style={{ width: 60 }}\r\n                            />\r\n                          </td>\r\n                          <td>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={item.unitPrice}\r\n                              onChange={e => this.handleLineItemChange(idx, 'unitPrice', e.target.value)}\r\n                              style={{ width: 80 }}\r\n                            />\r\n                          </td>\r\n                          <td>\r\n                            <input\r\n                              type=\"number\"\r\n                              value={item.taxPercent}\r\n                              onChange={e => this.handleLineItemChange(idx, 'taxPercent', e.target.value)}\r\n                              style={{ width: 60 }}\r\n                            />\r\n                          </td>\r\n                          <td>{item.amount}</td>\r\n                          <td>\r\n                            <button\r\n                              type=\"button\"\r\n                              className=\"btn btn-danger btn-sm\"\r\n                              onClick={() => {\r\n                                this.setState(prev => ({\r\n                                  formData: {\r\n                                    ...prev.formData,\r\n                                    lineItems: prev.formData.lineItems.filter((_, i) => i !== idx)\r\n                                  }\r\n                                }));\r\n                              }}\r\n                            >Remove</button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                      {formData.lineItems.length === 0 && (\r\n                        <tr>\r\n                          <td colSpan=\"7\" className=\"text-center\">No items</td>\r\n                        </tr>\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex justify-content-between mt-3\">\r\n              <button type=\"submit\" className=\"btn btn-success btn-sm\">Save</button>\r\n              <button type=\"button\" className=\"btn btn-secondary btn-sm\" onClick={() => this.setState({ showForm: false, editingId: null })}>Cancel</button>\r\n            </div>\r\n            {overlayType === 'customer' && this.renderCustomerOverlay()}\r\n            {productOverlayVisible && this.renderProductOverlay()}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Quotes</h4>\r\n          <button className=\"btn btn-primary btn-sm\" onClick={() => this.setState({ showForm: true, editingId: null, formData: { ...this.state.formData, quoteNo: '', lineItems: [] } })}>+ Add Quote</button>\r\n        </div>\r\n        <div className=\"custom-table-responsive\">\r\n          <table className=\"table table-bordered table-sm\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Quote No</th>\r\n                <th>Customer</th>\r\n                <th>Date</th>\r\n                <th>Status</th>\r\n                <th>Quote Value</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.quotes.filter(q => !q.deleted).map((q, i) => (\r\n                <tr key={q.id}>\r\n                  <td>{q.quoteNo}</td>\r\n                  <td>{q.customer}</td>\r\n                  <td>{q.quoteDate}</td>\r\n                  <td>{q.status}</td>\r\n                  <td>{q.quoteValue}</td>\r\n                  <td>\r\n                    <Dropdown>\r\n                      <Dropdown.Toggle variant=\"outline-primary\" size=\"sm\">Action</Dropdown.Toggle>\r\n                      <Dropdown.Menu>\r\n                        <Dropdown.Item onClick={() => this.handleEdit(q)}>Edit</Dropdown.Item>\r\n                        <Dropdown.Item onClick={() => this.handleDelete(q.id)}>Delete</Dropdown.Item>\r\n                        <Dropdown.Item onClick={() => this.showQuotePDF(q)}>Show PDF</Dropdown.Item>\r\n                      </Dropdown.Menu>\r\n                    </Dropdown>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {this.state.quotes.filter(q => !q.deleted).length === 0 && (\r\n                <tr><td colSpan=\"6\" className=\"text-center\">No quotes found.</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showForm ? this.renderQuoteForm() : this.renderTable()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Quote;"]},"metadata":{},"sourceType":"module"}