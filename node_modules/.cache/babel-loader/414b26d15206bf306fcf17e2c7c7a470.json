{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\crm\\\\Datalist.js\";\nimport React, { Component } from \"react\";\nimport { Modal, Button, Table, Form } from \"react-bootstrap\";\nimport { db } from '../../firebase';\nimport countryList from \"react-select-country-list\";\nimport Select from \"react-select\";\n\nclass Datalist extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchAccounts = async () => {\n      const snapshot = await db.collection(\"accounts\").get();\n      const accounts = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        accounts\n      });\n    };\n\n    this.handleTableChange = (id, field, value) => {\n      const accounts = this.state.accounts.map(acc => acc.id === id ? { ...acc,\n        [field]: value\n      } : acc);\n      this.setState({\n        accounts\n      }, () => {\n        db.collection(\"accounts\").doc(id).set(accounts.find(a => a.id === id));\n      });\n    };\n\n    this.openModal = account => {\n      this.setState({\n        showModal: true,\n        selectedAccount: { ...account\n        },\n        contactPersons: account.contactPersons || []\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        showModal: false,\n        selectedAccount: null,\n        contactPersons: []\n      });\n    };\n\n    this.handleModalChange = (field, value) => {\n      this.setState({\n        selectedAccount: { ...this.state.selectedAccount,\n          [field]: value\n        }\n      });\n    };\n\n    this.handleContactPersonChange = (index, field, value) => {\n      const cps = [...this.state.contactPersons];\n      cps[index][field] = value;\n      this.setState({\n        contactPersons: cps\n      });\n    };\n\n    this.addContactPerson = () => {\n      this.setState({\n        contactPersons: [...this.state.contactPersons, {\n          name: \"\",\n          designation: \"\",\n          phone: \"\",\n          mail: \"\",\n          linkedin: \"\"\n        }]\n      });\n    };\n\n    this.saveModal = () => {\n      const updatedAcc = { ...this.state.selectedAccount,\n        contactPersons: this.state.contactPersons\n      };\n\n      if (updatedAcc.id) {\n        db.collection(\"accounts\").doc(updatedAcc.id).set(updatedAcc);\n      } else {\n        db.collection(\"accounts\").add(updatedAcc);\n      }\n\n      this.fetchAccounts();\n      this.closeModal();\n    };\n\n    this.state = {\n      accounts: [],\n      // table data\n      showModal: false,\n      selectedAccount: null,\n      contactPersons: [],\n      countries: countryList().getData()\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAccounts();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, \"Account Data List\"), /*#__PURE__*/React.createElement(Table, {\n      bordered: true,\n      hover: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, \"a/c No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    }, \"a/c Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, \"Contact\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, \"Country\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, \"State\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 15\n      }\n    }, \"City\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }, \"Website\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, \"Phone\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }, \"More\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, this.state.accounts.map(acc => /*#__PURE__*/React.createElement(\"tr\", {\n      key: acc.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 15\n      }\n    }, [\"acno\", \"acname\", \"contact\", \"country\", \"state\", \"city\", \"email\", \"website\", \"phone\"].map(field => /*#__PURE__*/React.createElement(\"td\", {\n      key: field,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      type: \"text\",\n      value: acc[field] || \"\",\n      onChange: e => this.handleTableChange(acc.id, field, e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      onClick: () => this.openModal(acc),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 19\n      }\n    }, \"More\")))))), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.showModal,\n      onHide: this.closeModal,\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, \"More Details\")), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }, this.state.selectedAccount && /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    }, \"a/c Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n      value: this.state.selectedAccount.acname || \"\",\n      onChange: e => this.handleModalChange(\"acname\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n      value: this.state.selectedAccount.email || \"\",\n      onChange: e => this.handleModalChange(\"email\", e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, \"Contact Persons\"), this.state.contactPersons.map((cp, i) => /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      className: \"mb-3 p-2 border rounded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Name\",\n      value: cp.name,\n      onChange: e => this.handleContactPersonChange(i, \"name\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Designation\",\n      value: cp.designation,\n      onChange: e => this.handleContactPersonChange(i, \"designation\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Phone\",\n      value: cp.phone,\n      onChange: e => this.handleContactPersonChange(i, \"phone\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"Mail\",\n      value: cp.mail,\n      onChange: e => this.handleContactPersonChange(i, \"mail\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Form.Control, {\n      placeholder: \"LinkedIn\",\n      value: cp.linkedin,\n      onChange: e => this.handleContactPersonChange(i, \"linkedin\", e.target.value),\n      className: \"mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.addContactPerson,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, \"+ Add Contact Person\"))), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.saveModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, \"Submit\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, \"Cancel\"))));\n  }\n\n}\n\nexport default Datalist;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/crm/Datalist.js"],"names":["React","Component","Modal","Button","Table","Form","db","countryList","Select","Datalist","constructor","props","fetchAccounts","snapshot","collection","get","accounts","docs","map","doc","id","data","setState","handleTableChange","field","value","state","acc","set","find","a","openModal","account","showModal","selectedAccount","contactPersons","closeModal","handleModalChange","handleContactPersonChange","index","cps","addContactPerson","name","designation","phone","mail","linkedin","saveModal","updatedAcc","add","countries","getData","componentDidMount","render","e","target","acname","email","cp","i"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Modal, Button, Table, Form } from \"react-bootstrap\";\r\nimport { db } from '../../firebase';\r\nimport countryList from \"react-select-country-list\";\r\nimport Select from \"react-select\";\r\n\r\n\r\n\r\nclass Datalist extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      accounts: [], // table data\r\n      showModal: false,\r\n      selectedAccount: null,\r\n      contactPersons: [],\r\n      countries: countryList().getData(),\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchAccounts();\r\n  }\r\n\r\n  fetchAccounts = async () => {\r\n    const snapshot = await db.collection(\"accounts\").get();\r\n    const accounts = snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ accounts });\r\n  };\r\n\r\n  handleTableChange = (id, field, value) => {\r\n    const accounts = this.state.accounts.map((acc) =>\r\n      acc.id === id ? { ...acc, [field]: value } : acc\r\n    );\r\n    this.setState({ accounts }, () => {\r\n      db.collection(\"accounts\").doc(id).set(accounts.find((a) => a.id === id));\r\n    });\r\n  };\r\n\r\n  openModal = (account) => {\r\n    this.setState({\r\n      showModal: true,\r\n      selectedAccount: { ...account },\r\n      contactPersons: account.contactPersons || [],\r\n    });\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ showModal: false, selectedAccount: null, contactPersons: [] });\r\n  };\r\n\r\n  handleModalChange = (field, value) => {\r\n    this.setState({\r\n      selectedAccount: { ...this.state.selectedAccount, [field]: value },\r\n    });\r\n  };\r\n\r\n  handleContactPersonChange = (index, field, value) => {\r\n    const cps = [...this.state.contactPersons];\r\n    cps[index][field] = value;\r\n    this.setState({ contactPersons: cps });\r\n  };\r\n\r\n  addContactPerson = () => {\r\n    this.setState({\r\n      contactPersons: [\r\n        ...this.state.contactPersons,\r\n        { name: \"\", designation: \"\", phone: \"\", mail: \"\", linkedin: \"\" },\r\n      ],\r\n    });\r\n  };\r\n\r\n  saveModal = () => {\r\n    const updatedAcc = {\r\n      ...this.state.selectedAccount,\r\n      contactPersons: this.state.contactPersons,\r\n    };\r\n    if (updatedAcc.id) {\r\n      db.collection(\"accounts\").doc(updatedAcc.id).set(updatedAcc);\r\n    } else {\r\n      db.collection(\"accounts\").add(updatedAcc);\r\n    }\r\n    this.fetchAccounts();\r\n    this.closeModal();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container mt-4\">\r\n        <h3>Account Data List</h3>\r\n        <Table bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>a/c No</th>\r\n              <th>a/c Name</th>\r\n              <th>Contact</th>\r\n              <th>Country</th>\r\n              <th>State</th>\r\n              <th>City</th>\r\n              <th>Email</th>\r\n              <th>Website</th>\r\n              <th>Phone</th>\r\n              <th>More</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.accounts.map((acc) => (\r\n              <tr key={acc.id}>\r\n                {[\"acno\", \"acname\", \"contact\", \"country\", \"state\", \"city\", \"email\", \"website\", \"phone\"].map(\r\n                  (field) => (\r\n                    <td key={field}>\r\n                      <Form.Control\r\n                        type=\"text\"\r\n                        value={acc[field] || \"\"}\r\n                        onChange={(e) => this.handleTableChange(acc.id, field, e.target.value)}\r\n                      />\r\n                    </td>\r\n                  )\r\n                )}\r\n                <td>\r\n                  <Button variant=\"info\" size=\"sm\" onClick={() => this.openModal(acc)}>\r\n                    More\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n\r\n        {/* Modal for More fields */}\r\n        <Modal show={this.state.showModal} onHide={this.closeModal} size=\"lg\">\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>More Details</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            {this.state.selectedAccount && (\r\n              <Form>\r\n                <Form.Group>\r\n                  <Form.Label>a/c Name</Form.Label>\r\n                  <Form.Control\r\n                    value={this.state.selectedAccount.acname || \"\"}\r\n                    onChange={(e) => this.handleModalChange(\"acname\", e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group>\r\n                  <Form.Label>Email</Form.Label>\r\n                  <Form.Control\r\n                    value={this.state.selectedAccount.email || \"\"}\r\n                    onChange={(e) => this.handleModalChange(\"email\", e.target.value)}\r\n                  />\r\n                </Form.Group>\r\n                <hr />\r\n                <h5>Contact Persons</h5>\r\n                {this.state.contactPersons.map((cp, i) => (\r\n                  <div key={i} className=\"mb-3 p-2 border rounded\">\r\n                    <Form.Control\r\n                      placeholder=\"Name\"\r\n                      value={cp.name}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"name\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"Designation\"\r\n                      value={cp.designation}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"designation\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"Phone\"\r\n                      value={cp.phone}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"phone\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"Mail\"\r\n                      value={cp.mail}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"mail\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                    <Form.Control\r\n                      placeholder=\"LinkedIn\"\r\n                      value={cp.linkedin}\r\n                      onChange={(e) => this.handleContactPersonChange(i, \"linkedin\", e.target.value)}\r\n                      className=\"mb-1\"\r\n                    />\r\n                  </div>\r\n                ))}\r\n                <Button variant=\"secondary\" onClick={this.addContactPerson}>\r\n                  + Add Contact Person\r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"primary\" onClick={this.saveModal}>\r\n              Submit\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={this.closeModal}>\r\n              Cancel\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Datalist;\r\n"]},"metadata":{},"sourceType":"module"}