{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\invoice\\\\tpbill\\\\ThirdPartyBilling.js\";\nimport React, { Component } from \"react\";\nimport { db } from \"../../../../../firebase\";\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from \"firebase/firestore\";\n\nclass ThirdPartyBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      suppliers: [],\n      products: [],\n      bills: [],\n      showForm: false,\n      editingId: null,\n      activeTab: 0,\n      showSupplierOverlay: false,\n      supplierOverlaySearch: \"\",\n      showProductOverlay: false,\n      productOverlaySearch: \"\",\n      selectedProductIds: [],\n      formData: this.getEmptyForm(),\n      notes: \"\"\n    };\n\n    this.fetchSuppliers = async () => {\n      const snap = await getDocs(collection(db, \"suppliers\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        suppliers: data\n      });\n    };\n\n    this.fetchProducts = async () => {\n      const snap = await getDocs(collection(db, \"products\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        products: data\n      });\n    };\n\n    this.fetchBills = async () => {\n      const snap = await getDocs(collection(db, \"thirdPartyBills\"));\n      const data = snap.docs.map(d => ({\n        id: d.id,\n        ...d.data()\n      }));\n      this.setState({\n        bills: data.reverse()\n      });\n    };\n\n    this.selectSupplier = s => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          supplierCode: s.spCode,\n          supplierName: s.spName,\n          currency: s.currency,\n          paymentTerms: s.paymentTerms || \"\"\n        },\n        showSupplierOverlay: false\n      }));\n    };\n\n    this.showSupplierOverlay = () => this.setState({\n      showSupplierOverlay: true,\n      supplierOverlaySearch: \"\"\n    });\n\n    this.hideSupplierOverlay = () => this.setState({\n      showSupplierOverlay: false,\n      supplierOverlaySearch: \"\"\n    });\n\n    this.showProductOverlay = () => this.setState({\n      showProductOverlay: true,\n      productOverlaySearch: \"\",\n      selectedProductIds: []\n    });\n\n    this.hideProductOverlay = () => this.setState({\n      showProductOverlay: false,\n      productOverlaySearch: \"\",\n      selectedProductIds: []\n    });\n\n    this.toggleProductSelection = (productId, checked) => {\n      this.setState(prev => ({\n        selectedProductIds: checked ? [...prev.selectedProductIds, productId] : prev.selectedProductIds.filter(id => id !== productId)\n      }));\n    };\n\n    this.addSelectedProductsToLineItems = () => {\n      const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\n      const newItems = selectedProducts.map(product => ({\n        itemCode: product.productId || \"\",\n        itemDesc: product.ptdescription || \"\",\n        uom: product.uom || \" \",\n        itemType: product.itemType || \"\",\n        materialType: product.materialType || \"\",\n        totalUnitPrice: \"\"\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, ...newItems]\n        },\n        showProductOverlay: false,\n        selectedProductIds: []\n      }), this.recalculateInvoiceValue);\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }), () => {\n        if ([\"tdsAmount\", \"actualPaymentAmount\"].includes(field)) {\n          this.recalculateInvoiceValue();\n        }\n      });\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const items = [...this.state.formData.lineItems];\n      items[idx] = { ...items[idx],\n        [field]: value\n      };\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: items\n        }\n      }), this.recalculateInvoiceValue);\n    };\n\n    this.recalculateInvoiceValue = () => {\n      const {\n        lineItems,\n        tdsAmount\n      } = this.state.formData;\n      let total = 0;\n      (lineItems || []).forEach(item => {\n        total += parseFloat(item.totalUnitPrice || 0);\n      });\n      total += parseFloat(tdsAmount || 0);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          totalInvoiceValue: total ? total.toFixed(2) : \"\"\n        }\n      }));\n    };\n\n    this.handleTabChange = i => this.setState({\n      activeTab: i\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        bills\n      } = this.state;\n      const saveData = { ...formData,\n        notes: this.state.notes,\n        createdAt: serverTimestamp()\n      };\n\n      if (editingId) {\n        await updateDoc(doc(db, \"thirdPartyBills\", editingId), saveData);\n      } else {\n        if (formData.billAccType === \"Standard\") {\n          saveData.billAccNo = `TPB${1000 + bills.length}`;\n        }\n\n        await addDoc(collection(db, \"thirdPartyBills\"), saveData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null,\n        formData: this.getEmptyForm(),\n        notes: \"\"\n      });\n      this.fetchBills();\n    };\n\n    this.renderBillingTab = () => {\n      const f = this.state.formData;\n      const items = f.lineItems || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 3\n        }\n      }, \"Bill Acc Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control\",\n        value: f.billAccType,\n        onChange: e => {\n          const type = e.target.value; // If switching to Standard, clear manual billAccNo\n\n          this.handleInputChange(\"billAccType\", type);\n\n          if (type === \"Standard\") {\n            this.handleInputChange(\"billAccNo\", \"\");\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 3\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 5\n        }\n      }, \"Standard (Auto)\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 5\n        }\n      }, \"Manual (Typing)\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 3\n        }\n      }, \"Bill Acc No\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.billAccNo,\n        onChange: e => this.handleInputChange(\"billAccNo\", e.target.value),\n        readOnly: f.billAccType === \"Standard\",\n        placeholder: f.billAccType === \"Standard\" ? \"Auto\" : \"Enter Bill Acc No\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 3\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }\n      }, \"Bill Acc Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.billAccDate,\n        onChange: e => this.handleInputChange(\"billAccDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.status,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }\n      }, \"Supplier Code & Name\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: `${f.supplierCode}-${f.supplierName}`,\n        readOnly: true,\n        onClick: this.showSupplierOverlay,\n        style: {\n          cursor: \"pointer\"\n        },\n        placeholder: \"Select Supplier\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 13\n        }\n      }, \"Supplier Invoice No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.supplierInvoiceNo,\n        onChange: e => this.handleInputChange(\"supplierInvoiceNo\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 13\n        }\n      }, \"Supplier Invoice Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.supplierInvoiceDate,\n        onChange: e => this.handleInputChange(\"supplierInvoiceDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.conversionRate,\n        onChange: e => this.handleInputChange(\"conversionRate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.paymentTerms,\n        onChange: e => this.handleInputChange(\"paymentTerms\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }\n      }, \"Due Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.dueDate,\n        onChange: e => this.handleInputChange(\"dueDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }\n      }, \"Payment Release Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control\",\n        value: f.paymentReleaseDate,\n        onChange: e => this.handleInputChange(\"paymentReleaseDate\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }\n      }, \"Actual Payment Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.actualPaymentAmount,\n        onChange: e => this.handleInputChange(\"actualPaymentAmount\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }\n      }, \"TDS Amount/15 CA/CB Doc\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: f.tdsAmount,\n        onChange: e => this.handleInputChange(\"tdsAmount\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }\n      }, \"Total Invoice Value\"), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: f.totalInvoiceValue,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mt-3 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }\n      }, \"Line Items\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary btn-sm\",\n        onClick: this.showProductOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }\n      }, \"+ Add Items\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"thead-light\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 17\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 17\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 17\n        }\n      }, \"Item Type\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 17\n        }\n      }, \"Material Type\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 17\n        }\n      }, \"Total Unit Price\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 13\n        }\n      }, items.map((it, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 19\n        }\n      }, it.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 19\n        }\n      }, it.itemDesc), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 19\n        }\n      }, it.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: it.itemType,\n        onChange: e => this.handleLineItemChange(i, \"itemType\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"form-control\",\n        value: it.materialType,\n        onChange: e => this.handleLineItemChange(i, \"materialType\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        value: it.totalUnitPrice,\n        onChange: e => this.handleLineItemChange(i, \"totalUnitPrice\", e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 21\n        }\n      })))), items.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 6,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 19\n        }\n      }, \"No items\"))))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: 2,\n      value: this.state.notes,\n      onChange: e => this.setState({\n        notes: e.target.value\n      }),\n      style: {\n        resize: \"vertical\",\n        minHeight: \"40px\",\n        maxHeight: \"120px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }\n    })));\n\n    this.renderTabs = () => {\n      const tabs = [\"Billing Details\", \"Notes\"];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 7\n        }\n      }, tabs.map((t, i) => /*#__PURE__*/React.createElement(\"li\", {\n        key: i,\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link ${this.state.activeTab === i ? \"active\" : \"\"}`,\n        onClick: () => this.handleTabChange(i),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }\n      }, t))));\n    };\n\n    this.renderSupplierOverlay = () => {\n      const {\n        suppliers,\n        supplierOverlaySearch\n      } = this.state;\n      const filtered = suppliers.filter(s => (s.spName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) || (s.spCode || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) || (s.spshortName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }\n      }, \"Select Supplier\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code, name, or short name\",\n        value: supplierOverlaySearch,\n        onChange: e => this.setState({\n          supplierOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 19\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 19\n        }\n      }, \"Short Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 15\n        }\n      }, filtered.map((s, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: s.id || i,\n        onClick: () => this.selectSupplier(s),\n        style: {\n          cursor: \"pointer\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 21\n        }\n      }, s.spCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 21\n        }\n      }, s.spName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 21\n        }\n      }, s.spshortName))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 3,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 21\n        }\n      }, \"No suppliers found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideSupplierOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 11\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderProductOverlay = () => {\n      const {\n        products,\n        productOverlaySearch,\n        selectedProductIds\n      } = this.state;\n      const filtered = products.filter(p => (p.productId || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptshortName || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptdescription || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 11\n        }\n      }, \"Select Products\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code, name, or desc...\",\n        value: productOverlaySearch,\n        onChange: e => this.setState({\n          productOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: \"auto\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 19\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 19\n        }\n      }, \"Short Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 19\n        }\n      }, \"Desc\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 15\n        }\n      }, filtered.map((p, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: p.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selectedProductIds.includes(p.id),\n        onChange: e => this.toggleProductSelection(p.id, e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 21\n        }\n      }, p.productId), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 21\n        }\n      }, p.ptshortName), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 21\n        }\n      }, p.ptdescription))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 4,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 21\n        }\n      }, \"No products found\"))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between mt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-success btn-sm\",\n        onClick: this.addSelectedProductsToLineItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }\n      }, \"Add Selected\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary btn-sm\",\n        onClick: this.hideProductOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }\n      }, \"Cancel\"))));\n    };\n\n    this.renderForm = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: \"auto\",\n          padding: \"24px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 13\n        }\n      }, \"Third Party Billing\"), this.renderTabs(), this.state.activeTab === 0 && this.renderBillingTab(), this.state.activeTab === 1 && this.renderNotesTab()), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary ml-2\",\n        type: \"button\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyForm(),\n          notes: \"\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success\",\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 13\n        }\n      }, this.state.editingId ? \"Update\" : \"Create\"))), this.state.showSupplierOverlay && this.renderSupplierOverlay(), this.state.showProductOverlay && this.renderProductOverlay());\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 624,\n        columnNumber: 11\n      }\n    }, \"Third Party Bills\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 11\n      }\n    }, \"Create\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 635,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 17\n      }\n    }, \"Bill Acc No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 17\n      }\n    }, \"Supplier\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 17\n      }\n    }, \"Supplier Invoice No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 17\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 17\n      }\n    }, \"Total Invoice Value\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 17\n      }\n    }, \"Status\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 13\n      }\n    }, this.state.bills.map((b, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-link\",\n      onClick: () => this.setState({\n        showForm: true,\n        editingId: b.id,\n        formData: { ...b\n        },\n        notes: b.notes || \"\"\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 21\n      }\n    }, b.billAccNo)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 665,\n        columnNumber: 19\n      }\n    }, b.billAccDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 19\n      }\n    }, b.supplierName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 19\n      }\n    }, b.supplierInvoiceNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 19\n      }\n    }, b.currency), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 19\n      }\n    }, b.totalInvoiceValue), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 19\n      }\n    }, b.status))), this.state.bills.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"7\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 19\n      }\n    }, \"No records found\")))))));\n  }\n\n  getEmptyForm() {\n    return {\n      billAccType: \"\",\n      billAccNo: \"\",\n      billAccDate: new Date().toISOString().split(\"T\")[0],\n      status: \"Entered\",\n      supplierCode: \"\",\n      supplierName: \"\",\n      supplierInvoiceNo: \"\",\n      supplierInvoiceDate: \"\",\n      currency: \"\",\n      conversionRate: \"\",\n      paymentTerms: \"\",\n      dueDate: \"\",\n      paymentReleaseDate: \"\",\n      actualPaymentAmount: \"\",\n      tdsAmount: \"\",\n      tdsDoc: \"\",\n      totalInvoiceValue: \"\",\n      lineItems: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchSuppliers();\n    this.fetchProducts();\n    this.fetchBills();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 7\n      }\n    }, this.state.showForm ? this.renderForm() : this.renderTable());\n  }\n\n}\n\nexport default ThirdPartyBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/invoice/tpbill/ThirdPartyBilling.js"],"names":["React","Component","db","collection","getDocs","addDoc","updateDoc","doc","serverTimestamp","ThirdPartyBilling","state","suppliers","products","bills","showForm","editingId","activeTab","showSupplierOverlay","supplierOverlaySearch","showProductOverlay","productOverlaySearch","selectedProductIds","formData","getEmptyForm","notes","fetchSuppliers","snap","data","docs","map","d","id","setState","fetchProducts","fetchBills","reverse","selectSupplier","s","prev","supplierCode","spCode","supplierName","spName","currency","paymentTerms","hideSupplierOverlay","hideProductOverlay","toggleProductSelection","productId","checked","filter","addSelectedProductsToLineItems","selectedProducts","p","includes","newItems","product","itemCode","itemDesc","ptdescription","uom","itemType","materialType","totalUnitPrice","lineItems","recalculateInvoiceValue","handleInputChange","field","value","handleLineItemChange","idx","items","tdsAmount","total","forEach","item","parseFloat","totalInvoiceValue","toFixed","handleTabChange","i","handleSubmit","e","preventDefault","saveData","createdAt","billAccType","billAccNo","length","renderBillingTab","f","type","target","billAccDate","status","cursor","supplierInvoiceNo","supplierInvoiceDate","conversionRate","dueDate","paymentReleaseDate","actualPaymentAmount","it","renderNotesTab","resize","minHeight","maxHeight","renderTabs","tabs","t","renderSupplierOverlay","filtered","toLowerCase","spshortName","overflowY","renderProductOverlay","ptshortName","renderForm","flex","padding","renderTable","b","Date","toISOString","split","tdsDoc","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { db } from \"../../../../../firebase\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  doc,\r\n  serverTimestamp,\r\n} from \"firebase/firestore\";\r\n\r\nclass ThirdPartyBilling extends Component {\r\n  state = {\r\n    suppliers: [],\r\n    products: [],\r\n    bills: [],\r\n    showForm: false,\r\n    editingId: null,\r\n    activeTab: 0,\r\n    showSupplierOverlay: false,\r\n    supplierOverlaySearch: \"\",\r\n    showProductOverlay: false,\r\n    productOverlaySearch: \"\",\r\n    selectedProductIds: [],\r\n    formData: this.getEmptyForm(),\r\n    notes: \"\",\r\n  };\r\n\r\n  getEmptyForm() {\r\n    return {\r\n      billAccType: \"\",\r\n      billAccNo: \"\",\r\n      billAccDate: new Date().toISOString().split(\"T\")[0],\r\n      status: \"Entered\",\r\n      supplierCode: \"\",\r\n      supplierName: \"\",\r\n      supplierInvoiceNo: \"\",\r\n      supplierInvoiceDate: \"\",\r\n      currency: \"\",\r\n      conversionRate: \"\",\r\n      paymentTerms: \"\",\r\n      dueDate: \"\",\r\n      paymentReleaseDate: \"\",\r\n      actualPaymentAmount: \"\",\r\n      tdsAmount: \"\",\r\n      tdsDoc: \"\",\r\n      totalInvoiceValue: \"\",\r\n      lineItems: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchSuppliers();\r\n    this.fetchProducts();\r\n    this.fetchBills();\r\n  }\r\n\r\n  fetchSuppliers = async () => {\r\n    const snap = await getDocs(collection(db, \"suppliers\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ suppliers: data });\r\n  };\r\n\r\n  fetchProducts = async () => {\r\n    const snap = await getDocs(collection(db, \"products\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ products: data });\r\n  };\r\n\r\n  fetchBills = async () => {\r\n    const snap = await getDocs(collection(db, \"thirdPartyBills\"));\r\n    const data = snap.docs.map((d) => ({ id: d.id, ...d.data() }));\r\n    this.setState({ bills: data.reverse() });\r\n  };\r\n\r\n  selectSupplier = (s) => {\r\n    this.setState((prev) => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        supplierCode: s.spCode,\r\n        supplierName: s.spName,\r\n        currency: s.currency,\r\n        paymentTerms: s.paymentTerms || \"\",\r\n      },\r\n      showSupplierOverlay: false,\r\n    }));\r\n  };\r\n\r\n  showSupplierOverlay = () =>\r\n    this.setState({ showSupplierOverlay: true, supplierOverlaySearch: \"\" });\r\n  hideSupplierOverlay = () =>\r\n    this.setState({ showSupplierOverlay: false, supplierOverlaySearch: \"\" });\r\n\r\n  showProductOverlay = () =>\r\n    this.setState({ showProductOverlay: true, productOverlaySearch: \"\", selectedProductIds: [] });\r\n  hideProductOverlay = () =>\r\n    this.setState({ showProductOverlay: false, productOverlaySearch: \"\", selectedProductIds: [] });\r\n\r\n  toggleProductSelection = (productId, checked) => {\r\n    this.setState((prev) => ({\r\n      selectedProductIds: checked\r\n        ? [...prev.selectedProductIds, productId]\r\n        : prev.selectedProductIds.filter((id) => id !== productId),\r\n    }));\r\n  };\r\n\r\n  addSelectedProductsToLineItems = () => {\r\n    const selectedProducts = this.state.products.filter((p) =>\r\n      this.state.selectedProductIds.includes(p.id)\r\n    );\r\n    const newItems = selectedProducts.map((product) => ({\r\n      itemCode: product.productId || \"\",\r\n      itemDesc: product.ptdescription || \"\",\r\n      uom: product.uom || \" \",\r\n      itemType: product.itemType || \"\",\r\n      materialType: product.materialType || \"\",\r\n      totalUnitPrice: \"\",\r\n    }));\r\n    this.setState(\r\n      (prev) => ({\r\n        formData: {\r\n          ...prev.formData,\r\n          lineItems: [...prev.formData.lineItems, ...newItems],\r\n        },\r\n        showProductOverlay: false,\r\n        selectedProductIds: [],\r\n      }),\r\n      this.recalculateInvoiceValue\r\n    );\r\n  };\r\n\r\n  handleInputChange = (field, value) => {\r\n    this.setState(\r\n      (prev) => ({\r\n        formData: { ...prev.formData, [field]: value },\r\n      }),\r\n      () => {\r\n        if ([\"tdsAmount\", \"actualPaymentAmount\"].includes(field)) {\r\n          this.recalculateInvoiceValue();\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    const items = [...this.state.formData.lineItems];\r\n    items[idx] = { ...items[idx], [field]: value };\r\n    this.setState(\r\n      (prev) => ({\r\n        formData: { ...prev.formData, lineItems: items },\r\n      }),\r\n      this.recalculateInvoiceValue\r\n    );\r\n  };\r\n\r\n  recalculateInvoiceValue = () => {\r\n    const { lineItems, tdsAmount } = this.state.formData;\r\n    let total = 0;\r\n    (lineItems || []).forEach((item) => {\r\n      total += parseFloat(item.totalUnitPrice || 0);\r\n    });\r\n    total += parseFloat(tdsAmount || 0);\r\n    this.setState((prev) => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        totalInvoiceValue: total ? total.toFixed(2) : \"\",\r\n      },\r\n    }));\r\n  };\r\n\r\n  handleTabChange = (i) => this.setState({ activeTab: i });\r\n\r\n handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  const { editingId, formData, bills } = this.state;\r\n  const saveData = {\r\n    ...formData,\r\n    notes: this.state.notes,\r\n    createdAt: serverTimestamp(),\r\n  };\r\n  if (editingId) {\r\n    await updateDoc(doc(db, \"thirdPartyBills\", editingId), saveData);\r\n  } else {\r\n    if (formData.billAccType === \"Standard\") {\r\n      saveData.billAccNo = `TPB${1000 + bills.length}`;\r\n    }\r\n    await addDoc(collection(db, \"thirdPartyBills\"), saveData);\r\n  }\r\n  this.setState({\r\n    showForm: false,\r\n    editingId: null,\r\n    formData: this.getEmptyForm(),\r\n    notes: \"\",\r\n  });\r\n  this.fetchBills();\r\n};\r\n\r\n  renderBillingTab = () => {\r\n    const f = this.state.formData;\r\n    const items = f.lineItems || [];\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n  <label>Bill Acc Type</label>\r\n  <select\r\n    className=\"form-control\"\r\n    value={f.billAccType}\r\n    onChange={e => {\r\n      const type = e.target.value;\r\n      // If switching to Standard, clear manual billAccNo\r\n      this.handleInputChange(\"billAccType\", type);\r\n      if (type === \"Standard\") {\r\n        this.handleInputChange(\"billAccNo\", \"\");\r\n      }\r\n    }}\r\n  >\r\n    <option value=\"Standard\">Standard (Auto)</option>\r\n    <option value=\"Manual\">Manual (Typing)</option>\r\n  </select>\r\n</div>\r\n<div className=\"form-group col-md-2\">\r\n  <label>Bill Acc No</label>\r\n  <input\r\n    className=\"form-control\"\r\n    value={f.billAccNo}\r\n    onChange={e => this.handleInputChange(\"billAccNo\", e.target.value)}\r\n    readOnly={f.billAccType === \"Standard\"}\r\n    placeholder={f.billAccType === \"Standard\" ? \"Auto\" : \"Enter Bill Acc No\"}\r\n  />\r\n</div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Bill Acc Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              value={f.billAccDate}\r\n              onChange={(e) => this.handleInputChange(\"billAccDate\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Status</label>\r\n            <input className=\"form-control\" value={f.status} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n          <label>Supplier Code & Name</label>\r\n          <input\r\n            className=\"form-control\"\r\n            value={`${f.supplierCode}-${f.supplierName}`} \r\n            readOnly\r\n            onClick={this.showSupplierOverlay}\r\n            style={{ cursor: \"pointer\" }}\r\n            placeholder=\"Select Supplier\"\r\n          />\r\n        </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Supplier Invoice No</label>\r\n            <input  \r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              value={f.supplierInvoiceNo}\r\n              onChange={(e) => this.handleInputChange(\"supplierInvoiceNo\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Supplier Invoice Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              value={f.supplierInvoiceDate}\r\n              onChange={(e) => this.handleInputChange(\"supplierInvoiceDate\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Currency</label>\r\n            <input className=\"form-control\" value={f.currency} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Conversion Rate</label>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              value={f.conversionRate}\r\n              onChange={(e) => this.handleInputChange(\"conversionRate\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Payment Terms</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={f.paymentTerms}\r\n              onChange={(e) => this.handleInputChange(\"paymentTerms\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Due Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              value={f.dueDate}\r\n              onChange={(e) => this.handleInputChange(\"dueDate\", e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Payment Release Date</label>\r\n            <input\r\n              type=\"date\"\r\n              className=\"form-control\"\r\n              value={f.paymentReleaseDate}\r\n              onChange={(e) => this.handleInputChange(\"paymentReleaseDate\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>Actual Payment Amount</label>\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              value={f.actualPaymentAmount}\r\n              onChange={(e) => this.handleInputChange(\"actualPaymentAmount\", e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"form-group col-md-2\">\r\n            <label>TDS Amount/15 CA/CB Doc</label>\r\n            <input\r\n              type=\"number\" \r\n              className=\"form-control\"\r\n              value={f.tdsAmount}\r\n              onChange={(e) => this.handleInputChange(\"tdsAmount\", e.target.value)}\r\n            />\r\n          </div>\r\n         \r\n          <div className=\"form-group col-md-2\">\r\n            <label>Total Invoice Value</label>\r\n            <input className=\"form-control\" value={f.totalInvoiceValue} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"d-flex justify-content-between align-items-center mt-3 mb-2\">\r\n          <h5>Line Items</h5>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary btn-sm\"\r\n            onClick={this.showProductOverlay}\r\n          >\r\n            + Add Items\r\n          </button>\r\n        </div>\r\n        <div className=\"table-responsive mt-3\">\r\n          <table className=\"table table-bordered\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Item Code</th>\r\n                <th>Item Desc</th>\r\n                <th>UOM</th>\r\n                <th>Item Type</th>\r\n                <th>Material Type</th>\r\n                <th>Total Unit Price</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {items.map((it, i) => (\r\n                <tr key={i}>\r\n                  <td>{it.itemCode}</td>\r\n                  <td>{it.itemDesc}</td>\r\n                  <td>{it.uom}</td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control\"\r\n                      value={it.itemType}\r\n                      onChange={(e) =>\r\n                        this.handleLineItemChange(i, \"itemType\", e.target.value)\r\n                      }\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      className=\"form-control\"\r\n                      value={it.materialType}\r\n                      onChange={(e) =>\r\n                        this.handleLineItemChange(i, \"materialType\", e.target.value)\r\n                      }\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control\"\r\n                      value={it.totalUnitPrice}\r\n                      onChange={(e) =>\r\n                        this.handleLineItemChange(i, \"totalUnitPrice\", e.target.value)\r\n                      }\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {items.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={6} className=\"text-center\">\r\n                    No items\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderNotesTab = () => (\r\n    <div>\r\n      <div className=\"form-group\">\r\n        <label>Notes / Remarks</label>\r\n        <textarea\r\n          className=\"form-control form-control-sm\"\r\n          rows={2}\r\n          value={this.state.notes}\r\n          onChange={(e) => this.setState({ notes: e.target.value })}\r\n          style={{ resize: \"vertical\", minHeight: \"40px\", maxHeight: \"120px\" }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  renderTabs = () => {\r\n    const tabs = [\"Billing Details\", \"Notes\"];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\">\r\n        {tabs.map((t, i) => (\r\n          <li key={i} className=\"nav-item\">\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link ${this.state.activeTab === i ? \"active\" : \"\"}`}\r\n              onClick={() => this.handleTabChange(i)}\r\n            >\r\n              {t}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  renderSupplierOverlay = () => {\r\n    const { suppliers, supplierOverlaySearch } = this.state;\r\n    const filtered = suppliers.filter((s) =>\r\n      (s.spName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) ||\r\n      (s.spCode || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase()) ||\r\n      (s.spshortName || \"\").toLowerCase().includes(supplierOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Supplier</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by code, name, or short name\"\r\n            value={supplierOverlaySearch}\r\n            onChange={(e) => this.setState({ supplierOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: \"auto\" }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Code</th>\r\n                  <th>Name</th>\r\n                  <th>Short Name</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((s, i) => (\r\n                  <tr\r\n                    key={s.id || i}\r\n                    onClick={() => this.selectSupplier(s)}\r\n                    style={{ cursor: \"pointer\" }}\r\n                  >\r\n                    <td>{s.spCode}</td>\r\n                    <td>{s.spName}</td>\r\n                    <td>{s.spshortName}</td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={3} className=\"text-center\">\r\n                      No suppliers found\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-secondary btn-sm mt-2\"\r\n            onClick={this.hideSupplierOverlay}\r\n          >\r\n            Cancel\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderProductOverlay = () => {\r\n    const { products, productOverlaySearch, selectedProductIds } = this.state;\r\n    const filtered = products.filter((p) =>\r\n      (p.productId || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptshortName || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptdescription || \"\").toLowerCase().includes(productOverlaySearch.toLowerCase())\r\n    );\r\n    return (\r\n      <div className=\"custom-overlay\">\r\n        <div className=\"custom-overlay-content\">\r\n          <div className=\"custom-overlay-title\">Select Products</div>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control mb-2\"\r\n            placeholder=\"Search by code, name, or desc...\"\r\n            value={productOverlaySearch}\r\n            onChange={(e) => this.setState({ productOverlaySearch: e.target.value })}\r\n          />\r\n          <div style={{ maxHeight: 300, overflowY: \"auto\" }}>\r\n            <table className=\"table table-bordered table-sm\">\r\n              <thead>\r\n                <tr>\r\n                  <th></th>\r\n                  <th>Code</th>\r\n                  <th>Short Name</th>\r\n                  <th>Desc</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filtered.map((p, i) => (\r\n                  <tr key={p.id || i}>\r\n                    <td>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedProductIds.includes(p.id)}\r\n                        onChange={(e) =>\r\n                          this.toggleProductSelection(p.id, e.target.checked)\r\n                        }\r\n                      />\r\n                    </td>\r\n                    <td>{p.productId}</td>\r\n                    <td>{p.ptshortName}</td>\r\n                    <td>{p.ptdescription}</td>\r\n                  </tr>\r\n                ))}\r\n                {filtered.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan={4} className=\"text-center\">\r\n                      No products found\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"d-flex justify-content-between mt-2\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-success btn-sm\"\r\n              onClick={this.addSelectedProductsToLineItems}\r\n            >\r\n              Add Selected\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-secondary btn-sm\"\r\n              onClick={this.hideProductOverlay}\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderForm = () => {\r\n    return (\r\n      <div className=\"card full-height\">\r\n        <form className=\"form-sample\" onSubmit={this.handleSubmit}>\r\n          <div style={{ flex: 1, overflowY: \"auto\", padding: \"24px\" }}>\r\n            <h4 className=\"mb-3\">Third Party Billing</h4>\r\n            {this.renderTabs()}\r\n            {this.state.activeTab === 0 && this.renderBillingTab()}\r\n            {this.state.activeTab === 1 && this.renderNotesTab()}\r\n          </div>\r\n          <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n            <button\r\n              className=\"btn btn-secondary ml-2\"\r\n              type=\"button\"\r\n              onClick={() =>\r\n                this.setState({\r\n                  showForm: false,\r\n                  editingId: null,\r\n                  formData: this.getEmptyForm(),\r\n                  notes: \"\",\r\n                })\r\n              }\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button className=\"btn btn-success\" type=\"submit\">\r\n              {this.state.editingId ? \"Update\" : \"Create\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n        {this.state.showSupplierOverlay && this.renderSupplierOverlay()}\r\n        {this.state.showProductOverlay && this.renderProductOverlay()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Third Party Bills</h4>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={() => this.setState({ showForm: true })}\r\n          >\r\n            Create\r\n          </button>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered table-hover\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Bill Acc No</th>\r\n                <th>Date</th>\r\n                <th>Supplier</th>\r\n                <th>Supplier Invoice No</th>\r\n                <th>Currency</th>\r\n                <th>Total Invoice Value</th>\r\n                <th>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.bills.map((b, i) => (\r\n                <tr key={i}>\r\n                  <td>\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-link\"\r\n                      onClick={() =>\r\n                        this.setState({\r\n                          showForm: true,\r\n                          editingId: b.id,\r\n                          formData: { ...b },\r\n                          notes: b.notes || \"\",\r\n                        })\r\n                      }\r\n                    >\r\n                      {b.billAccNo}\r\n                    </button>\r\n                  </td>\r\n                  <td>{b.billAccDate}</td>\r\n                  <td>{b.supplierName}</td>\r\n                  <td>{b.supplierInvoiceNo}</td>\r\n                  <td>{b.currency}</td>\r\n                  <td>{b.totalInvoiceValue}</td>\r\n                  <td>{b.status}</td>\r\n                </tr>\r\n              ))}\r\n              {this.state.bills.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"7\" className=\"text-center\">\r\n                    No records found\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ThirdPartyBilling;"]},"metadata":{},"sourceType":"module"}