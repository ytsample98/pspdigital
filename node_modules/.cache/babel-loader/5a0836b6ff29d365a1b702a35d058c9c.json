{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\sales\\\\salestransactions\\\\servicecontract\\\\contractbilling.js\";\nimport React, { Component } from 'react';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport { db } from '../../../../firebase';\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\n\nclass ContractBilling extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      contracts: [],\n      customers: [],\n      products: [],\n      taxGroups: [],\n      activeTab: 0,\n      showForm: false,\n      editingId: null,\n      durationFrom: null,\n      durationTo: null,\n      canAddItems: false,\n      showProductOverlay: false,\n      showResourceOverlay: false,\n      productOverlaySearch: '',\n      selectedProductIds: [],\n      formData: this.getEmptyContractForm(),\n      notes: ''\n    };\n\n    this.fetchContracts = async () => {\n      const snap = await getDocs(collection(db, 'contracts'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        contracts: data.reverse()\n      });\n    };\n\n    this.fetchCustomers = async () => {\n      const snap = await getDocs(collection(db, 'customers'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        customers: data\n      });\n    };\n\n    this.fetchProducts = async () => {\n      const snap = await getDocs(collection(db, 'products'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        products: data\n      });\n    };\n\n    this.fetchTaxGroups = async () => {\n      const snap = await getDocs(collection(db, 'taxGroups'));\n      const data = snap.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      this.setState({\n        taxGroups: data\n      });\n    };\n\n    this.checkDurationSelected = () => {\n      const {\n        durationFrom,\n        durationTo\n      } = this.state;\n      this.setState({\n        canAddItems: !!(durationFrom && durationTo)\n      });\n    };\n\n    this.showProductOverlay = () => this.setState({\n      showProductOverlay: true,\n      productOverlaySearch: '',\n      selectedProductIds: []\n    });\n\n    this.hideProductOverlay = () => this.setState({\n      showProductOverlay: false,\n      productOverlaySearch: '',\n      selectedProductIds: []\n    });\n\n    this.toggleProductSelection = (productId, checked) => {\n      this.setState(prev => ({\n        selectedProductIds: checked ? [...prev.selectedProductIds, productId] : prev.selectedProductIds.filter(id => id !== productId)\n      }));\n    };\n\n    this.addSelectedProductsToLineItems = () => {\n      const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\n      const newItems = selectedProducts.map(product => ({\n        itemCode: product.code || '',\n        itemDesc: product.name || '',\n        hsnNo: product.hsn || '',\n        uom: product.uom || '',\n        qty: 1,\n        unitDayOrWk: 1,\n        unitPrice: product.price || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      }));\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, ...newItems]\n        },\n        showProductOverlay: false,\n        selectedProductIds: []\n      }), this.recalculateContractTotals);\n    };\n\n    this.showCustomerOverlay = () => this.setState({\n      showCustomerOverlay: true,\n      customerOverlaySearch: ''\n    });\n\n    this.hideCustomerOverlay = () => this.setState({\n      showCustomerOverlay: false,\n      customerOverlaySearch: ''\n    });\n\n    this.selectCustomer = customer => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          customer: customer.custname,\n          currency: customer.currency || '',\n          billTo: customer.billTo || '',\n          shipTo: customer.shipTo || '',\n          despatchMode: customer.despatchMode || '',\n          paymentTerms: customer.paymentTerms || ''\n        },\n        showCustomerOverlay: false\n      }));\n    };\n\n    this.selectProductForLineItem = product => {\n      const newItem = {\n        itemCode: product.code || '',\n        itemDesc: product.name || '',\n        hsnNo: product.hsn || '',\n        uom: product.uom || '',\n        qty: 1,\n        unitDayOrWk: 1,\n        unitPrice: product.price || 0,\n        months: 1,\n        taxGroupNames: [],\n        taxAmt: 0,\n        itemTotal: 0\n      };\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: [...prev.formData.lineItems, newItem]\n        },\n        showProductOverlay: false\n      }), this.recalculateContractTotals);\n    };\n\n    this.handleInputChange = (field, value) => {\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          [field]: value\n        }\n      }), () => {\n        if (['freightCharges', 'freightTaxPercent', 'packingCharges', 'amtAgreed', 'conversionRate'].includes(field)) {\n          this.recalculateContractTotals();\n        }\n      });\n    };\n\n    this.handleLineItemChange = (idx, field, value) => {\n      const updatedItems = [...this.state.formData.lineItems];\n      updatedItems[idx] = { ...updatedItems[idx],\n        [field]: value\n      }; // Calculate taxAmt and itemTotal for this line\n\n      let percent = 0;\n      let amount = 0;\n      (updatedItems[idx].taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const qty = parseFloat(updatedItems[idx].qty || 0);\n      const unitPrice = parseFloat(updatedItems[idx].unitPrice || 0);\n      const months = parseFloat(updatedItems[idx].months || 1);\n      const baseTotal = qty * unitPrice * months;\n      const taxAmt = baseTotal * percent / 100 + amount;\n      updatedItems[idx].taxAmt = taxAmt.toFixed(2);\n      updatedItems[idx].itemTotal = (baseTotal + taxAmt).toFixed(2);\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          lineItems: updatedItems\n        }\n      }), this.recalculateContractTotals);\n    };\n\n    this.toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\n      const formData = { ...this.state.formData\n      };\n      const item = formData.lineItems[lineIdx];\n      if (!item.taxGroupNames) item.taxGroupNames = [];\n\n      if (isChecked) {\n        if (!item.taxGroupNames.includes(groupName)) {\n          item.taxGroupNames.push(groupName);\n        }\n      } else {\n        item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\n      } // recalculate taxAmt and total\n\n\n      let percent = 0;\n      let amount = 0;\n      (item.taxGroupNames || []).forEach(groupName => {\n        const group = this.state.taxGroups.find(t => t.groupName === groupName);\n\n        if (group && Array.isArray(group.lineItems)) {\n          group.lineItems.forEach(comp => {\n            const val = parseFloat(comp.percentOrAmt || 0);\n            if (comp.type === 'Percentage') percent += val;\n            if (comp.type === 'Amount') amount += val;\n          });\n        }\n      });\n      const qty = parseFloat(item.qty || 0);\n      const unitPrice = parseFloat(item.unitPrice || 0);\n      const months = parseFloat(item.months || 1);\n      const baseTotal = qty * unitPrice * months;\n      const taxAmt = baseTotal * percent / 100 + amount;\n      item.taxAmt = taxAmt.toFixed(2);\n      item.itemTotal = (baseTotal + taxAmt).toFixed(2);\n      this.setState({\n        formData\n      }, this.recalculateContractTotals);\n    };\n\n    this.recalculateContractTotals = () => {\n      const {\n        lineItems,\n        freightCharges,\n        freightTaxPercent,\n        packingCharges,\n        amtAgreed,\n        conversionRate\n      } = this.state.formData;\n      let contractValue = 0;\n      let taxAmount = 0;\n      (lineItems || []).forEach(item => {\n        contractValue += parseFloat(item.itemTotal || 0);\n        taxAmount += parseFloat(item.taxAmt || 0);\n      }); // Freight tax calculation\n\n      const freightTaxAmt = parseFloat(freightCharges || 0) * parseFloat(freightTaxPercent || 0) / 100; // Add packing charges and freight tax to contract value\n\n      contractValue += parseFloat(packingCharges || 0) + freightTaxAmt; // If conversion rate is set, apply it\n\n      let finalValue = contractValue;\n\n      if (conversionRate) {\n        finalValue = contractValue * parseFloat(conversionRate);\n      }\n\n      this.setState(prev => ({\n        formData: { ...prev.formData,\n          contractValue: finalValue.toFixed(2),\n          freightTaxAmt: freightTaxAmt.toFixed(2)\n        }\n      }));\n    };\n\n    this.handleTabChange = idx => this.setState({\n      activeTab: idx\n    });\n\n    this.handleNotesChange = e => this.setState({\n      notes: e.target.value\n    });\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const {\n        editingId,\n        formData,\n        contracts,\n        notes\n      } = this.state;\n      if (!formData.customer) return alert(\"Customer is required\");\n      if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\n      const saveData = { ...formData,\n        notes,\n        status: \"Entered\",\n        createdAt: serverTimestamp()\n      };\n\n      if (editingId) {\n        await updateDoc(doc(db, \"contracts\", editingId), saveData);\n      } else {\n        saveData.contractNo = `SC${1000 + contracts.length}`;\n        await addDoc(collection(db, \"contracts\"), saveData);\n      }\n\n      this.setState({\n        showForm: false,\n        editingId: null,\n        formData: this.getEmptyContractForm(),\n        notes: ''\n      });\n      this.fetchContracts();\n    };\n\n    this.renderCustomerOverlay = () => {\n      const {\n        customers,\n        customerOverlaySearch\n      } = this.state;\n      const filtered = customers.filter(c => (c.custname || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) || (c.custcode || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) || (c.custshortName || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 9\n        }\n      }, \"Select Customer\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code, name, or short name...\",\n        value: customerOverlaySearch,\n        onChange: e => this.setState({\n          customerOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 17\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 17\n        }\n      }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 17\n        }\n      }, \"Short Name\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }\n      }, filtered.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: c.id || i,\n        onClick: () => this.selectCustomer(c),\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 19\n        }\n      }, c.custcode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 19\n        }\n      }, c.custname), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 19\n        }\n      }, c.custshortName))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 3,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 19\n        }\n      }, \"No customers found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideCustomerOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 9\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderProductOverlay = () => {\n      const {\n        products,\n        productOverlaySearch,\n        selectedProductIds\n      } = this.state;\n      const filtered = products.filter(p => (p.ptshortName || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.ptdescription || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) || (p.itemCode || '').toLowerCase().includes(productOverlaySearch.toLowerCase()));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-overlay-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 9\n        }\n      }, \"Select Products\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control mb-2\",\n        placeholder: \"Search by code or name...\",\n        value: productOverlaySearch,\n        onChange: e => this.setState({\n          productOverlaySearch: e.target.value\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          maxHeight: 300,\n          overflowY: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered table-sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 17\n        }\n      }, \"Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 17\n        }\n      }, \"Item Desc\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }\n      }, filtered.map((p, i) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: p.id || i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 19\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: selectedProductIds.includes(p.id),\n        onChange: e => this.toggleProductSelection(p.id, e.target.checked),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 24\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 19\n        }\n      }, p.productId), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 19\n        }\n      }, p.ptdescription))), filtered.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: 5,\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 19\n        }\n      }, \"No products found\"))))), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success btn-sm mt-2 mr-2\",\n        onClick: this.addSelectedProductsToLineItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 9\n        }\n      }, \"Add Selected\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-secondary btn-sm mt-2\",\n        onClick: this.hideProductOverlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 9\n        }\n      }, \"Cancel\")));\n    };\n\n    this.renderTabs = () => {\n      const {\n        activeTab\n      } = this.state;\n      const tabNames = ['Lines', 'Terms', 'Notes'];\n      return /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"nav nav-tabs mb-3\",\n        style: {\n          fontSize: '16px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 7\n        }\n      }, tabNames.map((tab, idx) => /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        key: tab,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: `nav-link${activeTab === idx ? ' active' : ''}`,\n        onClick: () => this.handleTabChange(idx),\n        style: {\n          color: '#007bff',\n          background: activeTab === idx ? '#e9ecef' : '#fff',\n          border: '1px solid #dee2e6',\n          borderBottom: activeTab === idx ? 'none' : undefined,\n          fontWeight: activeTab === idx ? 'bold' : 'normal'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }\n      }, tab))));\n    };\n\n    this.renderLinesTab = () => {\n      const {\n        formData,\n        showProductOverlay\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary btn-sm mr-2\",\n        onClick: this.showProductOverlay,\n        disabled: !this.state.canAddItems,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }\n      }, \"Add Items\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-info btn-sm\",\n        onClick: () => this.setState({\n          showResourceOverlay: true\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }\n      }, \"Add Resource\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive\",\n        style: {\n          overflowX: 'auto'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-bordered\",\n        style: {\n          minWidth: 1200\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 17\n        }\n      }, \"Item Code\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 17\n        }\n      }, \"Item Desc\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 17\n        }\n      }, \"HSN No\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 17\n        }\n      }, \"UOM\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 17\n        }\n      }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 17\n        }\n      }, \"Unit/Day or Wk\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 17\n        }\n      }, \"Unit Price\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 17\n        }\n      }, \"Months\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 17\n        }\n      }, \"Tax Group\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 17\n        }\n      }, \"Tax Amt\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 17\n        }\n      }, \"Item Total\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 13\n        }\n      }, (formData.lineItems || []).map((item, idx) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 19\n        }\n      }, item.itemCode), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 19\n        }\n      }, item.itemDesc), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 19\n        }\n      }, item.hsnNo), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 19\n        }\n      }, item.uom), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.qty,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'qty', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.unitDayOrWk,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'unitDayOrWk', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.unitPrice,\n        min: \"0\",\n        style: {\n          width: 100\n        },\n        onChange: e => this.handleLineItemChange(idx, 'unitPrice', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: item.months,\n        min: \"1\",\n        style: {\n          width: 80\n        },\n        onChange: e => this.handleLineItemChange(idx, 'months', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: item.taxGroupNames[0] || '',\n        onChange: e => this.toggleTaxGroupSelection(e.target.value, idx, true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 23\n        }\n      }, \"-Select-\"), this.state.taxGroups.map((tg, i) => /*#__PURE__*/React.createElement(\"option\", {\n        key: i,\n        value: tg.groupName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 25\n        }\n      }, tg.groupName)))), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 19\n        }\n      }, item.taxAmt), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 19\n        }\n      }, item.itemTotal))), (!formData.lineItems || formData.lineItems.length === 0) && /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        colSpan: \"11\",\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 19\n        }\n      }, \"No items\"))))), showProductOverlay && this.renderProductOverlay());\n    };\n\n    this.renderTermsTab = () => {\n      const {\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 13\n        }\n      }, \"Despatch Mode\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.despatchMode,\n        onChange: e => this.handleInputChange('despatchMode', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }\n      }, \"Payment Terms\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.paymentTerms,\n        onChange: e => this.handleInputChange('paymentTerms', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 13\n        }\n      }, \"Bill To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.billTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 13\n        }\n      }, \"Ship To\"), /*#__PURE__*/React.createElement(\"textarea\", {\n        className: \"form-control form-control-sm\",\n        rows: \"2\",\n        value: formData.shipTo,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 13\n        }\n      }, \"Freight Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightCharges,\n        onChange: e => this.handleInputChange('freightCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 13\n        }\n      }, \"Freight Tax %\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightTaxPercent,\n        onChange: e => this.handleInputChange('freightTaxPercent', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 13\n        }\n      }, \"Freight Tax Amt\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.freightTaxAmt,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578,\n          columnNumber: 13\n        }\n      }, \"Packing Charges\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.packingCharges,\n        onChange: e => this.handleInputChange('packingCharges', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 13\n        }\n      }, \"Amount Limit\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.amountLimit,\n        onChange: e => this.handleInputChange('amountLimit', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 13\n        }\n      }, \"Minimum Release\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.minimumRelease,\n        onChange: e => this.handleInputChange('minimumRelease', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.renderNotesTab = () => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 597,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 9\n      }\n    }, \"Notes / Remarks\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"form-control form-control-sm\",\n      rows: \"4\",\n      value: this.state.notes,\n      onChange: this.handleNotesChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 9\n      }\n    })));\n\n    this.renderForm = () => {\n      const {\n        activeTab,\n        formData\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card full-height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"form-sample\",\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 609,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: '24px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 13\n        }\n      }, \"Service Contract Creation/Update\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 17\n        }\n      }, \"Contract Type\"), /*#__PURE__*/React.createElement(\"select\", {\n        className: \"form-control form-control-sm\",\n        value: formData.contractType,\n        onChange: e => this.handleInputChange('contractType', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Standard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 19\n        }\n      }, \"Standard\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"Manual\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 19\n        }\n      }, \"Manual\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 17\n        }\n      }, \"Contract No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.contractNo,\n        readOnly: true,\n        placeholder: \"Auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 17\n        }\n      }, \"Created Date\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"date\",\n        className: \"form-control form-control-sm\",\n        value: formData.createdDate,\n        onChange: e => this.handleInputChange('createdDate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 17\n        }\n      }, \"Status\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.status,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 647,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 17\n        }\n      }, \"Ref No\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.refNo,\n        onChange: e => this.handleInputChange('refNo', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 15\n        }\n      }, \"Customer\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Choose Customer\",\n        value: formData.customer,\n        readOnly: true,\n        onClick: this.showCustomerOverlay,\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 17\n        }\n      }, \"Currency\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control form-control-sm\",\n        value: formData.currency,\n        readOnly: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 17\n        }\n      }, \"Conversion Rate\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.conversionRate,\n        onChange: e => this.handleInputChange('conversionRate', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 17\n        }\n      }, \"Std.days\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.stdDays,\n        onChange: e => this.handleInputChange('stdDays', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 676,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 17\n        }\n      }, \"Amt.Agreed\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control form-control-sm\",\n        value: formData.amtAgreed,\n        onChange: e => this.handleInputChange('amtAgreed', e.target.value),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 17\n        }\n      }, \"Contr.Duration From\"), /*#__PURE__*/React.createElement(DatePicker, {\n        selected: this.state.durationFrom,\n        onChange: date => this.setState({\n          durationFrom: date\n        }, this.checkDurationSelected),\n        selectsStart: true,\n        startDate: this.state.durationFrom,\n        endDate: this.state.durationTo,\n        dateFormat: \"yyyy-MM-dd\",\n        className: \"form-control form-control-sm\",\n        placeholderText: \"Select start date\",\n        minDate: new Date(),\n        highlightDates: [this.state.durationFrom, this.state.durationTo].filter(Boolean),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 17\n        }\n      }, \"Contr.Duration To\"), /*#__PURE__*/React.createElement(DatePicker, {\n        selected: this.state.durationTo,\n        onChange: date => this.setState({\n          durationTo: date\n        }, this.checkDurationSelected),\n        selectsEnd: true,\n        startDate: this.state.durationFrom,\n        endDate: this.state.durationTo,\n        minDate: this.state.durationFrom,\n        dateFormat: \"yyyy-MM-dd\",\n        className: \"form-control form-control-sm\",\n        placeholderText: \"Select end date\",\n        highlightDates: [this.state.durationFrom, this.state.durationTo].filter(Boolean),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 17\n        }\n      }))), this.renderTabs(), activeTab === 0 && this.renderLinesTab(), activeTab === 1 && this.renderTermsTab(), activeTab === 2 && this.renderNotesTab(), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"fixed-card-footer text-right p-3 border-top bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-success mr-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 15\n        }\n      }, \"Create\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary\",\n        onClick: () => this.setState({\n          showForm: false,\n          editingId: null,\n          formData: this.getEmptyContractForm(),\n          notes: ''\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 15\n        }\n      }, \"Cancel\")))));\n    };\n\n    this.renderTable = () => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mt-4 full-height\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 728,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 729,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 11\n      }\n    }, \"Service Contracts\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: () => this.setState({\n        showForm: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 11\n      }\n    }, \"+ Create Contract\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 734,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 735,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 17\n      }\n    }, \"Contract No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 17\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 740,\n        columnNumber: 17\n      }\n    }, \"Ref No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 17\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 17\n      }\n    }, \"Currency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 17\n      }\n    }, \"Duration\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 17\n      }\n    }, \"Std Days\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 17\n      }\n    }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 17\n      }\n    }, \"Value\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 749,\n        columnNumber: 13\n      }\n    }, this.state.contracts.map((c, i) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 19\n      }\n    }, c.contractNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 753,\n        columnNumber: 19\n      }\n    }, c.createdDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 19\n      }\n    }, c.refNo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 19\n      }\n    }, c.customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 756,\n        columnNumber: 19\n      }\n    }, c.currency), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 19\n      }\n    }, c.contrDurationFrom, \" - \", c.contrDurationTo), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 19\n      }\n    }, c.stdDays), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 759,\n        columnNumber: 19\n      }\n    }, c.status), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 19\n      }\n    }, c.contractValue))), this.state.contracts.length === 0 && /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"9\",\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 764,\n        columnNumber: 21\n      }\n    }, \"No contracts found.\")))))));\n  }\n\n  getEmptyContractForm() {\n    return {\n      contractType: 'Standard',\n      contractNo: '',\n      createdDate: new Date().toISOString().split('T')[0],\n      status: 'Entered',\n      refNo: '',\n      customer: '',\n      currency: '',\n      conversionRate: '',\n      stdDays: 30,\n      amtAgreed: '',\n      contrDurationFrom: '',\n      contrDurationTo: '',\n      lineItems: [],\n      despatchMode: '',\n      paymentTerms: '',\n      billTo: '',\n      shipTo: '',\n      freightCharges: '',\n      freightTaxPercent: '',\n      freightTaxAmt: '',\n      packingCharges: '',\n      amountLimit: '',\n      minimumRelease: '',\n      contractValue: '',\n      notes: ''\n    };\n  }\n\n  componentDidMount() {\n    this.fetchContracts();\n    this.fetchCustomers();\n    this.fetchProducts();\n    this.fetchTaxGroups();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 775,\n        columnNumber: 7\n      }\n    }, this.state.showCustomerOverlay && this.renderCustomerOverlay(), this.state.showProductOverlay && this.renderProductOverlay(), this.state.showForm ? this.renderForm() : this.renderTable());\n  }\n\n}\n\nexport default ContractBilling;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/sales/salestransactions/servicecontract/contractbilling.js"],"names":["React","Component","DatePicker","db","collection","getDocs","addDoc","updateDoc","doc","serverTimestamp","ContractBilling","state","contracts","customers","products","taxGroups","activeTab","showForm","editingId","durationFrom","durationTo","canAddItems","showProductOverlay","showResourceOverlay","productOverlaySearch","selectedProductIds","formData","getEmptyContractForm","notes","fetchContracts","snap","data","docs","map","id","setState","reverse","fetchCustomers","fetchProducts","fetchTaxGroups","checkDurationSelected","hideProductOverlay","toggleProductSelection","productId","checked","prev","filter","addSelectedProductsToLineItems","selectedProducts","p","includes","newItems","product","itemCode","code","itemDesc","name","hsnNo","hsn","uom","qty","unitDayOrWk","unitPrice","price","months","taxGroupNames","taxAmt","itemTotal","lineItems","recalculateContractTotals","showCustomerOverlay","customerOverlaySearch","hideCustomerOverlay","selectCustomer","customer","custname","currency","billTo","shipTo","despatchMode","paymentTerms","selectProductForLineItem","newItem","handleInputChange","field","value","handleLineItemChange","idx","updatedItems","percent","amount","forEach","groupName","group","find","t","Array","isArray","comp","val","parseFloat","percentOrAmt","type","baseTotal","toFixed","toggleTaxGroupSelection","lineIdx","isChecked","item","push","g","freightCharges","freightTaxPercent","packingCharges","amtAgreed","conversionRate","contractValue","taxAmount","freightTaxAmt","finalValue","handleTabChange","handleNotesChange","e","target","handleSubmit","preventDefault","alert","length","saveData","status","createdAt","contractNo","renderCustomerOverlay","filtered","c","toLowerCase","custcode","custshortName","maxHeight","overflowY","i","cursor","renderProductOverlay","ptshortName","ptdescription","renderTabs","tabNames","fontSize","tab","color","background","border","borderBottom","undefined","fontWeight","renderLinesTab","overflowX","minWidth","width","tg","renderTermsTab","amountLimit","minimumRelease","renderNotesTab","renderForm","flex","padding","contractType","createdDate","refNo","stdDays","date","Date","Boolean","renderTable","contrDurationFrom","contrDurationTo","toISOString","split","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport { db } from '../../../../firebase';\r\nimport { collection, getDocs, addDoc, updateDoc, doc, serverTimestamp } from 'firebase/firestore';\r\n\r\nclass ContractBilling extends Component {\r\n  state = {\r\n    contracts: [],\r\n    customers: [],\r\n    products: [],\r\n    taxGroups: [],\r\n    activeTab: 0,\r\n    showForm: false,\r\n    editingId: null,\r\n    durationFrom: null,\r\n    durationTo: null,\r\n    canAddItems: false,\r\n    showProductOverlay: false,\r\n    showResourceOverlay: false,\r\n    productOverlaySearch: '',\r\n    selectedProductIds:[],\r\n    formData: this.getEmptyContractForm(),\r\n    notes: ''\r\n  };\r\n\r\n  getEmptyContractForm() {\r\n    return {\r\n      contractType: 'Standard',\r\n      contractNo: '',\r\n      createdDate: new Date().toISOString().split('T')[0],\r\n      status: 'Entered',\r\n      refNo: '',\r\n      customer: '',\r\n      currency: '',\r\n      conversionRate: '',\r\n      stdDays: 30,\r\n      amtAgreed: '',\r\n      contrDurationFrom: '',\r\n      contrDurationTo: '',\r\n      lineItems: [],\r\n      despatchMode: '',\r\n      paymentTerms: '',\r\n      billTo: '',\r\n      shipTo: '',\r\n      freightCharges: '',\r\n      freightTaxPercent: '',\r\n      freightTaxAmt: '',\r\n      packingCharges: '',\r\n      amountLimit: '',\r\n      minimumRelease: '',\r\n      contractValue: '',\r\n      notes: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchContracts();\r\n    this.fetchCustomers();\r\n    this.fetchProducts();\r\n    this.fetchTaxGroups();\r\n  }\r\n\r\n  fetchContracts = async () => {\r\n    const snap = await getDocs(collection(db, 'contracts'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ contracts: data.reverse() });\r\n  };\r\n\r\n  fetchCustomers = async () => {\r\n    const snap = await getDocs(collection(db, 'customers'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ customers: data });\r\n  };\r\n\r\n  fetchProducts = async () => {\r\n    const snap = await getDocs(collection(db, 'products'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ products: data });\r\n  };\r\n\r\n  fetchTaxGroups = async () => {\r\n    const snap = await getDocs(collection(db, 'taxGroups'));\r\n    const data = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n    this.setState({ taxGroups: data });\r\n  };\r\n  checkDurationSelected = () => {\r\n  const { durationFrom, durationTo } = this.state;\r\n  this.setState({ canAddItems: !!(durationFrom && durationTo) });\r\n};\r\n\r\n  showProductOverlay = () => this.setState({ showProductOverlay: true, productOverlaySearch: '', selectedProductIds: [] });\r\n  hideProductOverlay = () => this.setState({ showProductOverlay: false, productOverlaySearch: '', selectedProductIds: [] });\r\n\r\ntoggleProductSelection = (productId, checked) => {\r\n  this.setState(prev => ({\r\n    selectedProductIds: checked\r\n      ? [...prev.selectedProductIds, productId]\r\n      : prev.selectedProductIds.filter(id => id !== productId)\r\n  }));\r\n};\r\naddSelectedProductsToLineItems = () => {\r\n  const selectedProducts = this.state.products.filter(p => this.state.selectedProductIds.includes(p.id));\r\n  const newItems = selectedProducts.map(product => ({\r\n    itemCode: product.code || '',\r\n    itemDesc: product.name || '',\r\n    hsnNo: product.hsn || '',\r\n    uom: product.uom || '',\r\n    qty: 1,\r\n    unitDayOrWk: 1,\r\n    unitPrice: product.price || 0,\r\n    months: 1,\r\n    taxGroupNames: [],\r\n    taxAmt: 0,\r\n    itemTotal: 0\r\n  }));\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      lineItems: [...prev.formData.lineItems, ...newItems]\r\n    },\r\n    showProductOverlay: false,\r\n    selectedProductIds: []\r\n  }), this.recalculateContractTotals);\r\n};\r\n\r\n\r\n  \r\n\r\nshowCustomerOverlay = () => this.setState({ showCustomerOverlay: true, customerOverlaySearch: '' });\r\nhideCustomerOverlay = () => this.setState({ showCustomerOverlay: false, customerOverlaySearch: '' });\r\n\r\nselectCustomer = (customer) => {\r\n  this.setState(prev => ({\r\n    formData: {\r\n      ...prev.formData,\r\n      customer: customer.custname,\r\n      currency: customer.currency || '',\r\n      billTo: customer.billTo || '',\r\n      shipTo: customer.shipTo || '',\r\n      despatchMode: customer.despatchMode || '',\r\n      paymentTerms: customer.paymentTerms || ''\r\n    },\r\n    showCustomerOverlay: false\r\n  }));\r\n};\r\n  selectProductForLineItem = (product) => {\r\n    const newItem = {\r\n      itemCode: product.code || '',\r\n      itemDesc: product.name || '',\r\n      hsnNo: product.hsn || '',\r\n      uom: product.uom || '',\r\n      qty: 1,\r\n      unitDayOrWk: 1,\r\n      unitPrice: product.price || 0,\r\n      months: 1,\r\n      taxGroupNames: [],\r\n      taxAmt: 0,\r\n      itemTotal: 0\r\n    };\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: [...prev.formData.lineItems, newItem]\r\n      },\r\n      showProductOverlay: false\r\n    }), this.recalculateContractTotals);\r\n  };\r\n\r\n  handleInputChange = (field, value) => {\r\n    this.setState(prev => ({\r\n      formData: { ...prev.formData, [field]: value }\r\n    }), () => {\r\n      if (['freightCharges', 'freightTaxPercent', 'packingCharges', 'amtAgreed', 'conversionRate'].includes(field)) {\r\n        this.recalculateContractTotals();\r\n      }\r\n    });\r\n  };\r\n\r\n  handleLineItemChange = (idx, field, value) => {\r\n    const updatedItems = [...this.state.formData.lineItems];\r\n    updatedItems[idx] = { ...updatedItems[idx], [field]: value };\r\n\r\n    // Calculate taxAmt and itemTotal for this line\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (updatedItems[idx].taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const qty = parseFloat(updatedItems[idx].qty || 0);\r\n    const unitPrice = parseFloat(updatedItems[idx].unitPrice || 0);\r\n    const months = parseFloat(updatedItems[idx].months || 1);\r\n    const baseTotal = qty * unitPrice * months;\r\n    const taxAmt = ((baseTotal * percent) / 100 + amount);\r\n    updatedItems[idx].taxAmt = taxAmt.toFixed(2);\r\n    updatedItems[idx].itemTotal = (baseTotal + taxAmt).toFixed(2);\r\n\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        lineItems: updatedItems\r\n      }\r\n    }), this.recalculateContractTotals);\r\n  };\r\n\r\n  toggleTaxGroupSelection = (groupName, lineIdx, isChecked) => {\r\n    const formData = { ...this.state.formData };\r\n    const item = formData.lineItems[lineIdx];\r\n    if (!item.taxGroupNames) item.taxGroupNames = [];\r\n    if (isChecked) {\r\n      if (!item.taxGroupNames.includes(groupName)) {\r\n        item.taxGroupNames.push(groupName);\r\n      }\r\n    } else {\r\n      item.taxGroupNames = item.taxGroupNames.filter(g => g !== groupName);\r\n    }\r\n    // recalculate taxAmt and total\r\n    let percent = 0;\r\n    let amount = 0;\r\n    (item.taxGroupNames || []).forEach(groupName => {\r\n      const group = this.state.taxGroups.find(t => t.groupName === groupName);\r\n      if (group && Array.isArray(group.lineItems)) {\r\n        group.lineItems.forEach(comp => {\r\n          const val = parseFloat(comp.percentOrAmt || 0);\r\n          if (comp.type === 'Percentage') percent += val;\r\n          if (comp.type === 'Amount') amount += val;\r\n        });\r\n      }\r\n    });\r\n    const qty = parseFloat(item.qty || 0);\r\n    const unitPrice = parseFloat(item.unitPrice || 0);\r\n    const months = parseFloat(item.months || 1);\r\n    const baseTotal = qty * unitPrice * months;\r\n    const taxAmt = ((baseTotal * percent) / 100 + amount);\r\n    item.taxAmt = taxAmt.toFixed(2);\r\n    item.itemTotal = (baseTotal + taxAmt).toFixed(2);\r\n\r\n    this.setState({ formData }, this.recalculateContractTotals);\r\n  };\r\n\r\n  recalculateContractTotals = () => {\r\n    const { lineItems, freightCharges, freightTaxPercent, packingCharges, amtAgreed, conversionRate } = this.state.formData;\r\n    let contractValue = 0;\r\n    let taxAmount = 0;\r\n    (lineItems || []).forEach(item => {\r\n      contractValue += parseFloat(item.itemTotal || 0);\r\n      taxAmount += parseFloat(item.taxAmt || 0);\r\n    });\r\n    // Freight tax calculation\r\n    const freightTaxAmt = (parseFloat(freightCharges || 0) * parseFloat(freightTaxPercent || 0)) / 100;\r\n    // Add packing charges and freight tax to contract value\r\n    contractValue += parseFloat(packingCharges || 0) + freightTaxAmt;\r\n    // If conversion rate is set, apply it\r\n    let finalValue = contractValue;\r\n    if (conversionRate) {\r\n      finalValue = contractValue * parseFloat(conversionRate);\r\n    }\r\n    this.setState(prev => ({\r\n      formData: {\r\n        ...prev.formData,\r\n        contractValue: finalValue.toFixed(2),\r\n        freightTaxAmt: freightTaxAmt.toFixed(2)\r\n      }\r\n    }));\r\n  };\r\n\r\n  handleTabChange = (idx) => this.setState({ activeTab: idx });\r\n\r\n  handleNotesChange = (e) => this.setState({ notes: e.target.value });\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const { editingId, formData, contracts, notes } = this.state;\r\n    if (!formData.customer) return alert(\"Customer is required\");\r\n    if (formData.lineItems.length === 0) return alert(\"At least one line item is required\");\r\n\r\n    const saveData = {\r\n      ...formData,\r\n      notes,\r\n      status: \"Entered\",\r\n      createdAt: serverTimestamp()\r\n    };\r\n\r\n    if (editingId) {\r\n      await updateDoc(doc(db, \"contracts\", editingId), saveData);\r\n    } else {\r\n      saveData.contractNo = `SC${1000 + contracts.length}`;\r\n      await addDoc(collection(db, \"contracts\"), saveData);\r\n    }\r\n\r\n    this.setState({\r\n      showForm: false,\r\n      editingId: null,\r\n      formData: this.getEmptyContractForm(),\r\n      notes: ''\r\n    });\r\n    this.fetchContracts();\r\n  };\r\nrenderCustomerOverlay = () => {\r\n  const { customers, customerOverlaySearch } = this.state;\r\n  const filtered = customers.filter(c =>\r\n    (c.custname || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) ||\r\n    (c.custcode || '').toLowerCase().includes(customerOverlaySearch.toLowerCase()) ||\r\n    (c.custshortName || '').toLowerCase().includes(customerOverlaySearch.toLowerCase())\r\n  );\r\n  return (\r\n    <div className=\"custom-overlay\">\r\n      <div className=\"custom-overlay-content\">\r\n        <div className=\"custom-overlay-title\">Select Customer</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control mb-2\"\r\n          placeholder=\"Search by code, name, or short name...\"\r\n          value={customerOverlaySearch}\r\n          onChange={e => this.setState({ customerOverlaySearch: e.target.value })}\r\n        />\r\n        <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n          <table className=\"table table-bordered table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th>Code</th>\r\n                <th>Name</th>\r\n                <th>Short Name</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filtered.map((c, i) => (\r\n                <tr key={c.id || i} onClick={() => this.selectCustomer(c)} style={{ cursor: 'pointer' }}>\r\n                  <td>{c.custcode}</td>\r\n                  <td>{c.custname}</td>\r\n                  <td>{c.custshortName}</td>\r\n                </tr>\r\n              ))}\r\n              {filtered.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={3} className=\"text-center\">No customers found</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <button className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideCustomerOverlay}>Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n// Update renderProductOverlay:\r\nrenderProductOverlay = () => {\r\n  const { products, productOverlaySearch, selectedProductIds } = this.state;\r\n  const filtered = products.filter(p =>\r\n    (p.ptshortName || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.ptdescription || '').toLowerCase().includes(productOverlaySearch.toLowerCase()) ||\r\n      (p.itemCode || '').toLowerCase().includes(productOverlaySearch.toLowerCase())\r\n  );\r\n  return (\r\n    <div className=\"custom-overlay\">\r\n      <div className=\"custom-overlay-content\">\r\n        <div className=\"custom-overlay-title\">Select Products</div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control mb-2\"\r\n          placeholder=\"Search by code or name...\"\r\n          value={productOverlaySearch}\r\n          onChange={e => this.setState({ productOverlaySearch: e.target.value })}\r\n        />\r\n        <div style={{ maxHeight: 300, overflowY: 'auto' }}>\r\n          <table className=\"table table-bordered table-sm\">\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th>Code</th>\r\n                <th>Item Desc</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filtered.map((p, i) => (\r\n                <tr key={p.id || i}>\r\n                  <td> <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedProductIds.includes(p.id)}\r\n                      onChange={e => this.toggleProductSelection(p.id, e.target.checked)}\r\n                    />\r\n                  </td>\r\n                  <td>{p.productId}</td>\r\n                  <td>{p.ptdescription}</td>\r\n                </tr>\r\n              ))}\r\n              {filtered.length === 0 && (\r\n                <tr>\r\n                  <td colSpan={5} className=\"text-center\">No products found</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <button className=\"btn btn-success btn-sm mt-2 mr-2\" onClick={this.addSelectedProductsToLineItems}>Add Selected</button>\r\n        <button className=\"btn btn-secondary btn-sm mt-2\" onClick={this.hideProductOverlay}>Cancel</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n  \r\n  renderTabs = () => {\r\n    const { activeTab } = this.state;\r\n    const tabNames = ['Lines', 'Terms', 'Notes'];\r\n    return (\r\n      <ul className=\"nav nav-tabs mb-3\" style={{ fontSize: '16px' }}>\r\n        {tabNames.map((tab, idx) => (\r\n          <li className=\"nav-item\" key={tab}>\r\n            <button\r\n              type=\"button\"\r\n              className={`nav-link${activeTab === idx ? ' active' : ''}`}\r\n              onClick={() => this.handleTabChange(idx)}\r\n              style={{\r\n                color: '#007bff',\r\n                background: activeTab === idx ? '#e9ecef' : '#fff',\r\n                border: '1px solid #dee2e6',\r\n                borderBottom: activeTab === idx ? 'none' : undefined,\r\n                fontWeight: activeTab === idx ? 'bold' : 'normal'\r\n              }}\r\n            >\r\n              {tab}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  renderLinesTab = () => {\r\n    const { formData, showProductOverlay } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row mb-2\">\r\n          <button className=\"btn btn-primary btn-sm mr-2\" onClick={this.showProductOverlay} disabled={!this.state.canAddItems}>Add Items</button>\r\n          <button className=\"btn btn-info btn-sm\" onClick={() => this.setState({ showResourceOverlay: true })}>Add Resource</button>\r\n        </div>\r\n        <div className=\"table-responsive\" style={{ overflowX: 'auto' }}>\r\n          <table className=\"table table-bordered\" style={{ minWidth: 1200 }}>\r\n            <thead>\r\n              <tr>\r\n                <th>Item Code</th>\r\n                <th>Item Desc</th>\r\n                <th>HSN No</th>\r\n                <th>UOM</th>\r\n                <th>Qty</th>\r\n                <th>Unit/Day or Wk</th>\r\n                <th>Unit Price</th>\r\n                <th>Months</th>\r\n                <th>Tax Group</th>\r\n                <th>Tax Amt</th>\r\n                <th>Item Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {(formData.lineItems || []).map((item, idx) => (\r\n                <tr key={idx}>\r\n                  <td>{item.itemCode}</td>\r\n                  <td>{item.itemDesc}</td>\r\n                  <td>{item.hsnNo}</td>\r\n                  <td>{item.uom}</td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.qty}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'qty', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.unitDayOrWk}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'unitDayOrWk', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.unitPrice}\r\n                      min=\"0\"\r\n                      style={{ width: 100 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'unitPrice', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.months}\r\n                      min=\"1\"\r\n                      style={{ width: 80 }}\r\n                      onChange={e => this.handleLineItemChange(idx, 'months', e.target.value)}\r\n                    />\r\n                  </td>\r\n                  <td>\r\n                    <select\r\n                      className=\"form-control form-control-sm\"\r\n                      value={item.taxGroupNames[0] || ''}\r\n                      onChange={e => this.toggleTaxGroupSelection(e.target.value, idx, true)}\r\n                    >\r\n                      <option value=\"\">-Select-</option>\r\n                      {this.state.taxGroups.map((tg, i) => (\r\n                        <option key={i} value={tg.groupName}>{tg.groupName}</option>\r\n                      ))}\r\n                    </select>\r\n                  </td>\r\n                  <td>{item.taxAmt}</td>\r\n                  <td>{item.itemTotal}</td>\r\n                </tr>\r\n              ))}\r\n              {(!formData.lineItems || formData.lineItems.length === 0) && (\r\n                <tr>\r\n                  <td colSpan=\"11\" className=\"text-center\">No items</td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {showProductOverlay && this.renderProductOverlay()}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTermsTab = () => {\r\n    const { formData } = this.state;\r\n    return (\r\n      <div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Despatch Mode</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.despatchMode} onChange={e => this.handleInputChange('despatchMode', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-4\">\r\n            <label>Payment Terms</label>\r\n            <input type=\"text\" className=\"form-control form-control-sm\" value={formData.paymentTerms} onChange={e => this.handleInputChange('paymentTerms', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Bill To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.billTo} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-6\">\r\n            <label>Ship To</label>\r\n            <textarea className=\"form-control form-control-sm\" rows=\"2\" value={formData.shipTo} readOnly />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightCharges} onChange={e => this.handleInputChange('freightCharges', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax %</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightTaxPercent} onChange={e => this.handleInputChange('freightTaxPercent', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Freight Tax Amt</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.freightTaxAmt} readOnly />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Packing Charges</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.packingCharges} onChange={e => this.handleInputChange('packingCharges', e.target.value)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-row\">\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Amount Limit</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.amountLimit} onChange={e => this.handleInputChange('amountLimit', e.target.value)} />\r\n          </div>\r\n          <div className=\"form-group col-md-3\">\r\n            <label>Minimum Release</label>\r\n            <input type=\"number\" className=\"form-control form-control-sm\" value={formData.minimumRelease} onChange={e => this.handleInputChange('minimumRelease', e.target.value)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderNotesTab = () => (\r\n    <div>\r\n      <div className=\"form-group\">\r\n        <label>Notes / Remarks</label>\r\n        <textarea className=\"form-control form-control-sm\" rows=\"4\" value={this.state.notes} onChange={this.handleNotesChange} />\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  renderForm = () => {\r\n    const { activeTab, formData } = this.state;\r\n    return (\r\n      <div className=\"card full-height\">\r\n        <form className=\"form-sample\" onSubmit={this.handleSubmit}>\r\n          <div style={{ flex: 1, overflowY: 'auto', padding: '24px' }}>\r\n            <h4 className=\"mb-3\">Service Contract Creation/Update</h4>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Contract Type</label>\r\n                <select\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.contractType}\r\n                  onChange={e => this.handleInputChange('contractType', e.target.value)}\r\n                >\r\n                  <option value=\"Standard\">Standard</option>\r\n                  <option value=\"Manual\">Manual</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Contract No</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.contractNo}\r\n                  readOnly\r\n                  placeholder=\"Auto\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Created Date</label>\r\n                <input\r\n                  type=\"date\"\r\n                  className=\"form-control form-control-sm\"\r\n                  value={formData.createdDate}\r\n                  onChange={e => this.handleInputChange('createdDate', e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Status</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.status} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Ref No</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.refNo} onChange={e => this.handleInputChange('refNo', e.target.value)} />\r\n              </div>\r\n\r\n              <div className=\"form-group col-md-2\">\r\n              <label>Customer</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                placeholder=\"Choose Customer\"\r\n                value={formData.customer}\r\n                readOnly\r\n                onClick={this.showCustomerOverlay}\r\n                style={{ cursor: 'pointer' }}\r\n              />\r\n            </div>\r\n            </div>\r\n            <div className=\"form-row\">\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Currency</label>\r\n                <input type=\"text\" className=\"form-control form-control-sm\" value={formData.currency} readOnly />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Conversion Rate</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.conversionRate} onChange={e => this.handleInputChange('conversionRate', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Std.days</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.stdDays} onChange={e => this.handleInputChange('stdDays', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Amt.Agreed</label>\r\n                <input type=\"number\" className=\"form-control form-control-sm\" value={formData.amtAgreed} onChange={e => this.handleInputChange('amtAgreed', e.target.value)} />\r\n              </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Contr.Duration From</label>\r\n                <DatePicker\r\n                  selected={this.state.durationFrom}\r\n                  onChange={date => this.setState({ durationFrom: date }, this.checkDurationSelected)}\r\n                  selectsStart\r\n                  startDate={this.state.durationFrom}\r\n                  endDate={this.state.durationTo}\r\n                  dateFormat=\"yyyy-MM-dd\"\r\n                  className=\"form-control form-control-sm\"\r\n                  placeholderText=\"Select start date\"\r\n                  minDate={new Date()}\r\n                  highlightDates={[this.state.durationFrom, this.state.durationTo].filter(Boolean)}\r\n                />\r\n               </div>\r\n              <div className=\"form-group col-md-2\">\r\n                <label>Contr.Duration To</label>\r\n                <DatePicker\r\n                  selected={this.state.durationTo}\r\n                  onChange={date => this.setState({ durationTo: date }, this.checkDurationSelected)}\r\n                  selectsEnd\r\n                  startDate={this.state.durationFrom}\r\n                  endDate={this.state.durationTo}\r\n                  minDate={this.state.durationFrom}\r\n                  dateFormat=\"yyyy-MM-dd\"\r\n                  className=\"form-control form-control-sm\"\r\n                  placeholderText=\"Select end date\"\r\n                  highlightDates={[this.state.durationFrom, this.state.durationTo].filter(Boolean)}\r\n                />\r\n              </div>\r\n            </div>\r\n            {this.renderTabs()}\r\n            {activeTab === 0 && this.renderLinesTab()}\r\n            {activeTab === 1 && this.renderTermsTab()}\r\n            {activeTab === 2 && this.renderNotesTab()}\r\n            <div className=\"fixed-card-footer text-right p-3 border-top bg-white\">\r\n              <button type=\"submit\" className=\"btn btn-success mr-2\">Create</button>\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={() => this.setState({ showForm: false, editingId: null, formData: this.getEmptyContractForm(), notes: '' })}>Cancel</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderTable = () => (\r\n    <div className=\"card mt-4 full-height\">\r\n      <div className=\"card-body\">\r\n        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n          <h4 className=\"card-title\">Service Contracts</h4>\r\n          <button className=\"btn btn-primary\" onClick={() => this.setState({ showForm: true })}>+ Create Contract</button>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table table-bordered table-hover\">\r\n            <thead className=\"thead-light\">\r\n              <tr>\r\n                <th>Contract No</th>\r\n                <th>Date</th>\r\n                <th>Ref No</th>\r\n                <th>Customer</th>\r\n                <th>Currency</th>\r\n                <th>Duration</th>\r\n                <th>Std Days</th>\r\n                <th>Status</th>\r\n                <th>Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.contracts.map((c, i) => (\r\n                <tr key={i}>\r\n                  <td>{c.contractNo}</td>\r\n                  <td>{c.createdDate}</td>\r\n                  <td>{c.refNo}</td>\r\n                  <td>{c.customer}</td>\r\n                  <td>{c.currency}</td>\r\n                  <td>{c.contrDurationFrom} - {c.contrDurationTo}</td>\r\n                  <td>{c.stdDays}</td>\r\n                  <td>{c.status}</td>\r\n                  <td>{c.contractValue}</td>\r\n                </tr>\r\n              ))}\r\n              {this.state.contracts.length === 0 && (\r\n                <tr><td colSpan=\"9\" className=\"text-center\">No contracts found.</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        {this.state.showCustomerOverlay && this.renderCustomerOverlay()}\r\n        {this.state.showProductOverlay && this.renderProductOverlay()}\r\n        {this.state.showForm ? this.renderForm() : this.renderTable()}\r\n      </div>\r\n         );\r\n  }\r\n}\r\n\r\nexport default ContractBilling;"]},"metadata":{},"sourceType":"module"}