{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\College\\\\admin\\\\StarAdmin-Free-React-Admin-Template-master\\\\template\\\\demo_1\\\\src\\\\app\\\\App.js\";\nimport React, { Component, Suspense, lazy } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport Navbar from './shared/NavBar';\nimport Sidebar from './shared/Sidebar';\nimport AppRoutes from './AppRoutes';\nimport './App.scss';\nimport { auth } from '../firebase';\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nconst Login = lazy(() => import('./user-pages/Login'));\nconst Register = lazy(() => import('./user-pages/Register'));\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: null,\n      loading: true\n    };\n\n    this.handleLogout = async () => {\n      await signOut(auth);\n      localStorage.clear(); // clear cached businessGroup etc.\n\n      window.location.href = \"/user-pages/login\";\n    };\n  }\n\n  componentDidMount() {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        // ✅ Only redirect to dashboard if you're at login/register\n        if (window.location.pathname.startsWith(\"/user-pages\")) {\n          window.location.href = \"/dashboard\";\n        }\n      } else {\n        // ✅ Force login if not authenticated\n        if (!window.location.pathname.startsWith(\"/user-pages\")) {\n          window.location.href = \"/user-pages/login\";\n        }\n      }\n\n      this.setState({\n        user,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 14\n        }\n      }, \"Loading...\");\n    }\n\n    return /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-scroller\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }\n    }, !this.state.user ? /*#__PURE__*/React.createElement(Suspense, {\n      fallback: /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 33\n        }\n      }, \"Loading...\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/user-pages/login\",\n      component: Login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/user-pages/register\",\n      component: Register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/user-pages/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }))) :\n    /*#__PURE__*/\n    // If logged in → show full app (with sidebar + navbar + routes)\n    React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Navbar, {\n      onLogout: this.handleLogout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid page-body-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(AppRoutes, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }\n    })))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/College/admin/StarAdmin-Free-React-Admin-Template-master/template/demo_1/src/app/App.js"],"names":["React","Component","Suspense","lazy","BrowserRouter","Router","Route","Switch","Redirect","Navbar","Sidebar","AppRoutes","auth","onAuthStateChanged","signOut","Login","Register","App","state","user","loading","handleLogout","localStorage","clear","window","location","href","componentDidMount","pathname","startsWith","setState","render"],"mappings":"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","sourcesContent":["import React, { Component, Suspense, lazy } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport Navbar from './shared/NavBar';\nimport Sidebar from './shared/Sidebar'\nimport AppRoutes from './AppRoutes';\nimport './App.scss';\nimport { auth } from '../firebase'\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\n\nconst Login = lazy(() => import('./user-pages/Login'));\nconst Register = lazy(() => import('./user-pages/Register'));\n\nclass App extends Component {\n  state = { user: null, loading: true };\n\n  componentDidMount() {\n   onAuthStateChanged(auth, (user) => {\n  if (user) {\n    // ✅ Only redirect to dashboard if you're at login/register\n    if (window.location.pathname.startsWith(\"/user-pages\")) {\n      window.location.href = \"/dashboard\";\n    }\n  } else {\n    // ✅ Force login if not authenticated\n    if (!window.location.pathname.startsWith(\"/user-pages\")) {\n      window.location.href = \"/user-pages/login\";\n    }\n  }\n  this.setState({ user, loading: false });\n});\n\n  }\n  handleLogout = async () => {\n  await signOut(auth);\n  localStorage.clear(); // clear cached businessGroup etc.\n  window.location.href = \"/user-pages/login\";\n}\n\n  render() {\n    if (this.state.loading) {\n      return <div className=\"text-center mt-5\">Loading...</div>;\n    }\n\n    return (\n      <Router>\n        <div className=\"container-scroller\">\n          {/* If no user, only show login/register */}\n          {!this.state.user ? (\n            <Suspense fallback={<div>Loading...</div>}>\n              <Switch>\n                <Route exact path=\"/user-pages/login\" component={Login} />\n                <Route exact path=\"/user-pages/register\" component={Register} />\n                <Redirect to=\"/user-pages/login\" />\n              </Switch>\n            </Suspense>\n          ) : (\n            // If logged in → show full app (with sidebar + navbar + routes)\n            <>\n              <Navbar onLogout={this.handleLogout} />\n              <div className=\"container-fluid page-body-wrapper\">\n                <Sidebar />\n                <div className=\"main-panel\">\n                  <div className=\"content-wrapper\">\n                    <AppRoutes />\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}